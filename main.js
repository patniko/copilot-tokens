"use strict";const z=require("electron"),re=require("node:path"),Pe=require("node:child_process"),bo=require("node:fs/promises"),Se=require("fs"),Ae=require("path"),Ga=require("os"),Ro=require("child_process"),oe=require("node:process"),ue=require("node:util"),Q=require("node:fs"),at=require("node:crypto"),us=require("node:assert"),Xn=require("node:os");require("node:events");require("node:stream");async function Po(){return Promise.resolve().then(()=>require("./index-Cba_Y1az.js"))}function Io(){const t=["/opt/homebrew/bin/copilot","/usr/local/bin/copilot",Ae.join(Ga.homedir(),".local","bin","copilot")];for(const i of t)if(Se.existsSync(i))return i;try{const i=Ro.execSync("which copilot",{encoding:"utf-8"}).trim();if(i&&Se.existsSync(i))return i}catch{}const e=z.app.getAppPath(),r=Ae.join(e+".unpacked","node_modules","@github","copilot","index.js");if(Se.existsSync(r))return r;const n=Ae.join(e,"node_modules","@github","copilot","index.js");if(Se.existsSync(n))return n;let a=__dirname;for(let i=0;i<10;i++){const o=Ae.join(a,"node_modules","@github","copilot","index.js");if(Se.existsSync(o))return o;const c=Ae.dirname(a);if(c===a)break;a=c}return""}function Ka(){const t={},e=Ae.join(Ga.homedir(),".copilot"),r=Ae.join(e,"mcp-config.json");if(Se.existsSync(r))try{const a=JSON.parse(Se.readFileSync(r,"utf-8"));a.mcpServers&&Object.assign(t,a.mcpServers)}catch{}const n=Ae.join(e,"installed-plugins");if(Se.existsSync(n))try{for(const a of Se.readdirSync(n)){const i=Ae.join(n,a);for(const o of Se.readdirSync(i)){const c=Ae.join(i,o,".mcp.json");if(Se.existsSync(c))try{const l=JSON.parse(Se.readFileSync(c,"utf-8"));l.mcpServers&&Object.assign(t,l.mcpServers)}catch{}}}}catch{}return t}class Be{static instance;client=null;sessions=new Map;started=!1;workingDirectory;model="claude-sonnet-4";permissionCallback=null;constructor(){}static getInstance(){return Be.instance||(Be.instance=new Be),Be.instance}setWorkingDirectory(e){if(e&&e!==this.workingDirectory){this.workingDirectory=e;for(const[r,n]of this.sessions)n.destroy().catch(()=>{}),this.sessions.delete(r)}}setModel(e){if(e&&e!==this.model){this.model=e;for(const[r,n]of this.sessions)n.destroy().catch(()=>{}),this.sessions.delete(r)}}getModel(){return this.model}setPermissionHandler(e){this.permissionCallback=e}async listModels(){return await this.ensureStarted(),(await this.client.listModels()).map(r=>({id:r.id,name:r.name,contextWindow:r.capabilities?.limits?.max_context_window_tokens??0}))}async refreshModels(){return await this.ensureStarted(),this.client.modelsCache=null,this.listModels()}async ensureStarted(){if(!this.started){const{CopilotClient:e}=await Po(),r=Io();console.log("[CopilotService] Resolved CLI path:",r||"(SDK default)");const n={autoStart:!1};r&&(n.cliPath=r),z.app.isPackaged&&r.endsWith(".js")&&(n.env={...process.env,ELECTRON_RUN_AS_NODE:"1"}),this.client=new e(n),await this.client.start(),this.started=!0}}async ensureSession(e="main"){await this.ensureStarted();let r=this.sessions.get(e);if(!r){const n={model:this.model,streaming:!0,excludedTools:[],mcpServers:Ka()};if(this.workingDirectory&&(n.workingDirectory=this.workingDirectory),this.permissionCallback){const a=this.permissionCallback;n.onPermissionRequest=async i=>({kind:await a(i)==="deny"?"denied-interactively-by-user":"approved"})}r=await this.client.createSession(n),this.sessions.set(e,r)}return r}async destroySession(e){const r=this.sessions.get(e);r&&(await r.destroy().catch(()=>{}),this.sessions.delete(e))}abortResolves=new Map;async sendMessage(e,r,n,a="main"){const i=await this.ensureSession(a),o=new Promise(l=>{this.abortResolves.set(a,l);const u=i.on(s=>{switch(s.type){case"assistant.message_delta":r({type:"assistant.message_delta",delta:s.data.deltaContent??""});break;case"assistant.message":r({type:"assistant.message",content:s.data.content??""});break;case"assistant.intent":r({type:"assistant.intent",intent:s.data.intent??""});break;case"assistant.usage":{const f=s.data;r({type:"assistant.usage",inputTokens:f.inputTokens??0,outputTokens:f.outputTokens??0,model:f.model??""});break}case"tool.execution_start":{const f=s.data;r({type:"tool.start",toolCallId:f.toolCallId??"",toolName:f.toolName??"",args:f.arguments??f.toolArgs??{}});break}case"tool.execution_progress":{const f=s.data;r({type:"tool.progress",toolCallId:f.toolCallId??"",message:f.progressMessage??""});break}case"tool.execution_partial_result":{const f=s.data;r({type:"tool.partial",toolCallId:f.toolCallId??"",output:f.partialOutput??""});break}case"tool.execution_complete":{const f=s.data;r({type:"tool.complete",toolCallId:f.toolCallId??"",success:f.success??!0,result:f.result?.content,error:f.error?.message});break}case"subagent.started":{const f=s.data;r({type:"subagent.started",toolCallId:f.toolCallId??"",name:f.name??"",displayName:f.displayName??f.name??"",description:f.description??""});break}case"subagent.completed":{const f=s.data;r({type:"subagent.completed",toolCallId:f.toolCallId??"",name:f.name??""});break}case"subagent.failed":{const f=s.data;r({type:"subagent.failed",toolCallId:f.toolCallId??"",name:f.name??"",error:f.error??"Unknown error"});break}case"session.idle":r({type:"session.idle"}),u(),this.abortResolves.delete(a),l();break}})}),c={prompt:e};n?.length&&(c.attachments=n.map(l=>({type:"file",path:l.path}))),await i.send(c),await o}async abort(e="main"){const r=this.sessions.get(e);r&&await r.abort();const n=this.abortResolves.get(e);n&&(n(),this.abortResolves.delete(e))}async stop(){for(const[e,r]of this.sessions)await r.destroy().catch(()=>{}),this.sessions.delete(e);this.started&&this.client&&(await this.client.stop(),this.started=!1)}}const We=t=>{const e=typeof t;return t!==null&&(e==="object"||e==="function")},xa=new Set(["__proto__","prototype","constructor"]),Ha=1e6,No=t=>t>="0"&&t<="9";function Ba(t){if(t==="0")return!0;if(/^[1-9]\d*$/.test(t)){const e=Number.parseInt(t,10);return e<=Number.MAX_SAFE_INTEGER&&e<=Ha}return!1}function qr(t,e){return xa.has(t)?!1:(t&&Ba(t)?e.push(Number.parseInt(t,10)):e.push(t),!0)}function Oo(t){if(typeof t!="string")throw new TypeError(`Expected a string, got ${typeof t}`);const e=[];let r="",n="start",a=!1,i=0;for(const o of t){if(i++,a){r+=o,a=!1;continue}if(o==="\\"){if(n==="index")throw new Error(`Invalid character '${o}' in an index at position ${i}`);if(n==="indexEnd")throw new Error(`Invalid character '${o}' after an index at position ${i}`);a=!0,n=n==="start"?"property":n;continue}switch(o){case".":{if(n==="index")throw new Error(`Invalid character '${o}' in an index at position ${i}`);if(n==="indexEnd"){n="property";break}if(!qr(r,e))return[];r="",n="property";break}case"[":{if(n==="index")throw new Error(`Invalid character '${o}' in an index at position ${i}`);if(n==="indexEnd"){n="index";break}if(n==="property"||n==="start"){if((r||n==="property")&&!qr(r,e))return[];r=""}n="index";break}case"]":{if(n==="index"){if(r==="")r=(e.pop()||"")+"[]",n="property";else{const c=Number.parseInt(r,10);!Number.isNaN(c)&&Number.isFinite(c)&&c>=0&&c<=Number.MAX_SAFE_INTEGER&&c<=Ha&&r===String(c)?e.push(c):e.push(r),r="",n="indexEnd"}break}if(n==="indexEnd")throw new Error(`Invalid character '${o}' after an index at position ${i}`);r+=o;break}default:{if(n==="index"&&!No(o))throw new Error(`Invalid character '${o}' in an index at position ${i}`);if(n==="indexEnd")throw new Error(`Invalid character '${o}' after an index at position ${i}`);n==="start"&&(n="property"),r+=o}}}switch(a&&(r+="\\"),n){case"property":{if(!qr(r,e))return[];break}case"index":throw new Error("Index was not closed");case"start":{e.push("");break}}return e}function wr(t){if(typeof t=="string")return Oo(t);if(Array.isArray(t)){const e=[];for(const[r,n]of t.entries()){if(typeof n!="string"&&typeof n!="number")throw new TypeError(`Expected a string or number for path segment at index ${r}, got ${typeof n}`);if(typeof n=="number"&&!Number.isFinite(n))throw new TypeError(`Path segment at index ${r} must be a finite number, got ${n}`);if(xa.has(n))return[];typeof n=="string"&&Ba(n)?e.push(Number.parseInt(n,10)):e.push(n)}return e}return[]}function ls(t,e,r){if(!We(t)||typeof e!="string"&&!Array.isArray(e))return r===void 0?t:r;const n=wr(e);if(n.length===0)return r;for(let a=0;a<n.length;a++){const i=n[a];if(t=t[i],t==null){if(a!==n.length-1)return r;break}}return t===void 0?r:t}function pt(t,e,r){if(!We(t)||typeof e!="string"&&!Array.isArray(e))return t;const n=t,a=wr(e);if(a.length===0)return t;for(let i=0;i<a.length;i++){const o=a[i];if(i===a.length-1)t[o]=r;else if(!We(t[o])){const l=typeof a[i+1]=="number";t[o]=l?[]:{}}t=t[o]}return n}function To(t,e){if(!We(t)||typeof e!="string"&&!Array.isArray(e))return!1;const r=wr(e);if(r.length===0)return!1;for(let n=0;n<r.length;n++){const a=r[n];if(n===r.length-1)return Object.hasOwn(t,a)?(delete t[a],!0):!1;if(t=t[a],!We(t))return!1}}function Mr(t,e){if(!We(t)||typeof e!="string"&&!Array.isArray(e))return!1;const r=wr(e);if(r.length===0)return!1;for(const n of r){if(!We(t)||!(n in t))return!1;t=t[n]}return!0}const ze=Xn.homedir(),Wn=Xn.tmpdir(),{env:rt}=oe,Ao=t=>{const e=re.join(ze,"Library");return{data:re.join(e,"Application Support",t),config:re.join(e,"Preferences",t),cache:re.join(e,"Caches",t),log:re.join(e,"Logs",t),temp:re.join(Wn,t)}},jo=t=>{const e=rt.APPDATA||re.join(ze,"AppData","Roaming"),r=rt.LOCALAPPDATA||re.join(ze,"AppData","Local");return{data:re.join(r,t,"Data"),config:re.join(e,t,"Config"),cache:re.join(r,t,"Cache"),log:re.join(r,t,"Log"),temp:re.join(Wn,t)}},ko=t=>{const e=re.basename(ze);return{data:re.join(rt.XDG_DATA_HOME||re.join(ze,".local","share"),t),config:re.join(rt.XDG_CONFIG_HOME||re.join(ze,".config"),t),cache:re.join(rt.XDG_CACHE_HOME||re.join(ze,".cache"),t),log:re.join(rt.XDG_STATE_HOME||re.join(ze,".local","state"),t),temp:re.join(Wn,e,t)}};function Co(t,{suffix:e="nodejs"}={}){if(typeof t!="string")throw new TypeError(`Expected a string, got ${typeof t}`);return e&&(t+=`-${e}`),oe.platform==="darwin"?Ao(t):oe.platform==="win32"?jo(t):ko(t)}const De=(t,e)=>{const{onError:r}=e;return function(...a){return t.apply(void 0,a).catch(r)}},je=(t,e)=>{const{onError:r}=e;return function(...a){try{return t.apply(void 0,a)}catch(i){return r(i)}}},qo=250,Le=(t,e)=>{const{isRetriable:r}=e;return function(a){const{timeout:i}=a,o=a.interval??qo,c=Date.now()+i;return function l(...u){return t.apply(void 0,u).catch(s=>{if(!r(s)||Date.now()>=c)throw s;const f=Math.round(o*Math.random());return f>0?new Promise(m=>setTimeout(m,f)).then(()=>l.apply(void 0,u)):l.apply(void 0,u)})}}},Fe=(t,e)=>{const{isRetriable:r}=e;return function(a){const{timeout:i}=a,o=Date.now()+i;return function(...l){for(;;)try{return t.apply(void 0,l)}catch(u){if(!r(u)||Date.now()>=o)throw u;continue}}}},nt={isChangeErrorOk:t=>{if(!nt.isNodeError(t))return!1;const{code:e}=t;return e==="ENOSYS"||!Mo&&(e==="EINVAL"||e==="EPERM")},isNodeError:t=>t instanceof Error,isRetriableError:t=>{if(!nt.isNodeError(t))return!1;const{code:e}=t;return e==="EMFILE"||e==="ENFILE"||e==="EAGAIN"||e==="EBUSY"||e==="EACCESS"||e==="EACCES"||e==="EACCS"||e==="EPERM"},onChangeError:t=>{if(!nt.isNodeError(t))throw t;if(!nt.isChangeErrorOk(t))throw t}},mt={onError:nt.onChangeError},$e={onError:()=>{}},Mo=oe.getuid?!oe.getuid():!1,he={isRetriable:nt.isRetriableError},pe={attempt:{chmod:De(ue.promisify(Q.chmod),mt),chown:De(ue.promisify(Q.chown),mt),close:De(ue.promisify(Q.close),$e),fsync:De(ue.promisify(Q.fsync),$e),mkdir:De(ue.promisify(Q.mkdir),$e),realpath:De(ue.promisify(Q.realpath),$e),stat:De(ue.promisify(Q.stat),$e),unlink:De(ue.promisify(Q.unlink),$e),chmodSync:je(Q.chmodSync,mt),chownSync:je(Q.chownSync,mt),closeSync:je(Q.closeSync,$e),existsSync:je(Q.existsSync,$e),fsyncSync:je(Q.fsync,$e),mkdirSync:je(Q.mkdirSync,$e),realpathSync:je(Q.realpathSync,$e),statSync:je(Q.statSync,$e),unlinkSync:je(Q.unlinkSync,$e)},retry:{close:Le(ue.promisify(Q.close),he),fsync:Le(ue.promisify(Q.fsync),he),open:Le(ue.promisify(Q.open),he),readFile:Le(ue.promisify(Q.readFile),he),rename:Le(ue.promisify(Q.rename),he),stat:Le(ue.promisify(Q.stat),he),write:Le(ue.promisify(Q.write),he),writeFile:Le(ue.promisify(Q.writeFile),he),closeSync:Fe(Q.closeSync,he),fsyncSync:Fe(Q.fsyncSync,he),openSync:Fe(Q.openSync,he),readFileSync:Fe(Q.readFileSync,he),renameSync:Fe(Q.renameSync,he),statSync:Fe(Q.statSync,he),writeSync:Fe(Q.writeSync,he),writeFileSync:Fe(Q.writeFileSync,he)}},Do="utf8",ds=438,Lo=511,Fo={},Vo=oe.geteuid?oe.geteuid():-1,Uo=oe.getegid?oe.getegid():-1,zo=1e3,Go=!!oe.getuid;oe.getuid&&oe.getuid();const fs=128,Ko=t=>t instanceof Error&&"code"in t,hs=t=>typeof t=="string",Dr=t=>t===void 0,xo=oe.platform==="linux",Xa=oe.platform==="win32",Jn=["SIGHUP","SIGINT","SIGTERM"];Xa||Jn.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");xo&&Jn.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");class Ho{constructor(){this.callbacks=new Set,this.exited=!1,this.exit=e=>{if(!this.exited){this.exited=!0;for(const r of this.callbacks)r();e&&(Xa&&e!=="SIGINT"&&e!=="SIGTERM"&&e!=="SIGKILL"?oe.kill(oe.pid,"SIGTERM"):oe.kill(oe.pid,e))}},this.hook=()=>{oe.once("exit",()=>this.exit());for(const e of Jn)try{oe.once(e,()=>this.exit(e))}catch{}},this.register=e=>(this.callbacks.add(e),()=>{this.callbacks.delete(e)}),this.hook()}}const Bo=new Ho,Xo=Bo.register,me={store:{},create:t=>{const e=`000000${Math.floor(Math.random()*16777215).toString(16)}`.slice(-6),a=`.tmp-${Date.now().toString().slice(-10)}${e}`;return`${t}${a}`},get:(t,e,r=!0)=>{const n=me.truncate(e(t));return n in me.store?me.get(t,e,r):(me.store[n]=r,[n,()=>delete me.store[n]])},purge:t=>{me.store[t]&&(delete me.store[t],pe.attempt.unlink(t))},purgeSync:t=>{me.store[t]&&(delete me.store[t],pe.attempt.unlinkSync(t))},purgeSyncAll:()=>{for(const t in me.store)me.purgeSync(t)},truncate:t=>{const e=re.basename(t);if(e.length<=fs)return t;const r=/^(\.?)(.*?)((?:\.[^.]+)?(?:\.tmp-\d{10}[a-f0-9]{6})?)$/.exec(e);if(!r)return t;const n=e.length-fs;return`${t.slice(0,-e.length)}${r[1]}${r[2].slice(0,-n)}${r[3]}`}};Xo(me.purgeSyncAll);function Wa(t,e,r=Fo){if(hs(r))return Wa(t,e,{encoding:r});const a={timeout:r.timeout??zo};let i=null,o=null,c=null;try{const l=pe.attempt.realpathSync(t),u=!!l;t=l||t,[o,i]=me.get(t,r.tmpCreate||me.create,r.tmpPurge!==!1);const s=Go&&Dr(r.chown),f=Dr(r.mode);if(u&&(s||f)){const h=pe.attempt.statSync(t);h&&(r={...r},s&&(r.chown={uid:h.uid,gid:h.gid}),f&&(r.mode=h.mode))}if(!u){const h=re.dirname(t);pe.attempt.mkdirSync(h,{mode:Lo,recursive:!0})}c=pe.retry.openSync(a)(o,"w",r.mode||ds),r.tmpCreated&&r.tmpCreated(o),hs(e)?pe.retry.writeSync(a)(c,e,0,r.encoding||Do):Dr(e)||pe.retry.writeSync(a)(c,e,0,e.length,0),r.fsync!==!1&&(r.fsyncWait!==!1?pe.retry.fsyncSync(a)(c):pe.attempt.fsync(c)),pe.retry.closeSync(a)(c),c=null,r.chown&&(r.chown.uid!==Vo||r.chown.gid!==Uo)&&pe.attempt.chownSync(o,r.chown.uid,r.chown.gid),r.mode&&r.mode!==ds&&pe.attempt.chmodSync(o,r.mode);try{pe.retry.renameSync(a)(o,t)}catch(h){if(!Ko(h)||h.code!=="ENAMETOOLONG")throw h;pe.retry.renameSync(a)(o,me.truncate(t))}i(),o=null}finally{c&&pe.attempt.closeSync(c),o&&me.purge(o)}}function Ja(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yt={exports:{}},Lr={},ke={},Ke={},Fr={},Vr={},Ur={},ps;function _r(){return ps||(ps=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(d){if(super(),!t.IDENTIFIER.test(d))throw new Error("CodeGen: name must be a valid identifier");this.str=d}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(d){super(),this._items=typeof d=="string"?[d]:d}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const d=this._items[0];return d===""||d==='""'}get str(){var d;return(d=this._str)!==null&&d!==void 0?d:this._str=this._items.reduce((g,S)=>`${g}${S}`,"")}get names(){var d;return(d=this._names)!==null&&d!==void 0?d:this._names=this._items.reduce((g,S)=>(S instanceof r&&(g[S.str]=(g[S.str]||0)+1),g),{})}}t._Code=n,t.nil=new n("");function a(v,...d){const g=[v[0]];let S=0;for(;S<d.length;)c(g,d[S]),g.push(v[++S]);return new n(g)}t._=a;const i=new n("+");function o(v,...d){const g=[m(v[0])];let S=0;for(;S<d.length;)g.push(i),c(g,d[S]),g.push(i,m(v[++S]));return l(g),new n(g)}t.str=o;function c(v,d){d instanceof n?v.push(...d._items):d instanceof r?v.push(d):v.push(f(d))}t.addCodeArg=c;function l(v){let d=1;for(;d<v.length-1;){if(v[d]===i){const g=u(v[d-1],v[d+1]);if(g!==void 0){v.splice(d-1,3,g);continue}v[d++]="+"}d++}}function u(v,d){if(d==='""')return v;if(v==='""')return d;if(typeof v=="string")return d instanceof r||v[v.length-1]!=='"'?void 0:typeof d!="string"?`${v.slice(0,-1)}${d}"`:d[0]==='"'?v.slice(0,-1)+d.slice(1):void 0;if(typeof d=="string"&&d[0]==='"'&&!(v instanceof r))return`"${v}${d.slice(1)}`}function s(v,d){return d.emptyStr()?v:v.emptyStr()?d:o`${v}${d}`}t.strConcat=s;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:m(Array.isArray(v)?v.join(","):v)}function h(v){return new n(m(v))}t.stringify=h;function m(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=m;function _(v){return typeof v=="string"&&t.IDENTIFIER.test(v)?new n(`.${v}`):a`[${v}]`}t.getProperty=_;function $(v){if(typeof v=="string"&&t.IDENTIFIER.test(v))return new n(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}t.getEsmExportName=$;function p(v){return new n(v.toString())}t.regexpCode=p})(Ur)),Ur}var zr={},ms;function ys(){return ms||(ms=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=_r();class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class a{constructor({prefixes:u,parent:s}={}){this._names={},this._prefixes=u,this._parent=s}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const s=this._names[u]||this._nameGroup(u);return`${u}${s.index++}`}_nameGroup(u){var s,f;if(!((f=(s=this._parent)===null||s===void 0?void 0:s._prefixes)===null||f===void 0)&&f.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=a;class i extends e.Name{constructor(u,s){super(s),this.prefix=u}setValue(u,{property:s,itemIndex:f}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(s)}[${f}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class c extends a{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:e.nil}}get(){return this._scope}name(u){return new i(u,this._newName(u))}value(u,s){var f;if(s.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(u),{prefix:m}=h,_=(f=s.key)!==null&&f!==void 0?f:s.ref;let $=this._values[m];if($){const d=$.get(_);if(d)return d}else $=this._values[m]=new Map;$.set(_,h);const p=this._scope[m]||(this._scope[m]=[]),v=p.length;return p[v]=s.ref,h.setValue(s,{property:m,itemIndex:v}),h}getValue(u,s){const f=this._values[u];if(f)return f.get(s)}scopeRefs(u,s=this._values){return this._reduceValues(s,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${u}${f.scopePath}`})}scopeCode(u=this._values,s,f){return this._reduceValues(u,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},s,f)}_reduceValues(u,s,f={},h){let m=e.nil;for(const _ in u){const $=u[_];if(!$)continue;const p=f[_]=f[_]||new Map;$.forEach(v=>{if(p.has(v))return;p.set(v,n.Started);let d=s(v);if(d){const g=this.opts.es5?t.varKinds.var:t.varKinds.const;m=(0,e._)`${m}${g} ${v} = ${d};${this.opts._n}`}else if(d=h?.(v))m=(0,e._)`${m}${d}${this.opts._n}`;else throw new r(v);p.set(v,n.Completed)})}return m}}t.ValueScope=c})(zr)),zr}var gs;function Z(){return gs||(gs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=_r(),r=ys();var n=_r();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var a=ys();Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(w,R){return this}}class o extends i{constructor(w,R,C){super(),this.varKind=w,this.name=R,this.rhs=C}render({es5:w,_n:R}){const C=w?r.varKinds.var:this.varKind,X=this.rhs===void 0?"":` = ${this.rhs}`;return`${C} ${this.name}${X};`+R}optimizeNames(w,R){if(w[this.name.str])return this.rhs&&(this.rhs=j(this.rhs,w,R)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class c extends i{constructor(w,R,C){super(),this.lhs=w,this.rhs=R,this.sideEffects=C}render({_n:w}){return`${this.lhs} = ${this.rhs};`+w}optimizeNames(w,R){if(!(this.lhs instanceof e.Name&&!w[this.lhs.str]&&!this.sideEffects))return this.rhs=j(this.rhs,w,R),this}get names(){const w=this.lhs instanceof e.Name?{}:{...this.lhs.names};return K(w,this.rhs)}}class l extends c{constructor(w,R,C,X){super(w,C,X),this.op=R}render({_n:w}){return`${this.lhs} ${this.op}= ${this.rhs};`+w}}class u extends i{constructor(w){super(),this.label=w,this.names={}}render({_n:w}){return`${this.label}:`+w}}class s extends i{constructor(w){super(),this.label=w,this.names={}}render({_n:w}){return`break${this.label?` ${this.label}`:""};`+w}}class f extends i{constructor(w){super(),this.error=w}render({_n:w}){return`throw ${this.error};`+w}get names(){return this.error.names}}class h extends i{constructor(w){super(),this.code=w}render({_n:w}){return`${this.code};`+w}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(w,R){return this.code=j(this.code,w,R),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class m extends i{constructor(w=[]){super(),this.nodes=w}render(w){return this.nodes.reduce((R,C)=>R+C.render(w),"")}optimizeNodes(){const{nodes:w}=this;let R=w.length;for(;R--;){const C=w[R].optimizeNodes();Array.isArray(C)?w.splice(R,1,...C):C?w[R]=C:w.splice(R,1)}return w.length>0?this:void 0}optimizeNames(w,R){const{nodes:C}=this;let X=C.length;for(;X--;){const J=C[X];J.optimizeNames(w,R)||(M(w,J.names),C.splice(X,1))}return C.length>0?this:void 0}get names(){return this.nodes.reduce((w,R)=>V(w,R.names),{})}}class _ extends m{render(w){return"{"+w._n+super.render(w)+"}"+w._n}}class $ extends m{}class p extends _{}p.kind="else";class v extends _{constructor(w,R){super(R),this.condition=w}render(w){let R=`if(${this.condition})`+super.render(w);return this.else&&(R+="else "+this.else.render(w)),R}optimizeNodes(){super.optimizeNodes();const w=this.condition;if(w===!0)return this.nodes;let R=this.else;if(R){const C=R.optimizeNodes();R=this.else=Array.isArray(C)?new p(C):C}if(R)return w===!1?R instanceof v?R:R.nodes:this.nodes.length?this:new v(B(w),R instanceof v?[R]:R.nodes);if(!(w===!1||!this.nodes.length))return this}optimizeNames(w,R){var C;if(this.else=(C=this.else)===null||C===void 0?void 0:C.optimizeNames(w,R),!!(super.optimizeNames(w,R)||this.else))return this.condition=j(this.condition,w,R),this}get names(){const w=super.names;return K(w,this.condition),this.else&&V(w,this.else.names),w}}v.kind="if";class d extends _{}d.kind="for";class g extends d{constructor(w){super(),this.iteration=w}render(w){return`for(${this.iteration})`+super.render(w)}optimizeNames(w,R){if(super.optimizeNames(w,R))return this.iteration=j(this.iteration,w,R),this}get names(){return V(super.names,this.iteration.names)}}class S extends d{constructor(w,R,C,X){super(),this.varKind=w,this.name=R,this.from=C,this.to=X}render(w){const R=w.es5?r.varKinds.var:this.varKind,{name:C,from:X,to:J}=this;return`for(${R} ${C}=${X}; ${C}<${J}; ${C}++)`+super.render(w)}get names(){const w=K(super.names,this.from);return K(w,this.to)}}class y extends d{constructor(w,R,C,X){super(),this.loop=w,this.varKind=R,this.name=C,this.iterable=X}render(w){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(w)}optimizeNames(w,R){if(super.optimizeNames(w,R))return this.iterable=j(this.iterable,w,R),this}get names(){return V(super.names,this.iterable.names)}}class E extends _{constructor(w,R,C){super(),this.name=w,this.args=R,this.async=C}render(w){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(w)}}E.kind="func";class b extends m{render(w){return"return "+super.render(w)}}b.kind="return";class O extends _{render(w){let R="try"+super.render(w);return this.catch&&(R+=this.catch.render(w)),this.finally&&(R+=this.finally.render(w)),R}optimizeNodes(){var w,R;return super.optimizeNodes(),(w=this.catch)===null||w===void 0||w.optimizeNodes(),(R=this.finally)===null||R===void 0||R.optimizeNodes(),this}optimizeNames(w,R){var C,X;return super.optimizeNames(w,R),(C=this.catch)===null||C===void 0||C.optimizeNames(w,R),(X=this.finally)===null||X===void 0||X.optimizeNames(w,R),this}get names(){const w=super.names;return this.catch&&V(w,this.catch.names),this.finally&&V(w,this.finally.names),w}}class L extends _{constructor(w){super(),this.error=w}render(w){return`catch(${this.error})`+super.render(w)}}L.kind="catch";class G extends _{render(w){return"finally"+super.render(w)}}G.kind="finally";class q{constructor(w,R={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...R,_n:R.lines?`
`:""},this._extScope=w,this._scope=new r.Scope({parent:w}),this._nodes=[new $]}toString(){return this._root.render(this.opts)}name(w){return this._scope.name(w)}scopeName(w){return this._extScope.name(w)}scopeValue(w,R){const C=this._extScope.value(w,R);return(this._values[C.prefix]||(this._values[C.prefix]=new Set)).add(C),C}getScopeValue(w,R){return this._extScope.getValue(w,R)}scopeRefs(w){return this._extScope.scopeRefs(w,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(w,R,C,X){const J=this._scope.toName(R);return C!==void 0&&X&&(this._constants[J.str]=C),this._leafNode(new o(w,J,C)),J}const(w,R,C){return this._def(r.varKinds.const,w,R,C)}let(w,R,C){return this._def(r.varKinds.let,w,R,C)}var(w,R,C){return this._def(r.varKinds.var,w,R,C)}assign(w,R,C){return this._leafNode(new c(w,R,C))}add(w,R){return this._leafNode(new l(w,t.operators.ADD,R))}code(w){return typeof w=="function"?w():w!==e.nil&&this._leafNode(new h(w)),this}object(...w){const R=["{"];for(const[C,X]of w)R.length>1&&R.push(","),R.push(C),(C!==X||this.opts.es5)&&(R.push(":"),(0,e.addCodeArg)(R,X));return R.push("}"),new e._Code(R)}if(w,R,C){if(this._blockNode(new v(w)),R&&C)this.code(R).else().code(C).endIf();else if(R)this.code(R).endIf();else if(C)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(w){return this._elseNode(new v(w))}else(){return this._elseNode(new p)}endIf(){return this._endBlockNode(v,p)}_for(w,R){return this._blockNode(w),R&&this.code(R).endFor(),this}for(w,R){return this._for(new g(w),R)}forRange(w,R,C,X,J=this.opts.es5?r.varKinds.var:r.varKinds.let){const ie=this._scope.toName(w);return this._for(new S(J,ie,R,C),()=>X(ie))}forOf(w,R,C,X=r.varKinds.const){const J=this._scope.toName(w);if(this.opts.es5){const ie=R instanceof e.Name?R:this.var("_arr",R);return this.forRange("_i",0,(0,e._)`${ie}.length`,se=>{this.var(J,(0,e._)`${ie}[${se}]`),C(J)})}return this._for(new y("of",X,J,R),()=>C(J))}forIn(w,R,C,X=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(w,(0,e._)`Object.keys(${R})`,C);const J=this._scope.toName(w);return this._for(new y("in",X,J,R),()=>C(J))}endFor(){return this._endBlockNode(d)}label(w){return this._leafNode(new u(w))}break(w){return this._leafNode(new s(w))}return(w){const R=new b;if(this._blockNode(R),this.code(w),R.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(b)}try(w,R,C){if(!R&&!C)throw new Error('CodeGen: "try" without "catch" and "finally"');const X=new O;if(this._blockNode(X),this.code(w),R){const J=this.name("e");this._currNode=X.catch=new L(J),R(J)}return C&&(this._currNode=X.finally=new G,this.code(C)),this._endBlockNode(L,G)}throw(w){return this._leafNode(new f(w))}block(w,R){return this._blockStarts.push(this._nodes.length),w&&this.code(w).endBlock(R),this}endBlock(w){const R=this._blockStarts.pop();if(R===void 0)throw new Error("CodeGen: not in self-balancing block");const C=this._nodes.length-R;if(C<0||w!==void 0&&C!==w)throw new Error(`CodeGen: wrong number of nodes: ${C} vs ${w} expected`);return this._nodes.length=R,this}func(w,R=e.nil,C,X){return this._blockNode(new E(w,R,C)),X&&this.code(X).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(w=1){for(;w-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(w){return this._currNode.nodes.push(w),this}_blockNode(w){this._currNode.nodes.push(w),this._nodes.push(w)}_endBlockNode(w,R){const C=this._currNode;if(C instanceof w||R&&C instanceof R)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${R?`${w.kind}/${R.kind}`:w.kind}"`)}_elseNode(w){const R=this._currNode;if(!(R instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=R.else=w,this}get _root(){return this._nodes[0]}get _currNode(){const w=this._nodes;return w[w.length-1]}set _currNode(w){const R=this._nodes;R[R.length-1]=w}}t.CodeGen=q;function V(I,w){for(const R in w)I[R]=(I[R]||0)+(w[R]||0);return I}function K(I,w){return w instanceof e._CodeOrName?V(I,w.names):I}function j(I,w,R){if(I instanceof e.Name)return C(I);if(!X(I))return I;return new e._Code(I._items.reduce((J,ie)=>(ie instanceof e.Name&&(ie=C(ie)),ie instanceof e._Code?J.push(...ie._items):J.push(ie),J),[]));function C(J){const ie=R[J.str];return ie===void 0||w[J.str]!==1?J:(delete w[J.str],ie)}function X(J){return J instanceof e._Code&&J._items.some(ie=>ie instanceof e.Name&&w[ie.str]===1&&R[ie.str]!==void 0)}}function M(I,w){for(const R in w)I[R]=(I[R]||0)-(w[R]||0)}function B(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:(0,e._)`!${A(I)}`}t.not=B;const x=P(t.operators.AND);function U(...I){return I.reduce(x)}t.and=U;const H=P(t.operators.OR);function k(...I){return I.reduce(H)}t.or=k;function P(I){return(w,R)=>w===e.nil?R:R===e.nil?w:(0,e._)`${A(w)} ${I} ${A(R)}`}function A(I){return I instanceof e.Name?I:(0,e._)`(${I})`}})(Vr)),Vr}var ee={},vs;function ne(){if(vs)return ee;vs=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.checkStrictMode=ee.getErrorPath=ee.Type=ee.useFunc=ee.setEvaluated=ee.evaluatedPropsToName=ee.mergeEvaluated=ee.eachItem=ee.unescapeJsonPointer=ee.escapeJsonPointer=ee.escapeFragment=ee.unescapeFragment=ee.schemaRefOrVal=ee.schemaHasRulesButRef=ee.schemaHasRules=ee.checkUnknownRules=ee.alwaysValidSchema=ee.toHash=void 0;const t=Z(),e=_r();function r(y){const E={};for(const b of y)E[b]=!0;return E}ee.toHash=r;function n(y,E){return typeof E=="boolean"?E:Object.keys(E).length===0?!0:(a(y,E),!i(E,y.self.RULES.all))}ee.alwaysValidSchema=n;function a(y,E=y.schema){const{opts:b,self:O}=y;if(!b.strictSchema||typeof E=="boolean")return;const L=O.RULES.keywords;for(const G in E)L[G]||S(y,`unknown keyword: "${G}"`)}ee.checkUnknownRules=a;function i(y,E){if(typeof y=="boolean")return!y;for(const b in y)if(E[b])return!0;return!1}ee.schemaHasRules=i;function o(y,E){if(typeof y=="boolean")return!y;for(const b in y)if(b!=="$ref"&&E.all[b])return!0;return!1}ee.schemaHasRulesButRef=o;function c({topSchemaRef:y,schemaPath:E},b,O,L){if(!L){if(typeof b=="number"||typeof b=="boolean")return b;if(typeof b=="string")return(0,t._)`${b}`}return(0,t._)`${y}${E}${(0,t.getProperty)(O)}`}ee.schemaRefOrVal=c;function l(y){return f(decodeURIComponent(y))}ee.unescapeFragment=l;function u(y){return encodeURIComponent(s(y))}ee.escapeFragment=u;function s(y){return typeof y=="number"?`${y}`:y.replace(/~/g,"~0").replace(/\//g,"~1")}ee.escapeJsonPointer=s;function f(y){return y.replace(/~1/g,"/").replace(/~0/g,"~")}ee.unescapeJsonPointer=f;function h(y,E){if(Array.isArray(y))for(const b of y)E(b);else E(y)}ee.eachItem=h;function m({mergeNames:y,mergeToName:E,mergeValues:b,resultToName:O}){return(L,G,q,V)=>{const K=q===void 0?G:q instanceof t.Name?(G instanceof t.Name?y(L,G,q):E(L,G,q),q):G instanceof t.Name?(E(L,q,G),G):b(G,q);return V===t.Name&&!(K instanceof t.Name)?O(L,K):K}}ee.mergeEvaluated={props:m({mergeNames:(y,E,b)=>y.if((0,t._)`${b} !== true && ${E} !== undefined`,()=>{y.if((0,t._)`${E} === true`,()=>y.assign(b,!0),()=>y.assign(b,(0,t._)`${b} || {}`).code((0,t._)`Object.assign(${b}, ${E})`))}),mergeToName:(y,E,b)=>y.if((0,t._)`${b} !== true`,()=>{E===!0?y.assign(b,!0):(y.assign(b,(0,t._)`${b} || {}`),$(y,b,E))}),mergeValues:(y,E)=>y===!0?!0:{...y,...E},resultToName:_}),items:m({mergeNames:(y,E,b)=>y.if((0,t._)`${b} !== true && ${E} !== undefined`,()=>y.assign(b,(0,t._)`${E} === true ? true : ${b} > ${E} ? ${b} : ${E}`)),mergeToName:(y,E,b)=>y.if((0,t._)`${b} !== true`,()=>y.assign(b,E===!0?!0:(0,t._)`${b} > ${E} ? ${b} : ${E}`)),mergeValues:(y,E)=>y===!0?!0:Math.max(y,E),resultToName:(y,E)=>y.var("items",E)})};function _(y,E){if(E===!0)return y.var("props",!0);const b=y.var("props",(0,t._)`{}`);return E!==void 0&&$(y,b,E),b}ee.evaluatedPropsToName=_;function $(y,E,b){Object.keys(b).forEach(O=>y.assign((0,t._)`${E}${(0,t.getProperty)(O)}`,!0))}ee.setEvaluated=$;const p={};function v(y,E){return y.scopeValue("func",{ref:E,code:p[E.code]||(p[E.code]=new e._Code(E.code))})}ee.useFunc=v;var d;(function(y){y[y.Num=0]="Num",y[y.Str=1]="Str"})(d||(ee.Type=d={}));function g(y,E,b){if(y instanceof t.Name){const O=E===d.Num;return b?O?(0,t._)`"[" + ${y} + "]"`:(0,t._)`"['" + ${y} + "']"`:O?(0,t._)`"/" + ${y}`:(0,t._)`"/" + ${y}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return b?(0,t.getProperty)(y).toString():"/"+s(y)}ee.getErrorPath=g;function S(y,E,b=y.opts.strictSchema){if(b){if(E=`strict mode: ${E}`,b===!0)throw new Error(E);y.self.logger.warn(E)}}return ee.checkStrictMode=S,ee}var gt={},_s;function Ie(){if(_s)return gt;_s=1,Object.defineProperty(gt,"__esModule",{value:!0});const t=Z(),e={data:new t.Name("data"),valCxt:new t.Name("valCxt"),instancePath:new t.Name("instancePath"),parentData:new t.Name("parentData"),parentDataProperty:new t.Name("parentDataProperty"),rootData:new t.Name("rootData"),dynamicAnchors:new t.Name("dynamicAnchors"),vErrors:new t.Name("vErrors"),errors:new t.Name("errors"),this:new t.Name("this"),self:new t.Name("self"),scope:new t.Name("scope"),json:new t.Name("json"),jsonPos:new t.Name("jsonPos"),jsonLen:new t.Name("jsonLen"),jsonPart:new t.Name("jsonPart")};return gt.default=e,gt}var $s;function Er(){return $s||($s=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Z(),r=ne(),n=Ie();t.keywordError={message:({keyword:p})=>(0,e.str)`must pass "${p}" keyword validation`},t.keyword$DataError={message:({keyword:p,schemaType:v})=>v?(0,e.str)`"${p}" keyword must be ${v} ($data)`:(0,e.str)`"${p}" keyword is invalid ($data)`};function a(p,v=t.keywordError,d,g){const{it:S}=p,{gen:y,compositeRule:E,allErrors:b}=S,O=f(p,v,d);g??(E||b)?l(y,O):u(S,(0,e._)`[${O}]`)}t.reportError=a;function i(p,v=t.keywordError,d){const{it:g}=p,{gen:S,compositeRule:y,allErrors:E}=g,b=f(p,v,d);l(S,b),y||E||u(g,n.default.vErrors)}t.reportExtraError=i;function o(p,v){p.assign(n.default.errors,v),p.if((0,e._)`${n.default.vErrors} !== null`,()=>p.if(v,()=>p.assign((0,e._)`${n.default.vErrors}.length`,v),()=>p.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function c({gen:p,keyword:v,schemaValue:d,data:g,errsCount:S,it:y}){if(S===void 0)throw new Error("ajv implementation error");const E=p.name("err");p.forRange("i",S,n.default.errors,b=>{p.const(E,(0,e._)`${n.default.vErrors}[${b}]`),p.if((0,e._)`${E}.instancePath === undefined`,()=>p.assign((0,e._)`${E}.instancePath`,(0,e.strConcat)(n.default.instancePath,y.errorPath))),p.assign((0,e._)`${E}.schemaPath`,(0,e.str)`${y.errSchemaPath}/${v}`),y.opts.verbose&&(p.assign((0,e._)`${E}.schema`,d),p.assign((0,e._)`${E}.data`,g))})}t.extendErrors=c;function l(p,v){const d=p.const("err",v);p.if((0,e._)`${n.default.vErrors} === null`,()=>p.assign(n.default.vErrors,(0,e._)`[${d}]`),(0,e._)`${n.default.vErrors}.push(${d})`),p.code((0,e._)`${n.default.errors}++`)}function u(p,v){const{gen:d,validateName:g,schemaEnv:S}=p;S.$async?d.throw((0,e._)`new ${p.ValidationError}(${v})`):(d.assign((0,e._)`${g}.errors`,v),d.return(!1))}const s={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(p,v,d){const{createErrors:g}=p.it;return g===!1?(0,e._)`{}`:h(p,v,d)}function h(p,v,d={}){const{gen:g,it:S}=p,y=[m(S,d),_(p,d)];return $(p,v,y),g.object(...y)}function m({errorPath:p},{instancePath:v}){const d=v?(0,e.str)`${p}${(0,r.getErrorPath)(v,r.Type.Str)}`:p;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,d)]}function _({keyword:p,it:{errSchemaPath:v}},{schemaPath:d,parentSchema:g}){let S=g?v:(0,e.str)`${v}/${p}`;return d&&(S=(0,e.str)`${S}${(0,r.getErrorPath)(d,r.Type.Str)}`),[s.schemaPath,S]}function $(p,{params:v,message:d},g){const{keyword:S,data:y,schemaValue:E,it:b}=p,{opts:O,propertyName:L,topSchemaRef:G,schemaPath:q}=b;g.push([s.keyword,S],[s.params,typeof v=="function"?v(p):v||(0,e._)`{}`]),O.messages&&g.push([s.message,typeof d=="function"?d(p):d]),O.verbose&&g.push([s.schema,E],[s.parentSchema,(0,e._)`${G}${q}`],[n.default.data,y]),L&&g.push([s.propertyName,L])}})(Fr)),Fr}var ws;function Wo(){if(ws)return Ke;ws=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.boolOrEmptySchema=Ke.topBoolOrEmptySchema=void 0;const t=Er(),e=Z(),r=Ie(),n={message:"boolean schema is false"};function a(c){const{gen:l,schema:u,validateName:s}=c;u===!1?o(c,!1):typeof u=="object"&&u.$async===!0?l.return(r.default.data):(l.assign((0,e._)`${s}.errors`,null),l.return(!0))}Ke.topBoolOrEmptySchema=a;function i(c,l){const{gen:u,schema:s}=c;s===!1?(u.var(l,!1),o(c)):u.var(l,!0)}Ke.boolOrEmptySchema=i;function o(c,l){const{gen:u,data:s}=c,f={gen:u,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:c};(0,t.reportError)(f,n,void 0,l)}return Ke}var fe={},xe={},Es;function Ya(){if(Es)return xe;Es=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.getRules=xe.isJSONType=void 0;const t=["string","number","integer","boolean","null","object","array"],e=new Set(t);function r(a){return typeof a=="string"&&e.has(a)}xe.isJSONType=r;function n(){const a={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...a,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},a.number,a.string,a.array,a.object],post:{rules:[]},all:{},keywords:{}}}return xe.getRules=n,xe}var Ce={},Ss;function Za(){if(Ss)return Ce;Ss=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.shouldUseRule=Ce.shouldUseGroup=Ce.schemaHasRulesForType=void 0;function t({schema:n,self:a},i){const o=a.RULES.types[i];return o&&o!==!0&&e(n,o)}Ce.schemaHasRulesForType=t;function e(n,a){return a.rules.some(i=>r(n,i))}Ce.shouldUseGroup=e;function r(n,a){var i;return n[a.keyword]!==void 0||((i=a.definition.implements)===null||i===void 0?void 0:i.some(o=>n[o]!==void 0))}return Ce.shouldUseRule=r,Ce}var bs;function $r(){if(bs)return fe;bs=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.reportTypeError=fe.checkDataTypes=fe.checkDataType=fe.coerceAndCheckDataType=fe.getJSONTypes=fe.getSchemaTypes=fe.DataType=void 0;const t=Ya(),e=Za(),r=Er(),n=Z(),a=ne();var i;(function(d){d[d.Correct=0]="Correct",d[d.Wrong=1]="Wrong"})(i||(fe.DataType=i={}));function o(d){const g=c(d.type);if(g.includes("null")){if(d.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!g.length&&d.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');d.nullable===!0&&g.push("null")}return g}fe.getSchemaTypes=o;function c(d){const g=Array.isArray(d)?d:d?[d]:[];if(g.every(t.isJSONType))return g;throw new Error("type must be JSONType or JSONType[]: "+g.join(","))}fe.getJSONTypes=c;function l(d,g){const{gen:S,data:y,opts:E}=d,b=s(g,E.coerceTypes),O=g.length>0&&!(b.length===0&&g.length===1&&(0,e.schemaHasRulesForType)(d,g[0]));if(O){const L=_(g,y,E.strictNumbers,i.Wrong);S.if(L,()=>{b.length?f(d,g,b):p(d)})}return O}fe.coerceAndCheckDataType=l;const u=new Set(["string","number","integer","boolean","null"]);function s(d,g){return g?d.filter(S=>u.has(S)||g==="array"&&S==="array"):[]}function f(d,g,S){const{gen:y,data:E,opts:b}=d,O=y.let("dataType",(0,n._)`typeof ${E}`),L=y.let("coerced",(0,n._)`undefined`);b.coerceTypes==="array"&&y.if((0,n._)`${O} == 'object' && Array.isArray(${E}) && ${E}.length == 1`,()=>y.assign(E,(0,n._)`${E}[0]`).assign(O,(0,n._)`typeof ${E}`).if(_(g,E,b.strictNumbers),()=>y.assign(L,E))),y.if((0,n._)`${L} !== undefined`);for(const q of S)(u.has(q)||q==="array"&&b.coerceTypes==="array")&&G(q);y.else(),p(d),y.endIf(),y.if((0,n._)`${L} !== undefined`,()=>{y.assign(E,L),h(d,L)});function G(q){switch(q){case"string":y.elseIf((0,n._)`${O} == "number" || ${O} == "boolean"`).assign(L,(0,n._)`"" + ${E}`).elseIf((0,n._)`${E} === null`).assign(L,(0,n._)`""`);return;case"number":y.elseIf((0,n._)`${O} == "boolean" || ${E} === null
              || (${O} == "string" && ${E} && ${E} == +${E})`).assign(L,(0,n._)`+${E}`);return;case"integer":y.elseIf((0,n._)`${O} === "boolean" || ${E} === null
              || (${O} === "string" && ${E} && ${E} == +${E} && !(${E} % 1))`).assign(L,(0,n._)`+${E}`);return;case"boolean":y.elseIf((0,n._)`${E} === "false" || ${E} === 0 || ${E} === null`).assign(L,!1).elseIf((0,n._)`${E} === "true" || ${E} === 1`).assign(L,!0);return;case"null":y.elseIf((0,n._)`${E} === "" || ${E} === 0 || ${E} === false`),y.assign(L,null);return;case"array":y.elseIf((0,n._)`${O} === "string" || ${O} === "number"
              || ${O} === "boolean" || ${E} === null`).assign(L,(0,n._)`[${E}]`)}}}function h({gen:d,parentData:g,parentDataProperty:S},y){d.if((0,n._)`${g} !== undefined`,()=>d.assign((0,n._)`${g}[${S}]`,y))}function m(d,g,S,y=i.Correct){const E=y===i.Correct?n.operators.EQ:n.operators.NEQ;let b;switch(d){case"null":return(0,n._)`${g} ${E} null`;case"array":b=(0,n._)`Array.isArray(${g})`;break;case"object":b=(0,n._)`${g} && typeof ${g} == "object" && !Array.isArray(${g})`;break;case"integer":b=O((0,n._)`!(${g} % 1) && !isNaN(${g})`);break;case"number":b=O();break;default:return(0,n._)`typeof ${g} ${E} ${d}`}return y===i.Correct?b:(0,n.not)(b);function O(L=n.nil){return(0,n.and)((0,n._)`typeof ${g} == "number"`,L,S?(0,n._)`isFinite(${g})`:n.nil)}}fe.checkDataType=m;function _(d,g,S,y){if(d.length===1)return m(d[0],g,S,y);let E;const b=(0,a.toHash)(d);if(b.array&&b.object){const O=(0,n._)`typeof ${g} != "object"`;E=b.null?O:(0,n._)`!${g} || ${O}`,delete b.null,delete b.array,delete b.object}else E=n.nil;b.number&&delete b.integer;for(const O in b)E=(0,n.and)(E,m(O,g,S,y));return E}fe.checkDataTypes=_;const $={message:({schema:d})=>`must be ${d}`,params:({schema:d,schemaValue:g})=>typeof d=="string"?(0,n._)`{type: ${d}}`:(0,n._)`{type: ${g}}`};function p(d){const g=v(d);(0,r.reportError)(g,$)}fe.reportTypeError=p;function v(d){const{gen:g,data:S,schema:y}=d,E=(0,a.schemaRefOrVal)(d,y,"type");return{gen:g,keyword:"type",data:S,schema:y.type,schemaCode:E,schemaValue:E,parentSchema:y,params:{},it:d}}return fe}var ot={},Rs;function Jo(){if(Rs)return ot;Rs=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.assignDefaults=void 0;const t=Z(),e=ne();function r(a,i){const{properties:o,items:c}=a.schema;if(i==="object"&&o)for(const l in o)n(a,l,o[l].default);else i==="array"&&Array.isArray(c)&&c.forEach((l,u)=>n(a,u,l.default))}ot.assignDefaults=r;function n(a,i,o){const{gen:c,compositeRule:l,data:u,opts:s}=a;if(o===void 0)return;const f=(0,t._)`${u}${(0,t.getProperty)(i)}`;if(l){(0,e.checkStrictMode)(a,`default is ignored for: ${f}`);return}let h=(0,t._)`${f} === undefined`;s.useDefaults==="empty"&&(h=(0,t._)`${h} || ${f} === null || ${f} === ""`),c.if(h,(0,t._)`${f} = ${(0,t.stringify)(o)}`)}return ot}var Re={},ae={},Ps;function Ne(){if(Ps)return ae;Ps=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.validateUnion=ae.validateArray=ae.usePattern=ae.callValidateCode=ae.schemaProperties=ae.allSchemaProperties=ae.noPropertyInData=ae.propertyInData=ae.isOwnProperty=ae.hasPropFunc=ae.reportMissingProp=ae.checkMissingProp=ae.checkReportMissingProp=void 0;const t=Z(),e=ne(),r=Ie(),n=ne();function a(d,g){const{gen:S,data:y,it:E}=d;S.if(s(S,y,g,E.opts.ownProperties),()=>{d.setParams({missingProperty:(0,t._)`${g}`},!0),d.error()})}ae.checkReportMissingProp=a;function i({gen:d,data:g,it:{opts:S}},y,E){return(0,t.or)(...y.map(b=>(0,t.and)(s(d,g,b,S.ownProperties),(0,t._)`${E} = ${b}`)))}ae.checkMissingProp=i;function o(d,g){d.setParams({missingProperty:g},!0),d.error()}ae.reportMissingProp=o;function c(d){return d.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}ae.hasPropFunc=c;function l(d,g,S){return(0,t._)`${c(d)}.call(${g}, ${S})`}ae.isOwnProperty=l;function u(d,g,S,y){const E=(0,t._)`${g}${(0,t.getProperty)(S)} !== undefined`;return y?(0,t._)`${E} && ${l(d,g,S)}`:E}ae.propertyInData=u;function s(d,g,S,y){const E=(0,t._)`${g}${(0,t.getProperty)(S)} === undefined`;return y?(0,t.or)(E,(0,t.not)(l(d,g,S))):E}ae.noPropertyInData=s;function f(d){return d?Object.keys(d).filter(g=>g!=="__proto__"):[]}ae.allSchemaProperties=f;function h(d,g){return f(g).filter(S=>!(0,e.alwaysValidSchema)(d,g[S]))}ae.schemaProperties=h;function m({schemaCode:d,data:g,it:{gen:S,topSchemaRef:y,schemaPath:E,errorPath:b},it:O},L,G,q){const V=q?(0,t._)`${d}, ${g}, ${y}${E}`:g,K=[[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)],[r.default.parentData,O.parentData],[r.default.parentDataProperty,O.parentDataProperty],[r.default.rootData,r.default.rootData]];O.opts.dynamicRef&&K.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const j=(0,t._)`${V}, ${S.object(...K)}`;return G!==t.nil?(0,t._)`${L}.call(${G}, ${j})`:(0,t._)`${L}(${j})`}ae.callValidateCode=m;const _=(0,t._)`new RegExp`;function $({gen:d,it:{opts:g}},S){const y=g.unicodeRegExp?"u":"",{regExp:E}=g.code,b=E(S,y);return d.scopeValue("pattern",{key:b.toString(),ref:b,code:(0,t._)`${E.code==="new RegExp"?_:(0,n.useFunc)(d,E)}(${S}, ${y})`})}ae.usePattern=$;function p(d){const{gen:g,data:S,keyword:y,it:E}=d,b=g.name("valid");if(E.allErrors){const L=g.let("valid",!0);return O(()=>g.assign(L,!1)),L}return g.var(b,!0),O(()=>g.break()),b;function O(L){const G=g.const("len",(0,t._)`${S}.length`);g.forRange("i",0,G,q=>{d.subschema({keyword:y,dataProp:q,dataPropType:e.Type.Num},b),g.if((0,t.not)(b),L)})}}ae.validateArray=p;function v(d){const{gen:g,schema:S,keyword:y,it:E}=d;if(!Array.isArray(S))throw new Error("ajv implementation error");if(S.some(G=>(0,e.alwaysValidSchema)(E,G))&&!E.opts.unevaluated)return;const O=g.let("valid",!1),L=g.name("_valid");g.block(()=>S.forEach((G,q)=>{const V=d.subschema({keyword:y,schemaProp:q,compositeRule:!0},L);g.assign(O,(0,t._)`${O} || ${L}`),d.mergeValidEvaluated(V,L)||g.if((0,t.not)(O))})),d.result(O,()=>d.reset(),()=>d.error(!0))}return ae.validateUnion=v,ae}var Is;function Yo(){if(Is)return Re;Is=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.validateKeywordUsage=Re.validSchemaType=Re.funcKeywordCode=Re.macroKeywordCode=void 0;const t=Z(),e=Ie(),r=Ne(),n=Er();function a(h,m){const{gen:_,keyword:$,schema:p,parentSchema:v,it:d}=h,g=m.macro.call(d.self,p,v,d),S=u(_,$,g);d.opts.validateSchema!==!1&&d.self.validateSchema(g,!0);const y=_.name("valid");h.subschema({schema:g,schemaPath:t.nil,errSchemaPath:`${d.errSchemaPath}/${$}`,topSchemaRef:S,compositeRule:!0},y),h.pass(y,()=>h.error(!0))}Re.macroKeywordCode=a;function i(h,m){var _;const{gen:$,keyword:p,schema:v,parentSchema:d,$data:g,it:S}=h;l(S,m);const y=!g&&m.compile?m.compile.call(S.self,v,d,S):m.validate,E=u($,p,y),b=$.let("valid");h.block$data(b,O),h.ok((_=m.valid)!==null&&_!==void 0?_:b);function O(){if(m.errors===!1)q(),m.modifying&&o(h),V(()=>h.error());else{const K=m.async?L():G();m.modifying&&o(h),V(()=>c(h,K))}}function L(){const K=$.let("ruleErrs",null);return $.try(()=>q((0,t._)`await `),j=>$.assign(b,!1).if((0,t._)`${j} instanceof ${S.ValidationError}`,()=>$.assign(K,(0,t._)`${j}.errors`),()=>$.throw(j))),K}function G(){const K=(0,t._)`${E}.errors`;return $.assign(K,null),q(t.nil),K}function q(K=m.async?(0,t._)`await `:t.nil){const j=S.opts.passContext?e.default.this:e.default.self,M=!("compile"in m&&!g||m.schema===!1);$.assign(b,(0,t._)`${K}${(0,r.callValidateCode)(h,E,j,M)}`,m.modifying)}function V(K){var j;$.if((0,t.not)((j=m.valid)!==null&&j!==void 0?j:b),K)}}Re.funcKeywordCode=i;function o(h){const{gen:m,data:_,it:$}=h;m.if($.parentData,()=>m.assign(_,(0,t._)`${$.parentData}[${$.parentDataProperty}]`))}function c(h,m){const{gen:_}=h;_.if((0,t._)`Array.isArray(${m})`,()=>{_.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${m} : ${e.default.vErrors}.concat(${m})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(h)},()=>h.error())}function l({schemaEnv:h},m){if(m.async&&!h.$async)throw new Error("async keyword in sync schema")}function u(h,m,_){if(_===void 0)throw new Error(`keyword "${m}" failed to compile`);return h.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,t.stringify)(_)})}function s(h,m,_=!1){return!m.length||m.some($=>$==="array"?Array.isArray(h):$==="object"?h&&typeof h=="object"&&!Array.isArray(h):typeof h==$||_&&typeof h>"u")}Re.validSchemaType=s;function f({schema:h,opts:m,self:_,errSchemaPath:$},p,v){if(Array.isArray(p.keyword)?!p.keyword.includes(v):p.keyword!==v)throw new Error("ajv implementation error");const d=p.dependencies;if(d?.some(g=>!Object.prototype.hasOwnProperty.call(h,g)))throw new Error(`parent schema must have dependencies of ${v}: ${d.join(",")}`);if(p.validateSchema&&!p.validateSchema(h[v])){const S=`keyword "${v}" value is invalid at path "${$}": `+_.errorsText(p.validateSchema.errors);if(m.validateSchema==="log")_.logger.error(S);else throw new Error(S)}}return Re.validateKeywordUsage=f,Re}var qe={},Ns;function Zo(){if(Ns)return qe;Ns=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.extendSubschemaMode=qe.extendSubschemaData=qe.getSubschema=void 0;const t=Z(),e=ne();function r(i,{keyword:o,schemaProp:c,schema:l,schemaPath:u,errSchemaPath:s,topSchemaRef:f}){if(o!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const h=i.schema[o];return c===void 0?{schema:h,schemaPath:(0,t._)`${i.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${i.errSchemaPath}/${o}`}:{schema:h[c],schemaPath:(0,t._)`${i.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(c)}`,errSchemaPath:`${i.errSchemaPath}/${o}/${(0,e.escapeFragment)(c)}`}}if(l!==void 0){if(u===void 0||s===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:u,topSchemaRef:f,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}qe.getSubschema=r;function n(i,o,{dataProp:c,dataPropType:l,data:u,dataTypes:s,propertyName:f}){if(u!==void 0&&c!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:h}=o;if(c!==void 0){const{errorPath:_,dataPathArr:$,opts:p}=o,v=h.let("data",(0,t._)`${o.data}${(0,t.getProperty)(c)}`,!0);m(v),i.errorPath=(0,t.str)`${_}${(0,e.getErrorPath)(c,l,p.jsPropertySyntax)}`,i.parentDataProperty=(0,t._)`${c}`,i.dataPathArr=[...$,i.parentDataProperty]}if(u!==void 0){const _=u instanceof t.Name?u:h.let("data",u,!0);m(_),f!==void 0&&(i.propertyName=f)}s&&(i.dataTypes=s);function m(_){i.data=_,i.dataLevel=o.dataLevel+1,i.dataTypes=[],o.definedProperties=new Set,i.parentData=o.data,i.dataNames=[...o.dataNames,_]}}qe.extendSubschemaData=n;function a(i,{jtdDiscriminator:o,jtdMetadata:c,compositeRule:l,createErrors:u,allErrors:s}){l!==void 0&&(i.compositeRule=l),u!==void 0&&(i.createErrors=u),s!==void 0&&(i.allErrors=s),i.jtdDiscriminator=o,i.jtdMetadata=c}return qe.extendSubschemaMode=a,qe}var ye={},Gr,Os;function Qa(){return Os||(Os=1,Gr=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!==0;){var o=i[a];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}),Gr}var Kr={exports:{}},Ts;function Qo(){if(Ts)return Kr.exports;Ts=1;var t=Kr.exports=function(n,a,i){typeof a=="function"&&(i=a,a={}),i=a.cb||i;var o=typeof i=="function"?i:i.pre||function(){},c=i.post||function(){};e(a,o,c,n,"",n)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(n,a,i,o,c,l,u,s,f,h){if(o&&typeof o=="object"&&!Array.isArray(o)){a(o,c,l,u,s,f,h);for(var m in o){var _=o[m];if(Array.isArray(_)){if(m in t.arrayKeywords)for(var $=0;$<_.length;$++)e(n,a,i,_[$],c+"/"+m+"/"+$,l,c,m,o,$)}else if(m in t.propsKeywords){if(_&&typeof _=="object")for(var p in _)e(n,a,i,_[p],c+"/"+m+"/"+r(p),l,c,m,o,p)}else(m in t.keywords||n.allKeys&&!(m in t.skipKeywords))&&e(n,a,i,_,c+"/"+m,l,c,m,o)}i(o,c,l,u,s,f,h)}}function r(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}return Kr.exports}var As;function Sr(){if(As)return ye;As=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.getSchemaRefs=ye.resolveUrl=ye.normalizeId=ye._getFullPath=ye.getFullPath=ye.inlineRef=void 0;const t=ne(),e=Qa(),r=Qo(),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function a($,p=!0){return typeof $=="boolean"?!0:p===!0?!o($):p?c($)<=p:!1}ye.inlineRef=a;const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o($){for(const p in $){if(i.has(p))return!0;const v=$[p];if(Array.isArray(v)&&v.some(o)||typeof v=="object"&&o(v))return!0}return!1}function c($){let p=0;for(const v in $){if(v==="$ref")return 1/0;if(p++,!n.has(v)&&(typeof $[v]=="object"&&(0,t.eachItem)($[v],d=>p+=c(d)),p===1/0))return 1/0}return p}function l($,p="",v){v!==!1&&(p=f(p));const d=$.parse(p);return u($,d)}ye.getFullPath=l;function u($,p){return $.serialize(p).split("#")[0]+"#"}ye._getFullPath=u;const s=/#\/?$/;function f($){return $?$.replace(s,""):""}ye.normalizeId=f;function h($,p,v){return v=f(v),$.resolve(p,v)}ye.resolveUrl=h;const m=/^[a-z_][-a-z0-9._]*$/i;function _($,p){if(typeof $=="boolean")return{};const{schemaId:v,uriResolver:d}=this.opts,g=f($[v]||p),S={"":g},y=l(d,g,!1),E={},b=new Set;return r($,{allKeys:!0},(G,q,V,K)=>{if(K===void 0)return;const j=y+q;let M=S[K];typeof G[v]=="string"&&(M=B.call(this,G[v])),x.call(this,G.$anchor),x.call(this,G.$dynamicAnchor),S[q]=M;function B(U){const H=this.opts.uriResolver.resolve;if(U=f(M?H(M,U):U),b.has(U))throw L(U);b.add(U);let k=this.refs[U];return typeof k=="string"&&(k=this.refs[k]),typeof k=="object"?O(G,k.schema,U):U!==f(j)&&(U[0]==="#"?(O(G,E[U],U),E[U]=G):this.refs[U]=j),U}function x(U){if(typeof U=="string"){if(!m.test(U))throw new Error(`invalid anchor "${U}"`);B.call(this,`#${U}`)}}}),E;function O(G,q,V){if(q!==void 0&&!e(G,q))throw L(V)}function L(G){return new Error(`reference "${G}" resolves to more than one schema`)}}return ye.getSchemaRefs=_,ye}var js;function lt(){if(js)return ke;js=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.getData=ke.KeywordCxt=ke.validateFunctionCode=void 0;const t=Wo(),e=$r(),r=Za(),n=$r(),a=Jo(),i=Yo(),o=Zo(),c=Z(),l=Ie(),u=Sr(),s=ne(),f=Er();function h(N){if(y(N)&&(b(N),S(N))){p(N);return}m(N,()=>(0,t.topBoolOrEmptySchema)(N))}ke.validateFunctionCode=h;function m({gen:N,validateName:T,schema:D,schemaEnv:F,opts:W},te){W.code.es5?N.func(T,(0,c._)`${l.default.data}, ${l.default.valCxt}`,F.$async,()=>{N.code((0,c._)`"use strict"; ${d(D,W)}`),$(N,W),N.code(te)}):N.func(T,(0,c._)`${l.default.data}, ${_(W)}`,F.$async,()=>N.code(d(D,W)).code(te))}function _(N){return(0,c._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${N.dynamicRef?(0,c._)`, ${l.default.dynamicAnchors}={}`:c.nil}}={}`}function $(N,T){N.if(l.default.valCxt,()=>{N.var(l.default.instancePath,(0,c._)`${l.default.valCxt}.${l.default.instancePath}`),N.var(l.default.parentData,(0,c._)`${l.default.valCxt}.${l.default.parentData}`),N.var(l.default.parentDataProperty,(0,c._)`${l.default.valCxt}.${l.default.parentDataProperty}`),N.var(l.default.rootData,(0,c._)`${l.default.valCxt}.${l.default.rootData}`),T.dynamicRef&&N.var(l.default.dynamicAnchors,(0,c._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{N.var(l.default.instancePath,(0,c._)`""`),N.var(l.default.parentData,(0,c._)`undefined`),N.var(l.default.parentDataProperty,(0,c._)`undefined`),N.var(l.default.rootData,l.default.data),T.dynamicRef&&N.var(l.default.dynamicAnchors,(0,c._)`{}`)})}function p(N){const{schema:T,opts:D,gen:F}=N;m(N,()=>{D.$comment&&T.$comment&&K(N),G(N),F.let(l.default.vErrors,null),F.let(l.default.errors,0),D.unevaluated&&v(N),O(N),j(N)})}function v(N){const{gen:T,validateName:D}=N;N.evaluated=T.const("evaluated",(0,c._)`${D}.evaluated`),T.if((0,c._)`${N.evaluated}.dynamicProps`,()=>T.assign((0,c._)`${N.evaluated}.props`,(0,c._)`undefined`)),T.if((0,c._)`${N.evaluated}.dynamicItems`,()=>T.assign((0,c._)`${N.evaluated}.items`,(0,c._)`undefined`))}function d(N,T){const D=typeof N=="object"&&N[T.schemaId];return D&&(T.code.source||T.code.process)?(0,c._)`/*# sourceURL=${D} */`:c.nil}function g(N,T){if(y(N)&&(b(N),S(N))){E(N,T);return}(0,t.boolOrEmptySchema)(N,T)}function S({schema:N,self:T}){if(typeof N=="boolean")return!N;for(const D in N)if(T.RULES.all[D])return!0;return!1}function y(N){return typeof N.schema!="boolean"}function E(N,T){const{schema:D,gen:F,opts:W}=N;W.$comment&&D.$comment&&K(N),q(N),V(N);const te=F.const("_errs",l.default.errors);O(N,te),F.var(T,(0,c._)`${te} === ${l.default.errors}`)}function b(N){(0,s.checkUnknownRules)(N),L(N)}function O(N,T){if(N.opts.jtd)return B(N,[],!1,T);const D=(0,e.getSchemaTypes)(N.schema),F=(0,e.coerceAndCheckDataType)(N,D);B(N,D,!F,T)}function L(N){const{schema:T,errSchemaPath:D,opts:F,self:W}=N;T.$ref&&F.ignoreKeywordsWithRef&&(0,s.schemaHasRulesButRef)(T,W.RULES)&&W.logger.warn(`$ref: keywords ignored in schema at path "${D}"`)}function G(N){const{schema:T,opts:D}=N;T.default!==void 0&&D.useDefaults&&D.strictSchema&&(0,s.checkStrictMode)(N,"default is ignored in the schema root")}function q(N){const T=N.schema[N.opts.schemaId];T&&(N.baseId=(0,u.resolveUrl)(N.opts.uriResolver,N.baseId,T))}function V(N){if(N.schema.$async&&!N.schemaEnv.$async)throw new Error("async schema in sync schema")}function K({gen:N,schemaEnv:T,schema:D,errSchemaPath:F,opts:W}){const te=D.$comment;if(W.$comment===!0)N.code((0,c._)`${l.default.self}.logger.log(${te})`);else if(typeof W.$comment=="function"){const le=(0,c.str)`${F}/$comment`,be=N.scopeValue("root",{ref:T.root});N.code((0,c._)`${l.default.self}.opts.$comment(${te}, ${le}, ${be}.schema)`)}}function j(N){const{gen:T,schemaEnv:D,validateName:F,ValidationError:W,opts:te}=N;D.$async?T.if((0,c._)`${l.default.errors} === 0`,()=>T.return(l.default.data),()=>T.throw((0,c._)`new ${W}(${l.default.vErrors})`)):(T.assign((0,c._)`${F}.errors`,l.default.vErrors),te.unevaluated&&M(N),T.return((0,c._)`${l.default.errors} === 0`))}function M({gen:N,evaluated:T,props:D,items:F}){D instanceof c.Name&&N.assign((0,c._)`${T}.props`,D),F instanceof c.Name&&N.assign((0,c._)`${T}.items`,F)}function B(N,T,D,F){const{gen:W,schema:te,data:le,allErrors:be,opts:ve,self:_e}=N,{RULES:de}=_e;if(te.$ref&&(ve.ignoreKeywordsWithRef||!(0,s.schemaHasRulesButRef)(te,de))){W.block(()=>X(N,"$ref",de.all.$ref.definition));return}ve.jtd||U(N,T),W.block(()=>{for(const Ee of de.rules)Je(Ee);Je(de.post)});function Je(Ee){(0,r.shouldUseGroup)(te,Ee)&&(Ee.type?(W.if((0,n.checkDataType)(Ee.type,le,ve.strictNumbers)),x(N,Ee),T.length===1&&T[0]===Ee.type&&D&&(W.else(),(0,n.reportTypeError)(N)),W.endIf()):x(N,Ee),be||W.if((0,c._)`${l.default.errors} === ${F||0}`))}}function x(N,T){const{gen:D,schema:F,opts:{useDefaults:W}}=N;W&&(0,a.assignDefaults)(N,T.type),D.block(()=>{for(const te of T.rules)(0,r.shouldUseRule)(F,te)&&X(N,te.keyword,te.definition,T.type)})}function U(N,T){N.schemaEnv.meta||!N.opts.strictTypes||(H(N,T),N.opts.allowUnionTypes||k(N,T),P(N,N.dataTypes))}function H(N,T){if(T.length){if(!N.dataTypes.length){N.dataTypes=T;return}T.forEach(D=>{I(N.dataTypes,D)||R(N,`type "${D}" not allowed by context "${N.dataTypes.join(",")}"`)}),w(N,T)}}function k(N,T){T.length>1&&!(T.length===2&&T.includes("null"))&&R(N,"use allowUnionTypes to allow union type keyword")}function P(N,T){const D=N.self.RULES.all;for(const F in D){const W=D[F];if(typeof W=="object"&&(0,r.shouldUseRule)(N.schema,W)){const{type:te}=W.definition;te.length&&!te.some(le=>A(T,le))&&R(N,`missing type "${te.join(",")}" for keyword "${F}"`)}}}function A(N,T){return N.includes(T)||T==="number"&&N.includes("integer")}function I(N,T){return N.includes(T)||T==="integer"&&N.includes("number")}function w(N,T){const D=[];for(const F of N.dataTypes)I(T,F)?D.push(F):T.includes("integer")&&F==="number"&&D.push("integer");N.dataTypes=D}function R(N,T){const D=N.schemaEnv.baseId+N.errSchemaPath;T+=` at "${D}" (strictTypes)`,(0,s.checkStrictMode)(N,T,N.opts.strictTypes)}class C{constructor(T,D,F){if((0,i.validateKeywordUsage)(T,D,F),this.gen=T.gen,this.allErrors=T.allErrors,this.keyword=F,this.data=T.data,this.schema=T.schema[F],this.$data=D.$data&&T.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,s.schemaRefOrVal)(T,this.schema,F,this.$data),this.schemaType=D.schemaType,this.parentSchema=T.schema,this.params={},this.it=T,this.def=D,this.$data)this.schemaCode=T.gen.const("vSchema",se(this.$data,T));else if(this.schemaCode=this.schemaValue,!(0,i.validSchemaType)(this.schema,D.schemaType,D.allowUndefined))throw new Error(`${F} value must be ${JSON.stringify(D.schemaType)}`);("code"in D?D.trackErrors:D.errors!==!1)&&(this.errsCount=T.gen.const("_errs",l.default.errors))}result(T,D,F){this.failResult((0,c.not)(T),D,F)}failResult(T,D,F){this.gen.if(T),F?F():this.error(),D?(this.gen.else(),D(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(T,D){this.failResult((0,c.not)(T),void 0,D)}fail(T){if(T===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(T),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(T){if(!this.$data)return this.fail(T);const{schemaCode:D}=this;this.fail((0,c._)`${D} !== undefined && (${(0,c.or)(this.invalid$data(),T)})`)}error(T,D,F){if(D){this.setParams(D),this._error(T,F),this.setParams({});return}this._error(T,F)}_error(T,D){(T?f.reportExtraError:f.reportError)(this,this.def.error,D)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(T){this.allErrors||this.gen.if(T)}setParams(T,D){D?Object.assign(this.params,T):this.params=T}block$data(T,D,F=c.nil){this.gen.block(()=>{this.check$data(T,F),D()})}check$data(T=c.nil,D=c.nil){if(!this.$data)return;const{gen:F,schemaCode:W,schemaType:te,def:le}=this;F.if((0,c.or)((0,c._)`${W} === undefined`,D)),T!==c.nil&&F.assign(T,!0),(te.length||le.validateSchema)&&(F.elseIf(this.invalid$data()),this.$dataError(),T!==c.nil&&F.assign(T,!1)),F.else()}invalid$data(){const{gen:T,schemaCode:D,schemaType:F,def:W,it:te}=this;return(0,c.or)(le(),be());function le(){if(F.length){if(!(D instanceof c.Name))throw new Error("ajv implementation error");const ve=Array.isArray(F)?F:[F];return(0,c._)`${(0,n.checkDataTypes)(ve,D,te.opts.strictNumbers,n.DataType.Wrong)}`}return c.nil}function be(){if(W.validateSchema){const ve=T.scopeValue("validate$data",{ref:W.validateSchema});return(0,c._)`!${ve}(${D})`}return c.nil}}subschema(T,D){const F=(0,o.getSubschema)(this.it,T);(0,o.extendSubschemaData)(F,this.it,T),(0,o.extendSubschemaMode)(F,T);const W={...this.it,...F,items:void 0,props:void 0};return g(W,D),W}mergeEvaluated(T,D){const{it:F,gen:W}=this;F.opts.unevaluated&&(F.props!==!0&&T.props!==void 0&&(F.props=s.mergeEvaluated.props(W,T.props,F.props,D)),F.items!==!0&&T.items!==void 0&&(F.items=s.mergeEvaluated.items(W,T.items,F.items,D)))}mergeValidEvaluated(T,D){const{it:F,gen:W}=this;if(F.opts.unevaluated&&(F.props!==!0||F.items!==!0))return W.if(D,()=>this.mergeEvaluated(T,c.Name)),!0}}ke.KeywordCxt=C;function X(N,T,D,F){const W=new C(N,D,T);"code"in D?D.code(W,F):W.$data&&D.validate?(0,i.funcKeywordCode)(W,D):"macro"in D?(0,i.macroKeywordCode)(W,D):(D.compile||D.validate)&&(0,i.funcKeywordCode)(W,D)}const J=/^\/(?:[^~]|~0|~1)*$/,ie=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function se(N,{dataLevel:T,dataNames:D,dataPathArr:F}){let W,te;if(N==="")return l.default.rootData;if(N[0]==="/"){if(!J.test(N))throw new Error(`Invalid JSON-pointer: ${N}`);W=N,te=l.default.rootData}else{const _e=ie.exec(N);if(!_e)throw new Error(`Invalid JSON-pointer: ${N}`);const de=+_e[1];if(W=_e[2],W==="#"){if(de>=T)throw new Error(ve("property/index",de));return F[T-de]}if(de>T)throw new Error(ve("data",de));if(te=D[T-de],!W)return te}let le=te;const be=W.split("/");for(const _e of be)_e&&(te=(0,c._)`${te}${(0,c.getProperty)((0,s.unescapeJsonPointer)(_e))}`,le=(0,c._)`${le} && ${te}`);return le;function ve(_e,de){return`Cannot access ${_e} ${de} levels up, current level is ${T}`}}return ke.getData=se,ke}var vt={},ks;function br(){if(ks)return vt;ks=1,Object.defineProperty(vt,"__esModule",{value:!0});class t extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return vt.default=t,vt}var _t={},Cs;function dt(){if(Cs)return _t;Cs=1,Object.defineProperty(_t,"__esModule",{value:!0});const t=Sr();class e extends Error{constructor(n,a,i,o){super(o||`can't resolve reference ${i} from id ${a}`),this.missingRef=(0,t.resolveUrl)(n,a,i),this.missingSchema=(0,t.normalizeId)((0,t.getFullPath)(n,this.missingRef))}}return _t.default=e,_t}var we={},qs;function Rr(){if(qs)return we;qs=1,Object.defineProperty(we,"__esModule",{value:!0}),we.resolveSchema=we.getCompilingSchema=we.resolveRef=we.compileSchema=we.SchemaEnv=void 0;const t=Z(),e=br(),r=Ie(),n=Sr(),a=ne(),i=lt();class o{constructor(v){var d;this.refs={},this.dynamicAnchors={};let g;typeof v.schema=="object"&&(g=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(d=v.baseId)!==null&&d!==void 0?d:(0,n.normalizeId)(g?.[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=g?.$async,this.refs={}}}we.SchemaEnv=o;function c(p){const v=s.call(this,p);if(v)return v;const d=(0,n.getFullPath)(this.opts.uriResolver,p.root.baseId),{es5:g,lines:S}=this.opts.code,{ownProperties:y}=this.opts,E=new t.CodeGen(this.scope,{es5:g,lines:S,ownProperties:y});let b;p.$async&&(b=E.scopeValue("Error",{ref:e.default,code:(0,t._)`require("ajv/dist/runtime/validation_error").default`}));const O=E.scopeName("validate");p.validateName=O;const L={gen:E,allErrors:this.opts.allErrors,data:r.default.data,parentData:r.default.parentData,parentDataProperty:r.default.parentDataProperty,dataNames:[r.default.data],dataPathArr:[t.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:E.scopeValue("schema",this.opts.code.source===!0?{ref:p.schema,code:(0,t.stringify)(p.schema)}:{ref:p.schema}),validateName:O,ValidationError:b,schema:p.schema,schemaEnv:p,rootId:d,baseId:p.baseId||d,schemaPath:t.nil,errSchemaPath:p.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,t._)`""`,opts:this.opts,self:this};let G;try{this._compilations.add(p),(0,i.validateFunctionCode)(L),E.optimize(this.opts.code.optimize);const q=E.toString();G=`${E.scopeRefs(r.default.scope)}return ${q}`,this.opts.code.process&&(G=this.opts.code.process(G,p));const K=new Function(`${r.default.self}`,`${r.default.scope}`,G)(this,this.scope.get());if(this.scope.value(O,{ref:K}),K.errors=null,K.schema=p.schema,K.schemaEnv=p,p.$async&&(K.$async=!0),this.opts.code.source===!0&&(K.source={validateName:O,validateCode:q,scopeValues:E._values}),this.opts.unevaluated){const{props:j,items:M}=L;K.evaluated={props:j instanceof t.Name?void 0:j,items:M instanceof t.Name?void 0:M,dynamicProps:j instanceof t.Name,dynamicItems:M instanceof t.Name},K.source&&(K.source.evaluated=(0,t.stringify)(K.evaluated))}return p.validate=K,p}catch(q){throw delete p.validate,delete p.validateName,G&&this.logger.error("Error compiling schema, function code:",G),q}finally{this._compilations.delete(p)}}we.compileSchema=c;function l(p,v,d){var g;d=(0,n.resolveUrl)(this.opts.uriResolver,v,d);const S=p.refs[d];if(S)return S;let y=h.call(this,p,d);if(y===void 0){const E=(g=p.localRefs)===null||g===void 0?void 0:g[d],{schemaId:b}=this.opts;E&&(y=new o({schema:E,schemaId:b,root:p,baseId:v}))}if(y!==void 0)return p.refs[d]=u.call(this,y)}we.resolveRef=l;function u(p){return(0,n.inlineRef)(p.schema,this.opts.inlineRefs)?p.schema:p.validate?p:c.call(this,p)}function s(p){for(const v of this._compilations)if(f(v,p))return v}we.getCompilingSchema=s;function f(p,v){return p.schema===v.schema&&p.root===v.root&&p.baseId===v.baseId}function h(p,v){let d;for(;typeof(d=this.refs[v])=="string";)v=d;return d||this.schemas[v]||m.call(this,p,v)}function m(p,v){const d=this.opts.uriResolver.parse(v),g=(0,n._getFullPath)(this.opts.uriResolver,d);let S=(0,n.getFullPath)(this.opts.uriResolver,p.baseId,void 0);if(Object.keys(p.schema).length>0&&g===S)return $.call(this,d,p);const y=(0,n.normalizeId)(g),E=this.refs[y]||this.schemas[y];if(typeof E=="string"){const b=m.call(this,p,E);return typeof b?.schema!="object"?void 0:$.call(this,d,b)}if(typeof E?.schema=="object"){if(E.validate||c.call(this,E),y===(0,n.normalizeId)(v)){const{schema:b}=E,{schemaId:O}=this.opts,L=b[O];return L&&(S=(0,n.resolveUrl)(this.opts.uriResolver,S,L)),new o({schema:b,schemaId:O,root:p,baseId:S})}return $.call(this,d,E)}}we.resolveSchema=m;const _=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function $(p,{baseId:v,schema:d,root:g}){var S;if(((S=p.fragment)===null||S===void 0?void 0:S[0])!=="/")return;for(const b of p.fragment.slice(1).split("/")){if(typeof d=="boolean")return;const O=d[(0,a.unescapeFragment)(b)];if(O===void 0)return;d=O;const L=typeof d=="object"&&d[this.opts.schemaId];!_.has(b)&&L&&(v=(0,n.resolveUrl)(this.opts.uriResolver,v,L))}let y;if(typeof d!="boolean"&&d.$ref&&!(0,a.schemaHasRulesButRef)(d,this.RULES)){const b=(0,n.resolveUrl)(this.opts.uriResolver,v,d.$ref);y=m.call(this,g,b)}const{schemaId:E}=this.opts;if(y=y||new o({schema:d,schemaId:E,root:g,baseId:v}),y.schema!==y.root.schema)return y}return we}const ec="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",tc="Meta-schema for $data reference (JSON AnySchema extension proposal)",rc="object",nc=["$data"],sc={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},ic=!1,ac={$id:ec,description:tc,type:rc,required:nc,properties:sc,additionalProperties:ic};var $t={},ct={exports:{}},xr,Ms;function eo(){if(Ms)return xr;Ms=1;const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),e=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r(h){let m="",_=0,$=0;for($=0;$<h.length;$++)if(_=h[$].charCodeAt(0),_!==48){if(!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";m+=h[$];break}for($+=1;$<h.length;$++){if(_=h[$].charCodeAt(0),!(_>=48&&_<=57||_>=65&&_<=70||_>=97&&_<=102))return"";m+=h[$]}return m}const n=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function a(h){return h.length=0,!0}function i(h,m,_){if(h.length){const $=r(h);if($!=="")m.push($);else return _.error=!0,!1;h.length=0}return!0}function o(h){let m=0;const _={error:!1,address:"",zone:""},$=[],p=[];let v=!1,d=!1,g=i;for(let S=0;S<h.length;S++){const y=h[S];if(!(y==="["||y==="]"))if(y===":"){if(v===!0&&(d=!0),!g(p,$,_))break;if(++m>7){_.error=!0;break}S>0&&h[S-1]===":"&&(v=!0),$.push(":");continue}else if(y==="%"){if(!g(p,$,_))break;g=a}else{p.push(y);continue}}return p.length&&(g===a?_.zone=p.join(""):d?$.push(p.join("")):$.push(r(p))),_.address=$.join(""),_}function c(h){if(l(h,":")<2)return{host:h,isIPV6:!1};const m=o(h);if(m.error)return{host:h,isIPV6:!1};{let _=m.address,$=m.address;return m.zone&&(_+="%"+m.zone,$+="%25"+m.zone),{host:_,isIPV6:!0,escapedHost:$}}}function l(h,m){let _=0;for(let $=0;$<h.length;$++)h[$]===m&&_++;return _}function u(h){let m=h;const _=[];let $=-1,p=0;for(;p=m.length;){if(p===1){if(m===".")break;if(m==="/"){_.push("/");break}else{_.push(m);break}}else if(p===2){if(m[0]==="."){if(m[1]===".")break;if(m[1]==="/"){m=m.slice(2);continue}}else if(m[0]==="/"&&(m[1]==="."||m[1]==="/")){_.push("/");break}}else if(p===3&&m==="/.."){_.length!==0&&_.pop(),_.push("/");break}if(m[0]==="."){if(m[1]==="."){if(m[2]==="/"){m=m.slice(3);continue}}else if(m[1]==="/"){m=m.slice(2);continue}}else if(m[0]==="/"&&m[1]==="."){if(m[2]==="/"){m=m.slice(2);continue}else if(m[2]==="."&&m[3]==="/"){m=m.slice(3),_.length!==0&&_.pop();continue}}if(($=m.indexOf("/",1))===-1){_.push(m);break}else _.push(m.slice(0,$)),m=m.slice($)}return _.join("")}function s(h,m){const _=m!==!0?escape:unescape;return h.scheme!==void 0&&(h.scheme=_(h.scheme)),h.userinfo!==void 0&&(h.userinfo=_(h.userinfo)),h.host!==void 0&&(h.host=_(h.host)),h.path!==void 0&&(h.path=_(h.path)),h.query!==void 0&&(h.query=_(h.query)),h.fragment!==void 0&&(h.fragment=_(h.fragment)),h}function f(h){const m=[];if(h.userinfo!==void 0&&(m.push(h.userinfo),m.push("@")),h.host!==void 0){let _=unescape(h.host);if(!e(_)){const $=c(_);$.isIPV6===!0?_=`[${$.escapedHost}]`:_=h.host}m.push(_)}return(typeof h.port=="number"||typeof h.port=="string")&&(m.push(":"),m.push(String(h.port))),m.length?m.join(""):void 0}return xr={nonSimpleDomain:n,recomposeAuthority:f,normalizeComponentEncoding:s,removeDotSegments:u,isIPv4:e,isUUID:t,normalizeIPv6:c,stringArrayToHexStripped:r},xr}var Hr,Ds;function oc(){if(Ds)return Hr;Ds=1;const{isUUID:t}=eo(),e=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,r=["http","https","ws","wss","urn","urn:uuid"];function n(y){return r.indexOf(y)!==-1}function a(y){return y.secure===!0?!0:y.secure===!1?!1:y.scheme?y.scheme.length===3&&(y.scheme[0]==="w"||y.scheme[0]==="W")&&(y.scheme[1]==="s"||y.scheme[1]==="S")&&(y.scheme[2]==="s"||y.scheme[2]==="S"):!1}function i(y){return y.host||(y.error=y.error||"HTTP URIs must have a host."),y}function o(y){const E=String(y.scheme).toLowerCase()==="https";return(y.port===(E?443:80)||y.port==="")&&(y.port=void 0),y.path||(y.path="/"),y}function c(y){return y.secure=a(y),y.resourceName=(y.path||"/")+(y.query?"?"+y.query:""),y.path=void 0,y.query=void 0,y}function l(y){if((y.port===(a(y)?443:80)||y.port==="")&&(y.port=void 0),typeof y.secure=="boolean"&&(y.scheme=y.secure?"wss":"ws",y.secure=void 0),y.resourceName){const[E,b]=y.resourceName.split("?");y.path=E&&E!=="/"?E:void 0,y.query=b,y.resourceName=void 0}return y.fragment=void 0,y}function u(y,E){if(!y.path)return y.error="URN can not be parsed",y;const b=y.path.match(e);if(b){const O=E.scheme||y.scheme||"urn";y.nid=b[1].toLowerCase(),y.nss=b[2];const L=`${O}:${E.nid||y.nid}`,G=S(L);y.path=void 0,G&&(y=G.parse(y,E))}else y.error=y.error||"URN can not be parsed.";return y}function s(y,E){if(y.nid===void 0)throw new Error("URN without nid cannot be serialized");const b=E.scheme||y.scheme||"urn",O=y.nid.toLowerCase(),L=`${b}:${E.nid||O}`,G=S(L);G&&(y=G.serialize(y,E));const q=y,V=y.nss;return q.path=`${O||E.nid}:${V}`,E.skipEscape=!0,q}function f(y,E){const b=y;return b.uuid=b.nss,b.nss=void 0,!E.tolerant&&(!b.uuid||!t(b.uuid))&&(b.error=b.error||"UUID is not valid."),b}function h(y){const E=y;return E.nss=(y.uuid||"").toLowerCase(),E}const m={scheme:"http",domainHost:!0,parse:i,serialize:o},_={scheme:"https",domainHost:m.domainHost,parse:i,serialize:o},$={scheme:"ws",domainHost:!0,parse:c,serialize:l},p={scheme:"wss",domainHost:$.domainHost,parse:$.parse,serialize:$.serialize},g={http:m,https:_,ws:$,wss:p,urn:{scheme:"urn",parse:u,serialize:s,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:f,serialize:h,skipNormalize:!0}};Object.setPrototypeOf(g,null);function S(y){return y&&(g[y]||g[y.toLowerCase()])||void 0}return Hr={wsIsSecure:a,SCHEMES:g,isValidSchemeName:n,getSchemeHandler:S},Hr}var Ls;function cc(){if(Ls)return ct.exports;Ls=1;const{normalizeIPv6:t,removeDotSegments:e,recomposeAuthority:r,normalizeComponentEncoding:n,isIPv4:a,nonSimpleDomain:i}=eo(),{SCHEMES:o,getSchemeHandler:c}=oc();function l(p,v){return typeof p=="string"?p=h(_(p,v),v):typeof p=="object"&&(p=_(h(p,v),v)),p}function u(p,v,d){const g=d?Object.assign({scheme:"null"},d):{scheme:"null"},S=s(_(p,g),_(v,g),g,!0);return g.skipEscape=!0,h(S,g)}function s(p,v,d,g){const S={};return g||(p=_(h(p,d),d),v=_(h(v,d),d)),d=d||{},!d.tolerant&&v.scheme?(S.scheme=v.scheme,S.userinfo=v.userinfo,S.host=v.host,S.port=v.port,S.path=e(v.path||""),S.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(S.userinfo=v.userinfo,S.host=v.host,S.port=v.port,S.path=e(v.path||""),S.query=v.query):(v.path?(v.path[0]==="/"?S.path=e(v.path):((p.userinfo!==void 0||p.host!==void 0||p.port!==void 0)&&!p.path?S.path="/"+v.path:p.path?S.path=p.path.slice(0,p.path.lastIndexOf("/")+1)+v.path:S.path=v.path,S.path=e(S.path)),S.query=v.query):(S.path=p.path,v.query!==void 0?S.query=v.query:S.query=p.query),S.userinfo=p.userinfo,S.host=p.host,S.port=p.port),S.scheme=p.scheme),S.fragment=v.fragment,S}function f(p,v,d){return typeof p=="string"?(p=unescape(p),p=h(n(_(p,d),!0),{...d,skipEscape:!0})):typeof p=="object"&&(p=h(n(p,!0),{...d,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=h(n(_(v,d),!0),{...d,skipEscape:!0})):typeof v=="object"&&(v=h(n(v,!0),{...d,skipEscape:!0})),p.toLowerCase()===v.toLowerCase()}function h(p,v){const d={host:p.host,scheme:p.scheme,userinfo:p.userinfo,port:p.port,path:p.path,query:p.query,nid:p.nid,nss:p.nss,uuid:p.uuid,fragment:p.fragment,reference:p.reference,resourceName:p.resourceName,secure:p.secure,error:""},g=Object.assign({},v),S=[],y=c(g.scheme||d.scheme);y&&y.serialize&&y.serialize(d,g),d.path!==void 0&&(g.skipEscape?d.path=unescape(d.path):(d.path=escape(d.path),d.scheme!==void 0&&(d.path=d.path.split("%3A").join(":")))),g.reference!=="suffix"&&d.scheme&&S.push(d.scheme,":");const E=r(d);if(E!==void 0&&(g.reference!=="suffix"&&S.push("//"),S.push(E),d.path&&d.path[0]!=="/"&&S.push("/")),d.path!==void 0){let b=d.path;!g.absolutePath&&(!y||!y.absolutePath)&&(b=e(b)),E===void 0&&b[0]==="/"&&b[1]==="/"&&(b="/%2F"+b.slice(2)),S.push(b)}return d.query!==void 0&&S.push("?",d.query),d.fragment!==void 0&&S.push("#",d.fragment),S.join("")}const m=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function _(p,v){const d=Object.assign({},v),g={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let S=!1;d.reference==="suffix"&&(d.scheme?p=d.scheme+":"+p:p="//"+p);const y=p.match(m);if(y){if(g.scheme=y[1],g.userinfo=y[3],g.host=y[4],g.port=parseInt(y[5],10),g.path=y[6]||"",g.query=y[7],g.fragment=y[8],isNaN(g.port)&&(g.port=y[5]),g.host)if(a(g.host)===!1){const O=t(g.host);g.host=O.host.toLowerCase(),S=O.isIPV6}else S=!0;g.scheme===void 0&&g.userinfo===void 0&&g.host===void 0&&g.port===void 0&&g.query===void 0&&!g.path?g.reference="same-document":g.scheme===void 0?g.reference="relative":g.fragment===void 0?g.reference="absolute":g.reference="uri",d.reference&&d.reference!=="suffix"&&d.reference!==g.reference&&(g.error=g.error||"URI is not a "+d.reference+" reference.");const E=c(d.scheme||g.scheme);if(!d.unicodeSupport&&(!E||!E.unicodeSupport)&&g.host&&(d.domainHost||E&&E.domainHost)&&S===!1&&i(g.host))try{g.host=URL.domainToASCII(g.host.toLowerCase())}catch(b){g.error=g.error||"Host's domain name can not be converted to ASCII: "+b}(!E||E&&!E.skipNormalize)&&(p.indexOf("%")!==-1&&(g.scheme!==void 0&&(g.scheme=unescape(g.scheme)),g.host!==void 0&&(g.host=unescape(g.host))),g.path&&(g.path=escape(unescape(g.path))),g.fragment&&(g.fragment=encodeURI(decodeURIComponent(g.fragment)))),E&&E.parse&&E.parse(g,d)}else g.error=g.error||"URI can not be parsed.";return g}const $={SCHEMES:o,normalize:l,resolve:u,resolveComponent:s,equal:f,serialize:h,parse:_};return ct.exports=$,ct.exports.default=$,ct.exports.fastUri=$,ct.exports}var Fs;function uc(){if(Fs)return $t;Fs=1,Object.defineProperty($t,"__esModule",{value:!0});const t=cc();return t.code='require("ajv/dist/runtime/uri").default',$t.default=t,$t}var Vs;function to(){return Vs||(Vs=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=lt();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=Z();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=br(),a=dt(),i=Ya(),o=Rr(),c=Z(),l=Sr(),u=$r(),s=ne(),f=ac,h=uc(),m=(k,P)=>new RegExp(k,P);m.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],$=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),p={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},d=200;function g(k){var P,A,I,w,R,C,X,J,ie,se,N,T,D,F,W,te,le,be,ve,_e,de,Je,Ee,jr,kr;const it=k.strict,Cr=(P=k.code)===null||P===void 0?void 0:P.optimize,os=Cr===!0||Cr===void 0?1:Cr||0,cs=(I=(A=k.code)===null||A===void 0?void 0:A.regExp)!==null&&I!==void 0?I:m,So=(w=k.uriResolver)!==null&&w!==void 0?w:h.default;return{strictSchema:(C=(R=k.strictSchema)!==null&&R!==void 0?R:it)!==null&&C!==void 0?C:!0,strictNumbers:(J=(X=k.strictNumbers)!==null&&X!==void 0?X:it)!==null&&J!==void 0?J:!0,strictTypes:(se=(ie=k.strictTypes)!==null&&ie!==void 0?ie:it)!==null&&se!==void 0?se:"log",strictTuples:(T=(N=k.strictTuples)!==null&&N!==void 0?N:it)!==null&&T!==void 0?T:"log",strictRequired:(F=(D=k.strictRequired)!==null&&D!==void 0?D:it)!==null&&F!==void 0?F:!1,code:k.code?{...k.code,optimize:os,regExp:cs}:{optimize:os,regExp:cs},loopRequired:(W=k.loopRequired)!==null&&W!==void 0?W:d,loopEnum:(te=k.loopEnum)!==null&&te!==void 0?te:d,meta:(le=k.meta)!==null&&le!==void 0?le:!0,messages:(be=k.messages)!==null&&be!==void 0?be:!0,inlineRefs:(ve=k.inlineRefs)!==null&&ve!==void 0?ve:!0,schemaId:(_e=k.schemaId)!==null&&_e!==void 0?_e:"$id",addUsedSchema:(de=k.addUsedSchema)!==null&&de!==void 0?de:!0,validateSchema:(Je=k.validateSchema)!==null&&Je!==void 0?Je:!0,validateFormats:(Ee=k.validateFormats)!==null&&Ee!==void 0?Ee:!0,unicodeRegExp:(jr=k.unicodeRegExp)!==null&&jr!==void 0?jr:!0,int32range:(kr=k.int32range)!==null&&kr!==void 0?kr:!0,uriResolver:So}}class S{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...g(P)};const{es5:A,lines:I}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:$,es5:A,lines:I}),this.logger=V(P.logger);const w=P.validateFormats;P.validateFormats=!1,this.RULES=(0,i.getRules)(),y.call(this,p,P,"NOT SUPPORTED"),y.call(this,v,P,"DEPRECATED","warn"),this._metaOpts=G.call(this),P.formats&&O.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&L.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),b.call(this),P.validateFormats=w}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:A,schemaId:I}=this.opts;let w=f;I==="id"&&(w={...f},w.id=w.$id,delete w.$id),A&&P&&this.addMetaSchema(w,w[I],!1)}defaultMeta(){const{meta:P,schemaId:A}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[A]||P:void 0}validate(P,A){let I;if(typeof P=="string"){if(I=this.getSchema(P),!I)throw new Error(`no schema with key or ref "${P}"`)}else I=this.compile(P);const w=I(A);return"$async"in I||(this.errors=I.errors),w}compile(P,A){const I=this._addSchema(P,A);return I.validate||this._compileSchemaEnv(I)}compileAsync(P,A){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:I}=this.opts;return w.call(this,P,A);async function w(se,N){await R.call(this,se.$schema);const T=this._addSchema(se,N);return T.validate||C.call(this,T)}async function R(se){se&&!this.getSchema(se)&&await w.call(this,{$ref:se},!0)}async function C(se){try{return this._compileSchemaEnv(se)}catch(N){if(!(N instanceof a.default))throw N;return X.call(this,N),await J.call(this,N.missingSchema),C.call(this,se)}}function X({missingSchema:se,missingRef:N}){if(this.refs[se])throw new Error(`AnySchema ${se} is loaded but ${N} cannot be resolved`)}async function J(se){const N=await ie.call(this,se);this.refs[se]||await R.call(this,N.$schema),this.refs[se]||this.addSchema(N,se,A)}async function ie(se){const N=this._loading[se];if(N)return N;try{return await(this._loading[se]=I(se))}finally{delete this._loading[se]}}}addSchema(P,A,I,w=this.opts.validateSchema){if(Array.isArray(P)){for(const C of P)this.addSchema(C,void 0,I,w);return this}let R;if(typeof P=="object"){const{schemaId:C}=this.opts;if(R=P[C],R!==void 0&&typeof R!="string")throw new Error(`schema ${C} must be string`)}return A=(0,l.normalizeId)(A||R),this._checkUnique(A),this.schemas[A]=this._addSchema(P,I,A,w,!0),this}addMetaSchema(P,A,I=this.opts.validateSchema){return this.addSchema(P,A,!0,I),this}validateSchema(P,A){if(typeof P=="boolean")return!0;let I;if(I=P.$schema,I!==void 0&&typeof I!="string")throw new Error("$schema must be a string");if(I=I||this.opts.defaultMeta||this.defaultMeta(),!I)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const w=this.validate(I,P);if(!w&&A){const R="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(R);else throw new Error(R)}return w}getSchema(P){let A;for(;typeof(A=E.call(this,P))=="string";)P=A;if(A===void 0){const{schemaId:I}=this.opts,w=new o.SchemaEnv({schema:{},schemaId:I});if(A=o.resolveSchema.call(this,w,P),!A)return;this.refs[P]=A}return A.validate||this._compileSchemaEnv(A)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const A=E.call(this,P);return typeof A=="object"&&this._cache.delete(A.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const A=P;this._cache.delete(A);let I=P[this.opts.schemaId];return I&&(I=(0,l.normalizeId)(I),delete this.schemas[I],delete this.refs[I]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const A of P)this.addKeyword(A);return this}addKeyword(P,A){let I;if(typeof P=="string")I=P,typeof A=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),A.keyword=I);else if(typeof P=="object"&&A===void 0){if(A=P,I=A.keyword,Array.isArray(I)&&!I.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(j.call(this,I,A),!A)return(0,s.eachItem)(I,R=>M.call(this,R)),this;x.call(this,A);const w={...A,type:(0,u.getJSONTypes)(A.type),schemaType:(0,u.getJSONTypes)(A.schemaType)};return(0,s.eachItem)(I,w.type.length===0?R=>M.call(this,R,w):R=>w.type.forEach(C=>M.call(this,R,w,C))),this}getKeyword(P){const A=this.RULES.all[P];return typeof A=="object"?A.definition:!!A}removeKeyword(P){const{RULES:A}=this;delete A.keywords[P],delete A.all[P];for(const I of A.rules){const w=I.rules.findIndex(R=>R.keyword===P);w>=0&&I.rules.splice(w,1)}return this}addFormat(P,A){return typeof A=="string"&&(A=new RegExp(A)),this.formats[P]=A,this}errorsText(P=this.errors,{separator:A=", ",dataVar:I="data"}={}){return!P||P.length===0?"No errors":P.map(w=>`${I}${w.instancePath} ${w.message}`).reduce((w,R)=>w+A+R)}$dataMetaSchema(P,A){const I=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const w of A){const R=w.split("/").slice(1);let C=P;for(const X of R)C=C[X];for(const X in I){const J=I[X];if(typeof J!="object")continue;const{$data:ie}=J.definition,se=C[X];ie&&se&&(C[X]=H(se))}}return P}_removeAllSchemas(P,A){for(const I in P){const w=P[I];(!A||A.test(I))&&(typeof w=="string"?delete P[I]:w&&!w.meta&&(this._cache.delete(w.schema),delete P[I]))}}_addSchema(P,A,I,w=this.opts.validateSchema,R=this.opts.addUsedSchema){let C;const{schemaId:X}=this.opts;if(typeof P=="object")C=P[X];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let J=this._cache.get(P);if(J!==void 0)return J;I=(0,l.normalizeId)(C||I);const ie=l.getSchemaRefs.call(this,P,I);return J=new o.SchemaEnv({schema:P,schemaId:X,meta:A,baseId:I,localRefs:ie}),this._cache.set(J.schema,J),R&&!I.startsWith("#")&&(I&&this._checkUnique(I),this.refs[I]=J),w&&this.validateSchema(P,!0),J}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):o.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const A=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,P)}finally{this.opts=A}}}S.ValidationError=n.default,S.MissingRefError=a.default,t.default=S;function y(k,P,A,I="error"){for(const w in k){const R=w;R in P&&this.logger[I](`${A}: option ${w}. ${k[R]}`)}}function E(k){return k=(0,l.normalizeId)(k),this.schemas[k]||this.refs[k]}function b(){const k=this.opts.schemas;if(k)if(Array.isArray(k))this.addSchema(k);else for(const P in k)this.addSchema(k[P],P)}function O(){for(const k in this.opts.formats){const P=this.opts.formats[k];P&&this.addFormat(k,P)}}function L(k){if(Array.isArray(k)){this.addVocabulary(k);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in k){const A=k[P];A.keyword||(A.keyword=P),this.addKeyword(A)}}function G(){const k={...this.opts};for(const P of _)delete k[P];return k}const q={log(){},warn(){},error(){}};function V(k){if(k===!1)return q;if(k===void 0)return console;if(k.log&&k.warn&&k.error)return k;throw new Error("logger must implement log, warn and error methods")}const K=/^[a-z_$][a-z0-9_$:-]*$/i;function j(k,P){const{RULES:A}=this;if((0,s.eachItem)(k,I=>{if(A.keywords[I])throw new Error(`Keyword ${I} is already defined`);if(!K.test(I))throw new Error(`Keyword ${I} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function M(k,P,A){var I;const w=P?.post;if(A&&w)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:R}=this;let C=w?R.post:R.rules.find(({type:J})=>J===A);if(C||(C={type:A,rules:[]},R.rules.push(C)),R.keywords[k]=!0,!P)return;const X={keyword:k,definition:{...P,type:(0,u.getJSONTypes)(P.type),schemaType:(0,u.getJSONTypes)(P.schemaType)}};P.before?B.call(this,C,X,P.before):C.rules.push(X),R.all[k]=X,(I=P.implements)===null||I===void 0||I.forEach(J=>this.addKeyword(J))}function B(k,P,A){const I=k.rules.findIndex(w=>w.keyword===A);I>=0?k.rules.splice(I,0,P):(k.rules.push(P),this.logger.warn(`rule ${A} is not defined`))}function x(k){let{metaSchema:P}=k;P!==void 0&&(k.$data&&this.opts.$data&&(P=H(P)),k.validateSchema=this.compile(P,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(k){return{anyOf:[k,U]}}})(Lr)),Lr}var wt={},Et={},St={},Us;function lc(){if(Us)return St;Us=1,Object.defineProperty(St,"__esModule",{value:!0});const t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return St.default=t,St}var Ve={},zs;function Yn(){if(zs)return Ve;zs=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.callRef=Ve.getValidate=void 0;const t=dt(),e=Ne(),r=Z(),n=Ie(),a=Rr(),i=ne(),o={keyword:"$ref",schemaType:"string",code(u){const{gen:s,schema:f,it:h}=u,{baseId:m,schemaEnv:_,validateName:$,opts:p,self:v}=h,{root:d}=_;if((f==="#"||f==="#/")&&m===d.baseId)return S();const g=a.resolveRef.call(v,d,m,f);if(g===void 0)throw new t.default(h.opts.uriResolver,m,f);if(g instanceof a.SchemaEnv)return y(g);return E(g);function S(){if(_===d)return l(u,$,_,_.$async);const b=s.scopeValue("root",{ref:d});return l(u,(0,r._)`${b}.validate`,d,d.$async)}function y(b){const O=c(u,b);l(u,O,b,b.$async)}function E(b){const O=s.scopeValue("schema",p.code.source===!0?{ref:b,code:(0,r.stringify)(b)}:{ref:b}),L=s.name("valid"),G=u.subschema({schema:b,dataTypes:[],schemaPath:r.nil,topSchemaRef:O,errSchemaPath:f},L);u.mergeEvaluated(G),u.ok(L)}}};function c(u,s){const{gen:f}=u;return s.validate?f.scopeValue("validate",{ref:s.validate}):(0,r._)`${f.scopeValue("wrapper",{ref:s})}.validate`}Ve.getValidate=c;function l(u,s,f,h){const{gen:m,it:_}=u,{allErrors:$,schemaEnv:p,opts:v}=_,d=v.passContext?n.default.this:r.nil;h?g():S();function g(){if(!p.$async)throw new Error("async schema referenced by sync schema");const b=m.let("valid");m.try(()=>{m.code((0,r._)`await ${(0,e.callValidateCode)(u,s,d)}`),E(s),$||m.assign(b,!0)},O=>{m.if((0,r._)`!(${O} instanceof ${_.ValidationError})`,()=>m.throw(O)),y(O),$||m.assign(b,!1)}),u.ok(b)}function S(){u.result((0,e.callValidateCode)(u,s,d),()=>E(s),()=>y(s))}function y(b){const O=(0,r._)`${b}.errors`;m.assign(n.default.vErrors,(0,r._)`${n.default.vErrors} === null ? ${O} : ${n.default.vErrors}.concat(${O})`),m.assign(n.default.errors,(0,r._)`${n.default.vErrors}.length`)}function E(b){var O;if(!_.opts.unevaluated)return;const L=(O=f?.validate)===null||O===void 0?void 0:O.evaluated;if(_.props!==!0)if(L&&!L.dynamicProps)L.props!==void 0&&(_.props=i.mergeEvaluated.props(m,L.props,_.props));else{const G=m.var("props",(0,r._)`${b}.evaluated.props`);_.props=i.mergeEvaluated.props(m,G,_.props,r.Name)}if(_.items!==!0)if(L&&!L.dynamicItems)L.items!==void 0&&(_.items=i.mergeEvaluated.items(m,L.items,_.items));else{const G=m.var("items",(0,r._)`${b}.evaluated.items`);_.items=i.mergeEvaluated.items(m,G,_.items,r.Name)}}}return Ve.callRef=l,Ve.default=o,Ve}var Gs;function ro(){if(Gs)return Et;Gs=1,Object.defineProperty(Et,"__esModule",{value:!0});const t=lc(),e=Yn(),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",t.default,e.default];return Et.default=r,Et}var bt={},Rt={},Ks;function dc(){if(Ks)return Rt;Ks=1,Object.defineProperty(Rt,"__esModule",{value:!0});const t=Z(),e=t.operators,r={maximum:{okStr:"<=",ok:e.LTE,fail:e.GT},minimum:{okStr:">=",ok:e.GTE,fail:e.LT},exclusiveMaximum:{okStr:"<",ok:e.LT,fail:e.GTE},exclusiveMinimum:{okStr:">",ok:e.GT,fail:e.LTE}},n={message:({keyword:i,schemaCode:o})=>(0,t.str)`must be ${r[i].okStr} ${o}`,params:({keyword:i,schemaCode:o})=>(0,t._)`{comparison: ${r[i].okStr}, limit: ${o}}`},a={keyword:Object.keys(r),type:"number",schemaType:"number",$data:!0,error:n,code(i){const{keyword:o,data:c,schemaCode:l}=i;i.fail$data((0,t._)`${c} ${r[o].fail} ${l} || isNaN(${c})`)}};return Rt.default=a,Rt}var Pt={},xs;function fc(){if(xs)return Pt;xs=1,Object.defineProperty(Pt,"__esModule",{value:!0});const t=Z(),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,t._)`{multipleOf: ${n}}`},code(n){const{gen:a,data:i,schemaCode:o,it:c}=n,l=c.opts.multipleOfPrecision,u=a.let("res"),s=l?(0,t._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${l}`:(0,t._)`${u} !== parseInt(${u})`;n.fail$data((0,t._)`(${o} === 0 || (${u} = ${i}/${o}, ${s}))`)}};return Pt.default=r,Pt}var It={},Nt={},Hs;function hc(){if(Hs)return Nt;Hs=1,Object.defineProperty(Nt,"__esModule",{value:!0});function t(e){const r=e.length;let n=0,a=0,i;for(;a<r;)n++,i=e.charCodeAt(a++),i>=55296&&i<=56319&&a<r&&(i=e.charCodeAt(a),(i&64512)===56320&&a++);return n}return Nt.default=t,t.code='require("ajv/dist/runtime/ucs2length").default',Nt}var Bs;function pc(){if(Bs)return It;Bs=1,Object.defineProperty(It,"__esModule",{value:!0});const t=Z(),e=ne(),r=hc(),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:o}){const c=i==="maxLength"?"more":"fewer";return(0,t.str)`must NOT have ${c} than ${o} characters`},params:({schemaCode:i})=>(0,t._)`{limit: ${i}}`},code(i){const{keyword:o,data:c,schemaCode:l,it:u}=i,s=o==="maxLength"?t.operators.GT:t.operators.LT,f=u.opts.unicode===!1?(0,t._)`${c}.length`:(0,t._)`${(0,e.useFunc)(i.gen,r.default)}(${c})`;i.fail$data((0,t._)`${f} ${s} ${l}`)}};return It.default=a,It}var Ot={},Xs;function mc(){if(Xs)return Ot;Xs=1,Object.defineProperty(Ot,"__esModule",{value:!0});const t=Ne(),e=Z(),n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,e.str)`must match pattern "${a}"`,params:({schemaCode:a})=>(0,e._)`{pattern: ${a}}`},code(a){const{data:i,$data:o,schema:c,schemaCode:l,it:u}=a,s=u.opts.unicodeRegExp?"u":"",f=o?(0,e._)`(new RegExp(${l}, ${s}))`:(0,t.usePattern)(a,c);a.fail$data((0,e._)`!${f}.test(${i})`)}};return Ot.default=n,Ot}var Tt={},Ws;function yc(){if(Ws)return Tt;Ws=1,Object.defineProperty(Tt,"__esModule",{value:!0});const t=Z(),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:a}){const i=n==="maxProperties"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${a} properties`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:a,data:i,schemaCode:o}=n,c=a==="maxProperties"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`Object.keys(${i}).length ${c} ${o}`)}};return Tt.default=r,Tt}var At={},Js;function gc(){if(Js)return At;Js=1,Object.defineProperty(At,"__esModule",{value:!0});const t=Ne(),e=Z(),r=ne(),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:i}})=>(0,e.str)`must have required property '${i}'`,params:({params:{missingProperty:i}})=>(0,e._)`{missingProperty: ${i}}`},code(i){const{gen:o,schema:c,schemaCode:l,data:u,$data:s,it:f}=i,{opts:h}=f;if(!s&&c.length===0)return;const m=c.length>=h.loopRequired;if(f.allErrors?_():$(),h.strictRequired){const d=i.parentSchema.properties,{definedProperties:g}=i.it;for(const S of c)if(d?.[S]===void 0&&!g.has(S)){const y=f.schemaEnv.baseId+f.errSchemaPath,E=`required property "${S}" is not defined at "${y}" (strictRequired)`;(0,r.checkStrictMode)(f,E,f.opts.strictRequired)}}function _(){if(m||s)i.block$data(e.nil,p);else for(const d of c)(0,t.checkReportMissingProp)(i,d)}function $(){const d=o.let("missing");if(m||s){const g=o.let("valid",!0);i.block$data(g,()=>v(d,g)),i.ok(g)}else o.if((0,t.checkMissingProp)(i,c,d)),(0,t.reportMissingProp)(i,d),o.else()}function p(){o.forOf("prop",l,d=>{i.setParams({missingProperty:d}),o.if((0,t.noPropertyInData)(o,u,d,h.ownProperties),()=>i.error())})}function v(d,g){i.setParams({missingProperty:d}),o.forOf(d,l,()=>{o.assign(g,(0,t.propertyInData)(o,u,d,h.ownProperties)),o.if((0,e.not)(g),()=>{i.error(),o.break()})},e.nil)}}};return At.default=a,At}var jt={},Ys;function vc(){if(Ys)return jt;Ys=1,Object.defineProperty(jt,"__esModule",{value:!0});const t=Z(),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:n,schemaCode:a}){const i=n==="maxItems"?"more":"fewer";return(0,t.str)`must NOT have ${i} than ${a} items`},params:({schemaCode:n})=>(0,t._)`{limit: ${n}}`},code(n){const{keyword:a,data:i,schemaCode:o}=n,c=a==="maxItems"?t.operators.GT:t.operators.LT;n.fail$data((0,t._)`${i}.length ${c} ${o}`)}};return jt.default=r,jt}var kt={},Ct={},Zs;function Zn(){if(Zs)return Ct;Zs=1,Object.defineProperty(Ct,"__esModule",{value:!0});const t=Qa();return t.code='require("ajv/dist/runtime/equal").default',Ct.default=t,Ct}var Qs;function _c(){if(Qs)return kt;Qs=1,Object.defineProperty(kt,"__esModule",{value:!0});const t=$r(),e=Z(),r=ne(),n=Zn(),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:c}})=>(0,e.str)`must NOT have duplicate items (items ## ${c} and ${o} are identical)`,params:({params:{i:o,j:c}})=>(0,e._)`{i: ${o}, j: ${c}}`},code(o){const{gen:c,data:l,$data:u,schema:s,parentSchema:f,schemaCode:h,it:m}=o;if(!u&&!s)return;const _=c.let("valid"),$=f.items?(0,t.getSchemaTypes)(f.items):[];o.block$data(_,p,(0,e._)`${h} === false`),o.ok(_);function p(){const S=c.let("i",(0,e._)`${l}.length`),y=c.let("j");o.setParams({i:S,j:y}),c.assign(_,!0),c.if((0,e._)`${S} > 1`,()=>(v()?d:g)(S,y))}function v(){return $.length>0&&!$.some(S=>S==="object"||S==="array")}function d(S,y){const E=c.name("item"),b=(0,t.checkDataTypes)($,E,m.opts.strictNumbers,t.DataType.Wrong),O=c.const("indices",(0,e._)`{}`);c.for((0,e._)`;${S}--;`,()=>{c.let(E,(0,e._)`${l}[${S}]`),c.if(b,(0,e._)`continue`),$.length>1&&c.if((0,e._)`typeof ${E} == "string"`,(0,e._)`${E} += "_"`),c.if((0,e._)`typeof ${O}[${E}] == "number"`,()=>{c.assign(y,(0,e._)`${O}[${E}]`),o.error(),c.assign(_,!1).break()}).code((0,e._)`${O}[${E}] = ${S}`)})}function g(S,y){const E=(0,r.useFunc)(c,n.default),b=c.name("outer");c.label(b).for((0,e._)`;${S}--;`,()=>c.for((0,e._)`${y} = ${S}; ${y}--;`,()=>c.if((0,e._)`${E}(${l}[${S}], ${l}[${y}])`,()=>{o.error(),c.assign(_,!1).break(b)})))}}};return kt.default=i,kt}var qt={},ei;function $c(){if(ei)return qt;ei=1,Object.defineProperty(qt,"__esModule",{value:!0});const t=Z(),e=ne(),r=Zn(),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:i})=>(0,t._)`{allowedValue: ${i}}`},code(i){const{gen:o,data:c,$data:l,schemaCode:u,schema:s}=i;l||s&&typeof s=="object"?i.fail$data((0,t._)`!${(0,e.useFunc)(o,r.default)}(${c}, ${u})`):i.fail((0,t._)`${s} !== ${c}`)}};return qt.default=a,qt}var Mt={},ti;function wc(){if(ti)return Mt;ti=1,Object.defineProperty(Mt,"__esModule",{value:!0});const t=Z(),e=ne(),r=Zn(),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:i})=>(0,t._)`{allowedValues: ${i}}`},code(i){const{gen:o,data:c,$data:l,schema:u,schemaCode:s,it:f}=i;if(!l&&u.length===0)throw new Error("enum must have non-empty array");const h=u.length>=f.opts.loopEnum;let m;const _=()=>m??(m=(0,e.useFunc)(o,r.default));let $;if(h||l)$=o.let("valid"),i.block$data($,p);else{if(!Array.isArray(u))throw new Error("ajv implementation error");const d=o.const("vSchema",s);$=(0,t.or)(...u.map((g,S)=>v(d,S)))}i.pass($);function p(){o.assign($,!1),o.forOf("v",s,d=>o.if((0,t._)`${_()}(${c}, ${d})`,()=>o.assign($,!0).break()))}function v(d,g){const S=u[g];return typeof S=="object"&&S!==null?(0,t._)`${_()}(${c}, ${d}[${g}])`:(0,t._)`${c} === ${S}`}}};return Mt.default=a,Mt}var ri;function no(){if(ri)return bt;ri=1,Object.defineProperty(bt,"__esModule",{value:!0});const t=dc(),e=fc(),r=pc(),n=mc(),a=yc(),i=gc(),o=vc(),c=_c(),l=$c(),u=wc(),s=[t.default,e.default,r.default,n.default,a.default,i.default,o.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,u.default];return bt.default=s,bt}var Dt={},Ye={},ni;function so(){if(ni)return Ye;ni=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.validateAdditionalItems=void 0;const t=Z(),e=ne(),n={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:i}})=>(0,t.str)`must NOT have more than ${i} items`,params:({params:{len:i}})=>(0,t._)`{limit: ${i}}`},code(i){const{parentSchema:o,it:c}=i,{items:l}=o;if(!Array.isArray(l)){(0,e.checkStrictMode)(c,'"additionalItems" is ignored when "items" is not an array of schemas');return}a(i,l)}};function a(i,o){const{gen:c,schema:l,data:u,keyword:s,it:f}=i;f.items=!0;const h=c.const("len",(0,t._)`${u}.length`);if(l===!1)i.setParams({len:o.length}),i.pass((0,t._)`${h} <= ${o.length}`);else if(typeof l=="object"&&!(0,e.alwaysValidSchema)(f,l)){const _=c.var("valid",(0,t._)`${h} <= ${o.length}`);c.if((0,t.not)(_),()=>m(_)),i.ok(_)}function m(_){c.forRange("i",o.length,h,$=>{i.subschema({keyword:s,dataProp:$,dataPropType:e.Type.Num},_),f.allErrors||c.if((0,t.not)(_),()=>c.break())})}}return Ye.validateAdditionalItems=a,Ye.default=n,Ye}var Lt={},Ze={},si;function io(){if(si)return Ze;si=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.validateTuple=void 0;const t=Z(),e=ne(),r=Ne(),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(i){const{schema:o,it:c}=i;if(Array.isArray(o))return a(i,"additionalItems",o);c.items=!0,!(0,e.alwaysValidSchema)(c,o)&&i.ok((0,r.validateArray)(i))}};function a(i,o,c=i.schema){const{gen:l,parentSchema:u,data:s,keyword:f,it:h}=i;$(u),h.opts.unevaluated&&c.length&&h.items!==!0&&(h.items=e.mergeEvaluated.items(l,c.length,h.items));const m=l.name("valid"),_=l.const("len",(0,t._)`${s}.length`);c.forEach((p,v)=>{(0,e.alwaysValidSchema)(h,p)||(l.if((0,t._)`${_} > ${v}`,()=>i.subschema({keyword:f,schemaProp:v,dataProp:v},m)),i.ok(m))});function $(p){const{opts:v,errSchemaPath:d}=h,g=c.length,S=g===p.minItems&&(g===p.maxItems||p[o]===!1);if(v.strictTuples&&!S){const y=`"${f}" is ${g}-tuple, but minItems or maxItems/${o} are not specified or different at path "${d}"`;(0,e.checkStrictMode)(h,y,v.strictTuples)}}}return Ze.validateTuple=a,Ze.default=n,Ze}var ii;function Ec(){if(ii)return Lt;ii=1,Object.defineProperty(Lt,"__esModule",{value:!0});const t=io(),e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,t.validateTuple)(r,"items")};return Lt.default=e,Lt}var Ft={},ai;function Sc(){if(ai)return Ft;ai=1,Object.defineProperty(Ft,"__esModule",{value:!0});const t=Z(),e=ne(),r=Ne(),n=so(),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,t.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,t._)`{limit: ${o}}`},code(o){const{schema:c,parentSchema:l,it:u}=o,{prefixItems:s}=l;u.items=!0,!(0,e.alwaysValidSchema)(u,c)&&(s?(0,n.validateAdditionalItems)(o,s):o.ok((0,r.validateArray)(o)))}};return Ft.default=i,Ft}var Vt={},oi;function bc(){if(oi)return Vt;oi=1,Object.defineProperty(Vt,"__esModule",{value:!0});const t=Z(),e=ne(),n={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:a,max:i}})=>i===void 0?(0,t.str)`must contain at least ${a} valid item(s)`:(0,t.str)`must contain at least ${a} and no more than ${i} valid item(s)`,params:({params:{min:a,max:i}})=>i===void 0?(0,t._)`{minContains: ${a}}`:(0,t._)`{minContains: ${a}, maxContains: ${i}}`},code(a){const{gen:i,schema:o,parentSchema:c,data:l,it:u}=a;let s,f;const{minContains:h,maxContains:m}=c;u.opts.next?(s=h===void 0?1:h,f=m):s=1;const _=i.const("len",(0,t._)`${l}.length`);if(a.setParams({min:s,max:f}),f===void 0&&s===0){(0,e.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&s>f){(0,e.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),a.fail();return}if((0,e.alwaysValidSchema)(u,o)){let g=(0,t._)`${_} >= ${s}`;f!==void 0&&(g=(0,t._)`${g} && ${_} <= ${f}`),a.pass(g);return}u.items=!0;const $=i.name("valid");f===void 0&&s===1?v($,()=>i.if($,()=>i.break())):s===0?(i.let($,!0),f!==void 0&&i.if((0,t._)`${l}.length > 0`,p)):(i.let($,!1),p()),a.result($,()=>a.reset());function p(){const g=i.name("_valid"),S=i.let("count",0);v(g,()=>i.if(g,()=>d(S)))}function v(g,S){i.forRange("i",0,_,y=>{a.subschema({keyword:"contains",dataProp:y,dataPropType:e.Type.Num,compositeRule:!0},g),S()})}function d(g){i.code((0,t._)`${g}++`),f===void 0?i.if((0,t._)`${g} >= ${s}`,()=>i.assign($,!0).break()):(i.if((0,t._)`${g} > ${f}`,()=>i.assign($,!1).break()),s===1?i.assign($,!0):i.if((0,t._)`${g} >= ${s}`,()=>i.assign($,!0)))}}};return Vt.default=n,Vt}var Br={},ci;function Qn(){return ci||(ci=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Z(),r=ne(),n=Ne();t.error={message:({params:{property:l,depsCount:u,deps:s}})=>{const f=u===1?"property":"properties";return(0,e.str)`must have ${f} ${s} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:s,missingProperty:f}})=>(0,e._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${s}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(l){const[u,s]=i(l);o(l,u),c(l,s)}};function i({schema:l}){const u={},s={};for(const f in l){if(f==="__proto__")continue;const h=Array.isArray(l[f])?u:s;h[f]=l[f]}return[u,s]}function o(l,u=l.schema){const{gen:s,data:f,it:h}=l;if(Object.keys(u).length===0)return;const m=s.let("missing");for(const _ in u){const $=u[_];if($.length===0)continue;const p=(0,n.propertyInData)(s,f,_,h.opts.ownProperties);l.setParams({property:_,depsCount:$.length,deps:$.join(", ")}),h.allErrors?s.if(p,()=>{for(const v of $)(0,n.checkReportMissingProp)(l,v)}):(s.if((0,e._)`${p} && (${(0,n.checkMissingProp)(l,$,m)})`),(0,n.reportMissingProp)(l,m),s.else())}}t.validatePropertyDeps=o;function c(l,u=l.schema){const{gen:s,data:f,keyword:h,it:m}=l,_=s.name("valid");for(const $ in u)(0,r.alwaysValidSchema)(m,u[$])||(s.if((0,n.propertyInData)(s,f,$,m.opts.ownProperties),()=>{const p=l.subschema({keyword:h,schemaProp:$},_);l.mergeValidEvaluated(p,_)},()=>s.var(_,!0)),l.ok(_))}t.validateSchemaDeps=c,t.default=a})(Br)),Br}var Ut={},ui;function Rc(){if(ui)return Ut;ui=1,Object.defineProperty(Ut,"__esModule",{value:!0});const t=Z(),e=ne(),n={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:a})=>(0,t._)`{propertyName: ${a.propertyName}}`},code(a){const{gen:i,schema:o,data:c,it:l}=a;if((0,e.alwaysValidSchema)(l,o))return;const u=i.name("valid");i.forIn("key",c,s=>{a.setParams({propertyName:s}),a.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},u),i.if((0,t.not)(u),()=>{a.error(!0),l.allErrors||i.break()})}),a.ok(u)}};return Ut.default=n,Ut}var zt={},li;function ao(){if(li)return zt;li=1,Object.defineProperty(zt,"__esModule",{value:!0});const t=Ne(),e=Z(),r=Ie(),n=ne(),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,e._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:c,schema:l,parentSchema:u,data:s,errsCount:f,it:h}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:m,opts:_}=h;if(h.props=!0,_.removeAdditional!=="all"&&(0,n.alwaysValidSchema)(h,l))return;const $=(0,t.allSchemaProperties)(u.properties),p=(0,t.allSchemaProperties)(u.patternProperties);v(),o.ok((0,e._)`${f} === ${r.default.errors}`);function v(){c.forIn("key",s,E=>{!$.length&&!p.length?S(E):c.if(d(E),()=>S(E))})}function d(E){let b;if($.length>8){const O=(0,n.schemaRefOrVal)(h,u.properties,"properties");b=(0,t.isOwnProperty)(c,O,E)}else $.length?b=(0,e.or)(...$.map(O=>(0,e._)`${E} === ${O}`)):b=e.nil;return p.length&&(b=(0,e.or)(b,...p.map(O=>(0,e._)`${(0,t.usePattern)(o,O)}.test(${E})`))),(0,e.not)(b)}function g(E){c.code((0,e._)`delete ${s}[${E}]`)}function S(E){if(_.removeAdditional==="all"||_.removeAdditional&&l===!1){g(E);return}if(l===!1){o.setParams({additionalProperty:E}),o.error(),m||c.break();return}if(typeof l=="object"&&!(0,n.alwaysValidSchema)(h,l)){const b=c.name("valid");_.removeAdditional==="failing"?(y(E,b,!1),c.if((0,e.not)(b),()=>{o.reset(),g(E)})):(y(E,b),m||c.if((0,e.not)(b),()=>c.break()))}}function y(E,b,O){const L={keyword:"additionalProperties",dataProp:E,dataPropType:n.Type.Str};O===!1&&Object.assign(L,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(L,b)}}};return zt.default=i,zt}var Gt={},di;function Pc(){if(di)return Gt;di=1,Object.defineProperty(Gt,"__esModule",{value:!0});const t=lt(),e=Ne(),r=ne(),n=ao(),a={keyword:"properties",type:"object",schemaType:"object",code(i){const{gen:o,schema:c,parentSchema:l,data:u,it:s}=i;s.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&n.default.code(new t.KeywordCxt(s,n.default,"additionalProperties"));const f=(0,e.allSchemaProperties)(c);for(const p of f)s.definedProperties.add(p);s.opts.unevaluated&&f.length&&s.props!==!0&&(s.props=r.mergeEvaluated.props(o,(0,r.toHash)(f),s.props));const h=f.filter(p=>!(0,r.alwaysValidSchema)(s,c[p]));if(h.length===0)return;const m=o.name("valid");for(const p of h)_(p)?$(p):(o.if((0,e.propertyInData)(o,u,p,s.opts.ownProperties)),$(p),s.allErrors||o.else().var(m,!0),o.endIf()),i.it.definedProperties.add(p),i.ok(m);function _(p){return s.opts.useDefaults&&!s.compositeRule&&c[p].default!==void 0}function $(p){i.subschema({keyword:"properties",schemaProp:p,dataProp:p},m)}}};return Gt.default=a,Gt}var Kt={},fi;function Ic(){if(fi)return Kt;fi=1,Object.defineProperty(Kt,"__esModule",{value:!0});const t=Ne(),e=Z(),r=ne(),n=ne(),a={keyword:"patternProperties",type:"object",schemaType:"object",code(i){const{gen:o,schema:c,data:l,parentSchema:u,it:s}=i,{opts:f}=s,h=(0,t.allSchemaProperties)(c),m=h.filter(S=>(0,r.alwaysValidSchema)(s,c[S]));if(h.length===0||m.length===h.length&&(!s.opts.unevaluated||s.props===!0))return;const _=f.strictSchema&&!f.allowMatchingProperties&&u.properties,$=o.name("valid");s.props!==!0&&!(s.props instanceof e.Name)&&(s.props=(0,n.evaluatedPropsToName)(o,s.props));const{props:p}=s;v();function v(){for(const S of h)_&&d(S),s.allErrors?g(S):(o.var($,!0),g(S),o.if($))}function d(S){for(const y in _)new RegExp(S).test(y)&&(0,r.checkStrictMode)(s,`property ${y} matches pattern ${S} (use allowMatchingProperties)`)}function g(S){o.forIn("key",l,y=>{o.if((0,e._)`${(0,t.usePattern)(i,S)}.test(${y})`,()=>{const E=m.includes(S);E||i.subschema({keyword:"patternProperties",schemaProp:S,dataProp:y,dataPropType:n.Type.Str},$),s.opts.unevaluated&&p!==!0?o.assign((0,e._)`${p}[${y}]`,!0):!E&&!s.allErrors&&o.if((0,e.not)($),()=>o.break())})})}}};return Kt.default=a,Kt}var xt={},hi;function Nc(){if(hi)return xt;hi=1,Object.defineProperty(xt,"__esModule",{value:!0});const t=ne(),e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:a,it:i}=r;if((0,t.alwaysValidSchema)(i,a)){r.fail();return}const o=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),r.failResult(o,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};return xt.default=e,xt}var Ht={},pi;function Oc(){if(pi)return Ht;pi=1,Object.defineProperty(Ht,"__esModule",{value:!0});const e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ne().validateUnion,error:{message:"must match a schema in anyOf"}};return Ht.default=e,Ht}var Bt={},mi;function Tc(){if(mi)return Bt;mi=1,Object.defineProperty(Bt,"__esModule",{value:!0});const t=Z(),e=ne(),n={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:a})=>(0,t._)`{passingSchemas: ${a.passing}}`},code(a){const{gen:i,schema:o,parentSchema:c,it:l}=a;if(!Array.isArray(o))throw new Error("ajv implementation error");if(l.opts.discriminator&&c.discriminator)return;const u=o,s=i.let("valid",!1),f=i.let("passing",null),h=i.name("_valid");a.setParams({passing:f}),i.block(m),a.result(s,()=>a.reset(),()=>a.error(!0));function m(){u.forEach((_,$)=>{let p;(0,e.alwaysValidSchema)(l,_)?i.var(h,!0):p=a.subschema({keyword:"oneOf",schemaProp:$,compositeRule:!0},h),$>0&&i.if((0,t._)`${h} && ${s}`).assign(s,!1).assign(f,(0,t._)`[${f}, ${$}]`).else(),i.if(h,()=>{i.assign(s,!0),i.assign(f,$),p&&a.mergeEvaluated(p,t.Name)})})}}};return Bt.default=n,Bt}var Xt={},yi;function Ac(){if(yi)return Xt;yi=1,Object.defineProperty(Xt,"__esModule",{value:!0});const t=ne(),e={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:a,it:i}=r;if(!Array.isArray(a))throw new Error("ajv implementation error");const o=n.name("valid");a.forEach((c,l)=>{if((0,t.alwaysValidSchema)(i,c))return;const u=r.subschema({keyword:"allOf",schemaProp:l},o);r.ok(o),r.mergeEvaluated(u)})}};return Xt.default=e,Xt}var Wt={},gi;function jc(){if(gi)return Wt;gi=1,Object.defineProperty(Wt,"__esModule",{value:!0});const t=Z(),e=ne(),n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:i})=>(0,t.str)`must match "${i.ifClause}" schema`,params:({params:i})=>(0,t._)`{failingKeyword: ${i.ifClause}}`},code(i){const{gen:o,parentSchema:c,it:l}=i;c.then===void 0&&c.else===void 0&&(0,e.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const u=a(l,"then"),s=a(l,"else");if(!u&&!s)return;const f=o.let("valid",!0),h=o.name("_valid");if(m(),i.reset(),u&&s){const $=o.let("ifClause");i.setParams({ifClause:$}),o.if(h,_("then",$),_("else",$))}else u?o.if(h,_("then")):o.if((0,t.not)(h),_("else"));i.pass(f,()=>i.error(!0));function m(){const $=i.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h);i.mergeEvaluated($)}function _($,p){return()=>{const v=i.subschema({keyword:$},h);o.assign(f,h),i.mergeValidEvaluated(v,f),p?o.assign(p,(0,t._)`${$}`):i.setParams({ifClause:$})}}}};function a(i,o){const c=i.schema[o];return c!==void 0&&!(0,e.alwaysValidSchema)(i,c)}return Wt.default=n,Wt}var Jt={},vi;function kc(){if(vi)return Jt;vi=1,Object.defineProperty(Jt,"__esModule",{value:!0});const t=ne(),e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:a}){n.if===void 0&&(0,t.checkStrictMode)(a,`"${r}" without "if" is ignored`)}};return Jt.default=e,Jt}var _i;function oo(){if(_i)return Dt;_i=1,Object.defineProperty(Dt,"__esModule",{value:!0});const t=so(),e=Ec(),r=io(),n=Sc(),a=bc(),i=Qn(),o=Rc(),c=ao(),l=Pc(),u=Ic(),s=Nc(),f=Oc(),h=Tc(),m=Ac(),_=jc(),$=kc();function p(v=!1){const d=[s.default,f.default,h.default,m.default,_.default,$.default,o.default,c.default,i.default,l.default,u.default];return v?d.push(e.default,n.default):d.push(t.default,r.default),d.push(a.default),d}return Dt.default=p,Dt}var Yt={},Qe={},$i;function co(){if($i)return Qe;$i=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.dynamicAnchor=void 0;const t=Z(),e=Ie(),r=Rr(),n=Yn(),a={keyword:"$dynamicAnchor",schemaType:"string",code:c=>i(c,c.schema)};function i(c,l){const{gen:u,it:s}=c;s.schemaEnv.root.dynamicAnchors[l]=!0;const f=(0,t._)`${e.default.dynamicAnchors}${(0,t.getProperty)(l)}`,h=s.errSchemaPath==="#"?s.validateName:o(c);u.if((0,t._)`!${f}`,()=>u.assign(f,h))}Qe.dynamicAnchor=i;function o(c){const{schemaEnv:l,schema:u,self:s}=c.it,{root:f,baseId:h,localRefs:m,meta:_}=l.root,{schemaId:$}=s.opts,p=new r.SchemaEnv({schema:u,schemaId:$,root:f,baseId:h,localRefs:m,meta:_});return r.compileSchema.call(s,p),(0,n.getValidate)(c,p)}return Qe.default=a,Qe}var et={},wi;function uo(){if(wi)return et;wi=1,Object.defineProperty(et,"__esModule",{value:!0}),et.dynamicRef=void 0;const t=Z(),e=Ie(),r=Yn(),n={keyword:"$dynamicRef",schemaType:"string",code:i=>a(i,i.schema)};function a(i,o){const{gen:c,keyword:l,it:u}=i;if(o[0]!=="#")throw new Error(`"${l}" only supports hash fragment reference`);const s=o.slice(1);if(u.allErrors)f();else{const m=c.let("valid",!1);f(m),i.ok(m)}function f(m){if(u.schemaEnv.root.dynamicAnchors[s]){const _=c.let("_v",(0,t._)`${e.default.dynamicAnchors}${(0,t.getProperty)(s)}`);c.if(_,h(_,m),h(u.validateName,m))}else h(u.validateName,m)()}function h(m,_){return _?()=>c.block(()=>{(0,r.callRef)(i,m),c.let(_,!0)}):()=>(0,r.callRef)(i,m)}}return et.dynamicRef=a,et.default=n,et}var Zt={},Ei;function Cc(){if(Ei)return Zt;Ei=1,Object.defineProperty(Zt,"__esModule",{value:!0});const t=co(),e=ne(),r={keyword:"$recursiveAnchor",schemaType:"boolean",code(n){n.schema?(0,t.dynamicAnchor)(n,""):(0,e.checkStrictMode)(n.it,"$recursiveAnchor: false is ignored")}};return Zt.default=r,Zt}var Qt={},Si;function qc(){if(Si)return Qt;Si=1,Object.defineProperty(Qt,"__esModule",{value:!0});const t=uo(),e={keyword:"$recursiveRef",schemaType:"string",code:r=>(0,t.dynamicRef)(r,r.schema)};return Qt.default=e,Qt}var bi;function Mc(){if(bi)return Yt;bi=1,Object.defineProperty(Yt,"__esModule",{value:!0});const t=co(),e=uo(),r=Cc(),n=qc(),a=[t.default,e.default,r.default,n.default];return Yt.default=a,Yt}var er={},tr={},Ri;function Dc(){if(Ri)return tr;Ri=1,Object.defineProperty(tr,"__esModule",{value:!0});const t=Qn(),e={keyword:"dependentRequired",type:"object",schemaType:"object",error:t.error,code:r=>(0,t.validatePropertyDeps)(r)};return tr.default=e,tr}var rr={},Pi;function Lc(){if(Pi)return rr;Pi=1,Object.defineProperty(rr,"__esModule",{value:!0});const t=Qn(),e={keyword:"dependentSchemas",type:"object",schemaType:"object",code:r=>(0,t.validateSchemaDeps)(r)};return rr.default=e,rr}var nr={},Ii;function Fc(){if(Ii)return nr;Ii=1,Object.defineProperty(nr,"__esModule",{value:!0});const t=ne(),e={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:r,parentSchema:n,it:a}){n.contains===void 0&&(0,t.checkStrictMode)(a,`"${r}" without "contains" is ignored`)}};return nr.default=e,nr}var Ni;function Vc(){if(Ni)return er;Ni=1,Object.defineProperty(er,"__esModule",{value:!0});const t=Dc(),e=Lc(),r=Fc(),n=[t.default,e.default,r.default];return er.default=n,er}var sr={},ir={},Oi;function Uc(){if(Oi)return ir;Oi=1,Object.defineProperty(ir,"__esModule",{value:!0});const t=Z(),e=ne(),r=Ie(),a={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:{message:"must NOT have unevaluated properties",params:({params:i})=>(0,t._)`{unevaluatedProperty: ${i.unevaluatedProperty}}`},code(i){const{gen:o,schema:c,data:l,errsCount:u,it:s}=i;if(!u)throw new Error("ajv implementation error");const{allErrors:f,props:h}=s;h instanceof t.Name?o.if((0,t._)`${h} !== true`,()=>o.forIn("key",l,p=>o.if(_(h,p),()=>m(p)))):h!==!0&&o.forIn("key",l,p=>h===void 0?m(p):o.if($(h,p),()=>m(p))),s.props=!0,i.ok((0,t._)`${u} === ${r.default.errors}`);function m(p){if(c===!1){i.setParams({unevaluatedProperty:p}),i.error(),f||o.break();return}if(!(0,e.alwaysValidSchema)(s,c)){const v=o.name("valid");i.subschema({keyword:"unevaluatedProperties",dataProp:p,dataPropType:e.Type.Str},v),f||o.if((0,t.not)(v),()=>o.break())}}function _(p,v){return(0,t._)`!${p} || !${p}[${v}]`}function $(p,v){const d=[];for(const g in p)p[g]===!0&&d.push((0,t._)`${v} !== ${g}`);return(0,t.and)(...d)}}};return ir.default=a,ir}var ar={},Ti;function zc(){if(Ti)return ar;Ti=1,Object.defineProperty(ar,"__esModule",{value:!0});const t=Z(),e=ne(),n={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:{message:({params:{len:a}})=>(0,t.str)`must NOT have more than ${a} items`,params:({params:{len:a}})=>(0,t._)`{limit: ${a}}`},code(a){const{gen:i,schema:o,data:c,it:l}=a,u=l.items||0;if(u===!0)return;const s=i.const("len",(0,t._)`${c}.length`);if(o===!1)a.setParams({len:u}),a.fail((0,t._)`${s} > ${u}`);else if(typeof o=="object"&&!(0,e.alwaysValidSchema)(l,o)){const h=i.var("valid",(0,t._)`${s} <= ${u}`);i.if((0,t.not)(h),()=>f(h,u)),a.ok(h)}l.items=!0;function f(h,m){i.forRange("i",m,s,_=>{a.subschema({keyword:"unevaluatedItems",dataProp:_,dataPropType:e.Type.Num},h),l.allErrors||i.if((0,t.not)(h),()=>i.break())})}}};return ar.default=n,ar}var Ai;function Gc(){if(Ai)return sr;Ai=1,Object.defineProperty(sr,"__esModule",{value:!0});const t=Uc(),e=zc(),r=[t.default,e.default];return sr.default=r,sr}var or={},cr={},ji;function Kc(){if(ji)return cr;ji=1,Object.defineProperty(cr,"__esModule",{value:!0});const t=Z(),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:n})=>(0,t.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,t._)`{format: ${n}}`},code(n,a){const{gen:i,data:o,$data:c,schema:l,schemaCode:u,it:s}=n,{opts:f,errSchemaPath:h,schemaEnv:m,self:_}=s;if(!f.validateFormats)return;c?$():p();function $(){const v=i.scopeValue("formats",{ref:_.formats,code:f.code.formats}),d=i.const("fDef",(0,t._)`${v}[${u}]`),g=i.let("fType"),S=i.let("format");i.if((0,t._)`typeof ${d} == "object" && !(${d} instanceof RegExp)`,()=>i.assign(g,(0,t._)`${d}.type || "string"`).assign(S,(0,t._)`${d}.validate`),()=>i.assign(g,(0,t._)`"string"`).assign(S,d)),n.fail$data((0,t.or)(y(),E()));function y(){return f.strictSchema===!1?t.nil:(0,t._)`${u} && !${S}`}function E(){const b=m.$async?(0,t._)`(${d}.async ? await ${S}(${o}) : ${S}(${o}))`:(0,t._)`${S}(${o})`,O=(0,t._)`(typeof ${S} == "function" ? ${b} : ${S}.test(${o}))`;return(0,t._)`${S} && ${S} !== true && ${g} === ${a} && !${O}`}}function p(){const v=_.formats[l];if(!v){y();return}if(v===!0)return;const[d,g,S]=E(v);d===a&&n.pass(b());function y(){if(f.strictSchema===!1){_.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${l}" ignored in schema at path "${h}"`}}function E(O){const L=O instanceof RegExp?(0,t.regexpCode)(O):f.code.formats?(0,t._)`${f.code.formats}${(0,t.getProperty)(l)}`:void 0,G=i.scopeValue("formats",{key:l,ref:O,code:L});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,t._)`${G}.validate`]:["string",O,G]}function b(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!m.$async)throw new Error("async format in sync schema");return(0,t._)`await ${S}(${o})`}return typeof g=="function"?(0,t._)`${S}(${o})`:(0,t._)`${S}.test(${o})`}}}};return cr.default=r,cr}var ki;function lo(){if(ki)return or;ki=1,Object.defineProperty(or,"__esModule",{value:!0});const e=[Kc().default];return or.default=e,or}var He={},Ci;function fo(){return Ci||(Ci=1,Object.defineProperty(He,"__esModule",{value:!0}),He.contentVocabulary=He.metadataVocabulary=void 0,He.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],He.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),He}var qi;function xc(){if(qi)return wt;qi=1,Object.defineProperty(wt,"__esModule",{value:!0});const t=ro(),e=no(),r=oo(),n=Mc(),a=Vc(),i=Gc(),o=lo(),c=fo(),l=[n.default,t.default,e.default,(0,r.default)(!0),o.default,c.metadataVocabulary,c.contentVocabulary,a.default,i.default];return wt.default=l,wt}var ur={},ut={},Mi;function Hc(){if(Mi)return ut;Mi=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.DiscrError=void 0;var t;return(function(e){e.Tag="tag",e.Mapping="mapping"})(t||(ut.DiscrError=t={})),ut}var Di;function ho(){if(Di)return ur;Di=1,Object.defineProperty(ur,"__esModule",{value:!0});const t=Z(),e=Hc(),r=Rr(),n=dt(),a=ne(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:c,tagName:l}})=>c===e.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:c,tag:l,tagName:u}})=>(0,t._)`{error: ${c}, tag: ${u}, tagValue: ${l}}`},code(c){const{gen:l,data:u,schema:s,parentSchema:f,it:h}=c,{oneOf:m}=f;if(!h.opts.discriminator)throw new Error("discriminator: requires discriminator option");const _=s.propertyName;if(typeof _!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!m)throw new Error("discriminator: requires oneOf keyword");const $=l.let("valid",!1),p=l.const("tag",(0,t._)`${u}${(0,t.getProperty)(_)}`);l.if((0,t._)`typeof ${p} == "string"`,()=>v(),()=>c.error(!1,{discrError:e.DiscrError.Tag,tag:p,tagName:_})),c.ok($);function v(){const S=g();l.if(!1);for(const y in S)l.elseIf((0,t._)`${p} === ${y}`),l.assign($,d(S[y]));l.else(),c.error(!1,{discrError:e.DiscrError.Mapping,tag:p,tagName:_}),l.endIf()}function d(S){const y=l.name("valid"),E=c.subschema({keyword:"oneOf",schemaProp:S},y);return c.mergeEvaluated(E,t.Name),y}function g(){var S;const y={},E=O(f);let b=!0;for(let q=0;q<m.length;q++){let V=m[q];if(V?.$ref&&!(0,a.schemaHasRulesButRef)(V,h.self.RULES)){const j=V.$ref;if(V=r.resolveRef.call(h.self,h.schemaEnv.root,h.baseId,j),V instanceof r.SchemaEnv&&(V=V.schema),V===void 0)throw new n.default(h.opts.uriResolver,h.baseId,j)}const K=(S=V?.properties)===null||S===void 0?void 0:S[_];if(typeof K!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${_}"`);b=b&&(E||O(V)),L(K,q)}if(!b)throw new Error(`discriminator: "${_}" must be required`);return y;function O({required:q}){return Array.isArray(q)&&q.includes(_)}function L(q,V){if(q.const)G(q.const,V);else if(q.enum)for(const K of q.enum)G(K,V);else throw new Error(`discriminator: "properties/${_}" must have "const" or "enum"`)}function G(q,V){if(typeof q!="string"||q in y)throw new Error(`discriminator: "${_}" values must be unique strings`);y[q]=V}}}};return ur.default=o,ur}var lr={};const Bc="https://json-schema.org/draft/2020-12/schema",Xc="https://json-schema.org/draft/2020-12/schema",Wc={"https://json-schema.org/draft/2020-12/vocab/core":!0,"https://json-schema.org/draft/2020-12/vocab/applicator":!0,"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0,"https://json-schema.org/draft/2020-12/vocab/validation":!0,"https://json-schema.org/draft/2020-12/vocab/meta-data":!0,"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0,"https://json-schema.org/draft/2020-12/vocab/content":!0},Jc="meta",Yc="Core and Validation specifications meta-schema",Zc=[{$ref:"meta/core"},{$ref:"meta/applicator"},{$ref:"meta/unevaluated"},{$ref:"meta/validation"},{$ref:"meta/meta-data"},{$ref:"meta/format-annotation"},{$ref:"meta/content"}],Qc=["object","boolean"],eu="This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.",tu={definitions:{$comment:'"definitions" has been replaced by "$defs".',type:"object",additionalProperties:{$dynamicRef:"#meta"},deprecated:!0,default:{}},dependencies:{$comment:'"dependencies" has been split and replaced by "dependentSchemas" and "dependentRequired" in order to serve their differing semantics.',type:"object",additionalProperties:{anyOf:[{$dynamicRef:"#meta"},{$ref:"meta/validation#/$defs/stringArray"}]},deprecated:!0,default:{}},$recursiveAnchor:{$comment:'"$recursiveAnchor" has been replaced by "$dynamicAnchor".',$ref:"meta/core#/$defs/anchorString",deprecated:!0},$recursiveRef:{$comment:'"$recursiveRef" has been replaced by "$dynamicRef".',$ref:"meta/core#/$defs/uriReferenceString",deprecated:!0}},ru={$schema:Bc,$id:Xc,$vocabulary:Wc,$dynamicAnchor:Jc,title:Yc,allOf:Zc,type:Qc,$comment:eu,properties:tu},nu="https://json-schema.org/draft/2020-12/schema",su="https://json-schema.org/draft/2020-12/meta/applicator",iu={"https://json-schema.org/draft/2020-12/vocab/applicator":!0},au="meta",ou="Applicator vocabulary meta-schema",cu=["object","boolean"],uu={prefixItems:{$ref:"#/$defs/schemaArray"},items:{$dynamicRef:"#meta"},contains:{$dynamicRef:"#meta"},additionalProperties:{$dynamicRef:"#meta"},properties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},patternProperties:{type:"object",additionalProperties:{$dynamicRef:"#meta"},propertyNames:{format:"regex"},default:{}},dependentSchemas:{type:"object",additionalProperties:{$dynamicRef:"#meta"},default:{}},propertyNames:{$dynamicRef:"#meta"},if:{$dynamicRef:"#meta"},then:{$dynamicRef:"#meta"},else:{$dynamicRef:"#meta"},allOf:{$ref:"#/$defs/schemaArray"},anyOf:{$ref:"#/$defs/schemaArray"},oneOf:{$ref:"#/$defs/schemaArray"},not:{$dynamicRef:"#meta"}},lu={schemaArray:{type:"array",minItems:1,items:{$dynamicRef:"#meta"}}},du={$schema:nu,$id:su,$vocabulary:iu,$dynamicAnchor:au,title:ou,type:cu,properties:uu,$defs:lu},fu="https://json-schema.org/draft/2020-12/schema",hu="https://json-schema.org/draft/2020-12/meta/unevaluated",pu={"https://json-schema.org/draft/2020-12/vocab/unevaluated":!0},mu="meta",yu="Unevaluated applicator vocabulary meta-schema",gu=["object","boolean"],vu={unevaluatedItems:{$dynamicRef:"#meta"},unevaluatedProperties:{$dynamicRef:"#meta"}},_u={$schema:fu,$id:hu,$vocabulary:pu,$dynamicAnchor:mu,title:yu,type:gu,properties:vu},$u="https://json-schema.org/draft/2020-12/schema",wu="https://json-schema.org/draft/2020-12/meta/content",Eu={"https://json-schema.org/draft/2020-12/vocab/content":!0},Su="meta",bu="Content vocabulary meta-schema",Ru=["object","boolean"],Pu={contentEncoding:{type:"string"},contentMediaType:{type:"string"},contentSchema:{$dynamicRef:"#meta"}},Iu={$schema:$u,$id:wu,$vocabulary:Eu,$dynamicAnchor:Su,title:bu,type:Ru,properties:Pu},Nu="https://json-schema.org/draft/2020-12/schema",Ou="https://json-schema.org/draft/2020-12/meta/core",Tu={"https://json-schema.org/draft/2020-12/vocab/core":!0},Au="meta",ju="Core vocabulary meta-schema",ku=["object","boolean"],Cu={$id:{$ref:"#/$defs/uriReferenceString",$comment:"Non-empty fragments not allowed.",pattern:"^[^#]*#?$"},$schema:{$ref:"#/$defs/uriString"},$ref:{$ref:"#/$defs/uriReferenceString"},$anchor:{$ref:"#/$defs/anchorString"},$dynamicRef:{$ref:"#/$defs/uriReferenceString"},$dynamicAnchor:{$ref:"#/$defs/anchorString"},$vocabulary:{type:"object",propertyNames:{$ref:"#/$defs/uriString"},additionalProperties:{type:"boolean"}},$comment:{type:"string"},$defs:{type:"object",additionalProperties:{$dynamicRef:"#meta"}}},qu={anchorString:{type:"string",pattern:"^[A-Za-z_][-A-Za-z0-9._]*$"},uriString:{type:"string",format:"uri"},uriReferenceString:{type:"string",format:"uri-reference"}},Mu={$schema:Nu,$id:Ou,$vocabulary:Tu,$dynamicAnchor:Au,title:ju,type:ku,properties:Cu,$defs:qu},Du="https://json-schema.org/draft/2020-12/schema",Lu="https://json-schema.org/draft/2020-12/meta/format-annotation",Fu={"https://json-schema.org/draft/2020-12/vocab/format-annotation":!0},Vu="meta",Uu="Format vocabulary meta-schema for annotation results",zu=["object","boolean"],Gu={format:{type:"string"}},Ku={$schema:Du,$id:Lu,$vocabulary:Fu,$dynamicAnchor:Vu,title:Uu,type:zu,properties:Gu},xu="https://json-schema.org/draft/2020-12/schema",Hu="https://json-schema.org/draft/2020-12/meta/meta-data",Bu={"https://json-schema.org/draft/2020-12/vocab/meta-data":!0},Xu="meta",Wu="Meta-data vocabulary meta-schema",Ju=["object","boolean"],Yu={title:{type:"string"},description:{type:"string"},default:!0,deprecated:{type:"boolean",default:!1},readOnly:{type:"boolean",default:!1},writeOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0}},Zu={$schema:xu,$id:Hu,$vocabulary:Bu,$dynamicAnchor:Xu,title:Wu,type:Ju,properties:Yu},Qu="https://json-schema.org/draft/2020-12/schema",el="https://json-schema.org/draft/2020-12/meta/validation",tl={"https://json-schema.org/draft/2020-12/vocab/validation":!0},rl="meta",nl="Validation vocabulary meta-schema",sl=["object","boolean"],il={type:{anyOf:[{$ref:"#/$defs/simpleTypes"},{type:"array",items:{$ref:"#/$defs/simpleTypes"},minItems:1,uniqueItems:!0}]},const:!0,enum:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/$defs/nonNegativeInteger"},minLength:{$ref:"#/$defs/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},maxItems:{$ref:"#/$defs/nonNegativeInteger"},minItems:{$ref:"#/$defs/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxContains:{$ref:"#/$defs/nonNegativeInteger"},minContains:{$ref:"#/$defs/nonNegativeInteger",default:1},maxProperties:{$ref:"#/$defs/nonNegativeInteger"},minProperties:{$ref:"#/$defs/nonNegativeIntegerDefault0"},required:{$ref:"#/$defs/stringArray"},dependentRequired:{type:"object",additionalProperties:{$ref:"#/$defs/stringArray"}}},al={nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{$ref:"#/$defs/nonNegativeInteger",default:0},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},ol={$schema:Qu,$id:el,$vocabulary:tl,$dynamicAnchor:rl,title:nl,type:sl,properties:il,$defs:al};var Li;function cl(){if(Li)return lr;Li=1,Object.defineProperty(lr,"__esModule",{value:!0});const t=ru,e=du,r=_u,n=Iu,a=Mu,i=Ku,o=Zu,c=ol,l=["/properties"];function u(s){return[t,e,r,n,a,f(this,i),o,f(this,c)].forEach(h=>this.addMetaSchema(h,void 0,!1)),this;function f(h,m){return s?h.$dataMetaSchema(m,l):m}}return lr.default=u,lr}var Fi;function ul(){return Fi||(Fi=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv2020=void 0;const r=to(),n=xc(),a=ho(),i=cl(),o="https://json-schema.org/draft/2020-12/schema";class c extends r.default{constructor(m={}){super({...m,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),n.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:m,meta:_}=this.opts;_&&(i.default.call(this,m),this.refs["http://json-schema.org/schema"]=o)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}e.Ajv2020=c,t.exports=e=c,t.exports.Ajv2020=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var l=lt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var u=Z();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var s=br();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return s.default}});var f=dt();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return f.default}})})(yt,yt.exports)),yt.exports}var ll=ul(),dr={exports:{}},Xr={},Vi;function dl(){return Vi||(Vi=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(q,V){return{validate:q,compare:V}}t.fullFormats={date:e(i,o),time:e(l(!0),u),"date-time":e(h(!0),m),"iso-time":e(l(),s),"iso-date-time":e(h(),_),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:v,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:G,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:g,int32:{type:"number",validate:E},int64:{type:"number",validate:b},float:{type:"number",validate:O},double:{type:"number",validate:O},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,m),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,s),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,_),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function r(q){return q%4===0&&(q%100!==0||q%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(q){const V=n.exec(q);if(!V)return!1;const K=+V[1],j=+V[2],M=+V[3];return j>=1&&j<=12&&M>=1&&M<=(j===2&&r(K)?29:a[j])}function o(q,V){if(q&&V)return q>V?1:q<V?-1:0}const c=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(q){return function(K){const j=c.exec(K);if(!j)return!1;const M=+j[1],B=+j[2],x=+j[3],U=j[4],H=j[5]==="-"?-1:1,k=+(j[6]||0),P=+(j[7]||0);if(k>23||P>59||q&&!U)return!1;if(M<=23&&B<=59&&x<60)return!0;const A=B-P*H,I=M-k*H-(A<0?1:0);return(I===23||I===-1)&&(A===59||A===-1)&&x<61}}function u(q,V){if(!(q&&V))return;const K=new Date("2020-01-01T"+q).valueOf(),j=new Date("2020-01-01T"+V).valueOf();if(K&&j)return K-j}function s(q,V){if(!(q&&V))return;const K=c.exec(q),j=c.exec(V);if(K&&j)return q=K[1]+K[2]+K[3],V=j[1]+j[2]+j[3],q>V?1:q<V?-1:0}const f=/t|\s/i;function h(q){const V=l(q);return function(j){const M=j.split(f);return M.length===2&&i(M[0])&&V(M[1])}}function m(q,V){if(!(q&&V))return;const K=new Date(q).valueOf(),j=new Date(V).valueOf();if(K&&j)return K-j}function _(q,V){if(!(q&&V))return;const[K,j]=q.split(f),[M,B]=V.split(f),x=o(K,M);if(x!==void 0)return x||u(j,B)}const $=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function v(q){return $.test(q)&&p.test(q)}const d=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function g(q){return d.lastIndex=0,d.test(q)}const S=-2147483648,y=2**31-1;function E(q){return Number.isInteger(q)&&q<=y&&q>=S}function b(q){return Number.isInteger(q)}function O(){return!0}const L=/[^\\]\\Z/;function G(q){if(L.test(q))return!1;try{return new RegExp(q),!0}catch{return!1}}})(Xr)),Xr}var Wr={},fr={exports:{}},hr={},Ui;function fl(){if(Ui)return hr;Ui=1,Object.defineProperty(hr,"__esModule",{value:!0});const t=ro(),e=no(),r=oo(),n=lo(),a=fo(),i=[t.default,e.default,(0,r.default)(),n.default,a.metadataVocabulary,a.contentVocabulary];return hr.default=i,hr}const hl="http://json-schema.org/draft-07/schema#",pl="http://json-schema.org/draft-07/schema#",ml="Core schema meta-schema",yl={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},gl=["object","boolean"],vl={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},_l={$schema:hl,$id:pl,title:ml,definitions:yl,type:gl,properties:vl,default:!0};var zi;function $l(){return zi||(zi=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=to(),n=fl(),a=ho(),i=_l,o=["/properties"],c="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(_,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}e.Ajv=l,t.exports=e=l,t.exports.Ajv=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var u=lt();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var s=Z();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});var f=br();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var h=dt();Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(fr,fr.exports)),fr.exports}var Gi;function wl(){return Gi||(Gi=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=$l(),r=Z(),n=r.operators,a={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},i={message:({keyword:c,schemaCode:l})=>(0,r.str)`should be ${a[c].okStr} ${l}`,params:({keyword:c,schemaCode:l})=>(0,r._)`{comparison: ${a[c].okStr}, limit: ${l}}`};t.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:i,code(c){const{gen:l,data:u,schemaCode:s,keyword:f,it:h}=c,{opts:m,self:_}=h;if(!m.validateFormats)return;const $=new e.KeywordCxt(h,_.RULES.all.format.definition,"format");$.$data?p():v();function p(){const g=l.scopeValue("formats",{ref:_.formats,code:m.code.formats}),S=l.const("fmt",(0,r._)`${g}[${$.schemaCode}]`);c.fail$data((0,r.or)((0,r._)`typeof ${S} != "object"`,(0,r._)`${S} instanceof RegExp`,(0,r._)`typeof ${S}.compare != "function"`,d(S)))}function v(){const g=$.schema,S=_.formats[g];if(!S||S===!0)return;if(typeof S!="object"||S instanceof RegExp||typeof S.compare!="function")throw new Error(`"${f}": format "${g}" does not define "compare" function`);const y=l.scopeValue("formats",{key:g,ref:S,code:m.code.formats?(0,r._)`${m.code.formats}${(0,r.getProperty)(g)}`:void 0});c.fail$data(d(y))}function d(g){return(0,r._)`${g}.compare(${u}, ${s}) ${a[f].fail} 0`}},dependencies:["format"]};const o=c=>(c.addKeyword(t.formatLimitDefinition),c);t.default=o})(Wr)),Wr}var Ki;function El(){return Ki||(Ki=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=dl(),n=wl(),a=Z(),i=new a.Name("fullFormats"),o=new a.Name("fastFormats"),c=(u,s={keywords:!0})=>{if(Array.isArray(s))return l(u,s,r.fullFormats,i),u;const[f,h]=s.mode==="fast"?[r.fastFormats,o]:[r.fullFormats,i],m=s.formats||r.formatNames;return l(u,m,f,h),s.keywords&&(0,n.default)(u),u};c.get=(u,s="full")=>{const h=(s==="fast"?r.fastFormats:r.fullFormats)[u];if(!h)throw new Error(`Unknown format "${u}"`);return h};function l(u,s,f,h){var m,_;(m=(_=u.opts.code).formats)!==null&&m!==void 0||(_.formats=(0,a._)`require("ajv-formats/dist/formats").${h}`);for(const $ of s)u.addFormat($,f[$])}t.exports=e=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c})(dr,dr.exports)),dr.exports}var Sl=El();const bl=Ja(Sl),Rl=(t,e,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;const a=Object.getOwnPropertyDescriptor(t,r),i=Object.getOwnPropertyDescriptor(e,r);!Pl(a,i)&&n||Object.defineProperty(t,r,i)},Pl=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},Il=(t,e)=>{const r=Object.getPrototypeOf(e);r!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,r)},Nl=(t,e)=>`/* Wrapped ${t}*/
${e}`,Ol=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Tl=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Al=(t,e,r)=>{const n=r===""?"":`with ${r.trim()}() `,a=Nl.bind(null,n,e.toString());Object.defineProperty(a,"name",Tl);const{writable:i,enumerable:o,configurable:c}=Ol;Object.defineProperty(t,"toString",{value:a,writable:i,enumerable:o,configurable:c})};function jl(t,e,{ignoreNonConfigurable:r=!1}={}){const{name:n}=t;for(const a of Reflect.ownKeys(e))Rl(t,e,a,r);return Il(t,e),Al(t,e,n),t}const xi=(t,e={})=>{if(typeof t!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof t}\``);const{wait:r=0,maxWait:n=Number.POSITIVE_INFINITY,before:a=!1,after:i=!0}=e;if(r<0||n<0)throw new RangeError("`wait` and `maxWait` must not be negative.");if(!a&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let o,c,l;const u=function(...s){const f=this,h=()=>{o=void 0,c&&(clearTimeout(c),c=void 0),i&&(l=t.apply(f,s))},m=()=>{c=void 0,o&&(clearTimeout(o),o=void 0),i&&(l=t.apply(f,s))},_=a&&!o;return clearTimeout(o),o=setTimeout(h,r),n>0&&n!==Number.POSITIVE_INFINITY&&!c&&(c=setTimeout(m,n)),_&&(l=t.apply(f,s)),l};return jl(u,t),u.cancel=()=>{o&&(clearTimeout(o),o=void 0),c&&(clearTimeout(c),c=void 0)},u};var pr={exports:{}},Jr,Hi;function Pr(){if(Hi)return Jr;Hi=1;const t="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,a=e-6;return Jr={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Jr}var Yr,Bi;function Ir(){return Bi||(Bi=1,Yr=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),Yr}var Xi;function ft(){return Xi||(Xi=1,(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=Pr(),i=Ir();e=t.exports={};const o=e.re=[],c=e.safeRe=[],l=e.src=[],u=e.safeSrc=[],s=e.t={};let f=0;const h="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",a],[h,n]],_=p=>{for(const[v,d]of m)p=p.split(`${v}*`).join(`${v}{0,${d}}`).split(`${v}+`).join(`${v}{1,${d}}`);return p},$=(p,v,d)=>{const g=_(v),S=f++;i(p,S,v),s[p]=S,l[S]=v,u[S]=g,o[S]=new RegExp(v,d?"g":void 0),c[S]=new RegExp(g,d?"g":void 0)};$("NUMERICIDENTIFIER","0|[1-9]\\d*"),$("NUMERICIDENTIFIERLOOSE","\\d+"),$("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),$("MAINVERSION",`(${l[s.NUMERICIDENTIFIER]})\\.(${l[s.NUMERICIDENTIFIER]})\\.(${l[s.NUMERICIDENTIFIER]})`),$("MAINVERSIONLOOSE",`(${l[s.NUMERICIDENTIFIERLOOSE]})\\.(${l[s.NUMERICIDENTIFIERLOOSE]})\\.(${l[s.NUMERICIDENTIFIERLOOSE]})`),$("PRERELEASEIDENTIFIER",`(?:${l[s.NONNUMERICIDENTIFIER]}|${l[s.NUMERICIDENTIFIER]})`),$("PRERELEASEIDENTIFIERLOOSE",`(?:${l[s.NONNUMERICIDENTIFIER]}|${l[s.NUMERICIDENTIFIERLOOSE]})`),$("PRERELEASE",`(?:-(${l[s.PRERELEASEIDENTIFIER]}(?:\\.${l[s.PRERELEASEIDENTIFIER]})*))`),$("PRERELEASELOOSE",`(?:-?(${l[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[s.PRERELEASEIDENTIFIERLOOSE]})*))`),$("BUILDIDENTIFIER",`${h}+`),$("BUILD",`(?:\\+(${l[s.BUILDIDENTIFIER]}(?:\\.${l[s.BUILDIDENTIFIER]})*))`),$("FULLPLAIN",`v?${l[s.MAINVERSION]}${l[s.PRERELEASE]}?${l[s.BUILD]}?`),$("FULL",`^${l[s.FULLPLAIN]}$`),$("LOOSEPLAIN",`[v=\\s]*${l[s.MAINVERSIONLOOSE]}${l[s.PRERELEASELOOSE]}?${l[s.BUILD]}?`),$("LOOSE",`^${l[s.LOOSEPLAIN]}$`),$("GTLT","((?:<|>)?=?)"),$("XRANGEIDENTIFIERLOOSE",`${l[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),$("XRANGEIDENTIFIER",`${l[s.NUMERICIDENTIFIER]}|x|X|\\*`),$("XRANGEPLAIN",`[v=\\s]*(${l[s.XRANGEIDENTIFIER]})(?:\\.(${l[s.XRANGEIDENTIFIER]})(?:\\.(${l[s.XRANGEIDENTIFIER]})(?:${l[s.PRERELEASE]})?${l[s.BUILD]}?)?)?`),$("XRANGEPLAINLOOSE",`[v=\\s]*(${l[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[s.XRANGEIDENTIFIERLOOSE]})(?:${l[s.PRERELEASELOOSE]})?${l[s.BUILD]}?)?)?`),$("XRANGE",`^${l[s.GTLT]}\\s*${l[s.XRANGEPLAIN]}$`),$("XRANGELOOSE",`^${l[s.GTLT]}\\s*${l[s.XRANGEPLAINLOOSE]}$`),$("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),$("COERCE",`${l[s.COERCEPLAIN]}(?:$|[^\\d])`),$("COERCEFULL",l[s.COERCEPLAIN]+`(?:${l[s.PRERELEASE]})?(?:${l[s.BUILD]})?(?:$|[^\\d])`),$("COERCERTL",l[s.COERCE],!0),$("COERCERTLFULL",l[s.COERCEFULL],!0),$("LONETILDE","(?:~>?)"),$("TILDETRIM",`(\\s*)${l[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",$("TILDE",`^${l[s.LONETILDE]}${l[s.XRANGEPLAIN]}$`),$("TILDELOOSE",`^${l[s.LONETILDE]}${l[s.XRANGEPLAINLOOSE]}$`),$("LONECARET","(?:\\^)"),$("CARETTRIM",`(\\s*)${l[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",$("CARET",`^${l[s.LONECARET]}${l[s.XRANGEPLAIN]}$`),$("CARETLOOSE",`^${l[s.LONECARET]}${l[s.XRANGEPLAINLOOSE]}$`),$("COMPARATORLOOSE",`^${l[s.GTLT]}\\s*(${l[s.LOOSEPLAIN]})$|^$`),$("COMPARATOR",`^${l[s.GTLT]}\\s*(${l[s.FULLPLAIN]})$|^$`),$("COMPARATORTRIM",`(\\s*)${l[s.GTLT]}\\s*(${l[s.LOOSEPLAIN]}|${l[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",$("HYPHENRANGE",`^\\s*(${l[s.XRANGEPLAIN]})\\s+-\\s+(${l[s.XRANGEPLAIN]})\\s*$`),$("HYPHENRANGELOOSE",`^\\s*(${l[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[s.XRANGEPLAINLOOSE]})\\s*$`),$("STAR","(<|>)?=?\\s*\\*"),$("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),$("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(pr,pr.exports)),pr.exports}var Zr,Wi;function es(){if(Wi)return Zr;Wi=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return Zr=n=>n?typeof n!="object"?t:n:e,Zr}var Qr,Ji;function po(){if(Ji)return Qr;Ji=1;const t=/^[0-9]+$/,e=(n,a)=>{if(typeof n=="number"&&typeof a=="number")return n===a?0:n<a?-1:1;const i=t.test(n),o=t.test(a);return i&&o&&(n=+n,a=+a),n===a?0:i&&!o?-1:o&&!i?1:n<a?-1:1};return Qr={compareIdentifiers:e,rcompareIdentifiers:(n,a)=>e(a,n)},Qr}var en,Yi;function ge(){if(Yi)return en;Yi=1;const t=Ir(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=Pr(),{safeRe:n,t:a}=ft(),i=es(),{compareIdentifiers:o}=po();class c{constructor(u,s){if(s=i(s),u instanceof c){if(u.loose===!!s.loose&&u.includePrerelease===!!s.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",u,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const f=u.trim().match(s.loose?n[a.LOOSE]:n[a.FULL]);if(!f)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const m=+h;if(m>=0&&m<r)return m}return h}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(t("SemVer.compare",this.version,this.options,u),!(u instanceof c)){if(typeof u=="string"&&u===this.version)return 0;u=new c(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof c||(u=new c(u,this.options)),this.major<u.major?-1:this.major>u.major?1:this.minor<u.minor?-1:this.minor>u.minor?1:this.patch<u.patch?-1:this.patch>u.patch?1:0}comparePre(u){if(u instanceof c||(u=new c(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let s=0;do{const f=this.prerelease[s],h=u.prerelease[s];if(t("prerelease compare",s,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return o(f,h)}while(++s)}compareBuild(u){u instanceof c||(u=new c(u,this.options));let s=0;do{const f=this.build[s],h=u.build[s];if(t("build compare",s,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return o(f,h)}while(++s)}inc(u,s,f){if(u.startsWith("pre")){if(!s&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(s){const h=`-${s}`.match(this.options.loose?n[a.PRERELEASELOOSE]:n[a.PRERELEASE]);if(!h||h[1]!==s)throw new Error(`invalid identifier: ${s}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",s,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",s,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",s,f),this.inc("pre",s,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",s,f),this.inc("pre",s,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(s===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(s){let m=[s,h];f===!1&&(m=[s]),o(this.prerelease[0],s)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return en=c,en}var tn,Zi;function st(){if(Zi)return tn;Zi=1;const t=ge();return tn=(r,n,a=!1)=>{if(r instanceof t)return r;try{return new t(r,n)}catch(i){if(!a)return null;throw i}},tn}var rn,Qi;function kl(){if(Qi)return rn;Qi=1;const t=st();return rn=(r,n)=>{const a=t(r,n);return a?a.version:null},rn}var nn,ea;function Cl(){if(ea)return nn;ea=1;const t=st();return nn=(r,n)=>{const a=t(r.trim().replace(/^[=v]+/,""),n);return a?a.version:null},nn}var sn,ta;function ql(){if(ta)return sn;ta=1;const t=ge();return sn=(r,n,a,i,o)=>{typeof a=="string"&&(o=i,i=a,a=void 0);try{return new t(r instanceof t?r.version:r,a).inc(n,i,o).version}catch{return null}},sn}var an,ra;function Ml(){if(ra)return an;ra=1;const t=st();return an=(r,n)=>{const a=t(r,null,!0),i=t(n,null,!0),o=a.compare(i);if(o===0)return null;const c=o>0,l=c?a:i,u=c?i:a,s=!!l.prerelease.length;if(!!u.prerelease.length&&!s){if(!u.patch&&!u.minor)return"major";if(u.compareMain(l)===0)return u.minor&&!u.patch?"minor":"patch"}const h=s?"pre":"";return a.major!==i.major?h+"major":a.minor!==i.minor?h+"minor":a.patch!==i.patch?h+"patch":"prerelease"},an}var on,na;function Dl(){if(na)return on;na=1;const t=ge();return on=(r,n)=>new t(r,n).major,on}var cn,sa;function Ll(){if(sa)return cn;sa=1;const t=ge();return cn=(r,n)=>new t(r,n).minor,cn}var un,ia;function Fl(){if(ia)return un;ia=1;const t=ge();return un=(r,n)=>new t(r,n).patch,un}var ln,aa;function Vl(){if(aa)return ln;aa=1;const t=st();return ln=(r,n)=>{const a=t(r,n);return a&&a.prerelease.length?a.prerelease:null},ln}var dn,oa;function Oe(){if(oa)return dn;oa=1;const t=ge();return dn=(r,n,a)=>new t(r,a).compare(new t(n,a)),dn}var fn,ca;function Ul(){if(ca)return fn;ca=1;const t=Oe();return fn=(r,n,a)=>t(n,r,a),fn}var hn,ua;function zl(){if(ua)return hn;ua=1;const t=Oe();return hn=(r,n)=>t(r,n,!0),hn}var pn,la;function ts(){if(la)return pn;la=1;const t=ge();return pn=(r,n,a)=>{const i=new t(r,a),o=new t(n,a);return i.compare(o)||i.compareBuild(o)},pn}var mn,da;function Gl(){if(da)return mn;da=1;const t=ts();return mn=(r,n)=>r.sort((a,i)=>t(a,i,n)),mn}var yn,fa;function Kl(){if(fa)return yn;fa=1;const t=ts();return yn=(r,n)=>r.sort((a,i)=>t(i,a,n)),yn}var gn,ha;function Nr(){if(ha)return gn;ha=1;const t=Oe();return gn=(r,n,a)=>t(r,n,a)>0,gn}var vn,pa;function rs(){if(pa)return vn;pa=1;const t=Oe();return vn=(r,n,a)=>t(r,n,a)<0,vn}var _n,ma;function mo(){if(ma)return _n;ma=1;const t=Oe();return _n=(r,n,a)=>t(r,n,a)===0,_n}var $n,ya;function yo(){if(ya)return $n;ya=1;const t=Oe();return $n=(r,n,a)=>t(r,n,a)!==0,$n}var wn,ga;function ns(){if(ga)return wn;ga=1;const t=Oe();return wn=(r,n,a)=>t(r,n,a)>=0,wn}var En,va;function ss(){if(va)return En;va=1;const t=Oe();return En=(r,n,a)=>t(r,n,a)<=0,En}var Sn,_a;function go(){if(_a)return Sn;_a=1;const t=mo(),e=yo(),r=Nr(),n=ns(),a=rs(),i=ss();return Sn=(c,l,u,s)=>{switch(l){case"===":return typeof c=="object"&&(c=c.version),typeof u=="object"&&(u=u.version),c===u;case"!==":return typeof c=="object"&&(c=c.version),typeof u=="object"&&(u=u.version),c!==u;case"":case"=":case"==":return t(c,u,s);case"!=":return e(c,u,s);case">":return r(c,u,s);case">=":return n(c,u,s);case"<":return a(c,u,s);case"<=":return i(c,u,s);default:throw new TypeError(`Invalid operator: ${l}`)}},Sn}var bn,$a;function xl(){if($a)return bn;$a=1;const t=ge(),e=st(),{safeRe:r,t:n}=ft();return bn=(i,o)=>{if(i instanceof t)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;o=o||{};let c=null;if(!o.rtl)c=i.match(o.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const m=o.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let _;for(;(_=m.exec(i))&&(!c||c.index+c[0].length!==i.length);)(!c||_.index+_[0].length!==c.index+c[0].length)&&(c=_),m.lastIndex=_.index+_[1].length+_[2].length;m.lastIndex=-1}if(c===null)return null;const l=c[2],u=c[3]||"0",s=c[4]||"0",f=o.includePrerelease&&c[5]?`-${c[5]}`:"",h=o.includePrerelease&&c[6]?`+${c[6]}`:"";return e(`${l}.${u}.${s}${f}${h}`,o)},bn}var Rn,wa;function Hl(){if(wa)return Rn;wa=1;class t{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(r,n)}return this}}return Rn=t,Rn}var Pn,Ea;function Te(){if(Ea)return Pn;Ea=1;const t=/\s+/g;class e{constructor(M,B){if(B=a(B),M instanceof e)return M.loose===!!B.loose&&M.includePrerelease===!!B.includePrerelease?M:new e(M.raw,B);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.formatted=void 0,this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=M.trim().replace(t," "),this.set=this.raw.split("||").map(x=>this.parseRange(x.trim())).filter(x=>x.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const x=this.set[0];if(this.set=this.set.filter(U=>!$(U[0])),this.set.length===0)this.set=[x];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&p(U[0])){this.set=[U];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let M=0;M<this.set.length;M++){M>0&&(this.formatted+="||");const B=this.set[M];for(let x=0;x<B.length;x++)x>0&&(this.formatted+=" "),this.formatted+=B[x].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(M){const x=((this.options.includePrerelease&&m)|(this.options.loose&&_))+":"+M,U=n.get(x);if(U)return U;const H=this.options.loose,k=H?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];M=M.replace(k,V(this.options.includePrerelease)),o("hyphen replace",M),M=M.replace(l[u.COMPARATORTRIM],s),o("comparator trim",M),M=M.replace(l[u.TILDETRIM],f),o("tilde trim",M),M=M.replace(l[u.CARETTRIM],h),o("caret trim",M);let P=M.split(" ").map(R=>d(R,this.options)).join(" ").split(/\s+/).map(R=>q(R,this.options));H&&(P=P.filter(R=>(o("loose invalid filter",R,this.options),!!R.match(l[u.COMPARATORLOOSE])))),o("range list",P);const A=new Map,I=P.map(R=>new i(R,this.options));for(const R of I){if($(R))return[R];A.set(R.value,R)}A.size>1&&A.has("")&&A.delete("");const w=[...A.values()];return n.set(x,w),w}intersects(M,B){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(x=>v(x,B)&&M.set.some(U=>v(U,B)&&x.every(H=>U.every(k=>H.intersects(k,B)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new c(M,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(K(this.set[B],M,this.options))return!0;return!1}}Pn=e;const r=Hl(),n=new r,a=es(),i=Or(),o=Ir(),c=ge(),{safeRe:l,t:u,comparatorTrimReplace:s,tildeTrimReplace:f,caretTrimReplace:h}=ft(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:_}=Pr(),$=j=>j.value==="<0.0.0-0",p=j=>j.value==="",v=(j,M)=>{let B=!0;const x=j.slice();let U=x.pop();for(;B&&x.length;)B=x.every(H=>U.intersects(H,M)),U=x.pop();return B},d=(j,M)=>(j=j.replace(l[u.BUILD],""),o("comp",j,M),j=E(j,M),o("caret",j),j=S(j,M),o("tildes",j),j=O(j,M),o("xrange",j),j=G(j,M),o("stars",j),j),g=j=>!j||j.toLowerCase()==="x"||j==="*",S=(j,M)=>j.trim().split(/\s+/).map(B=>y(B,M)).join(" "),y=(j,M)=>{const B=M.loose?l[u.TILDELOOSE]:l[u.TILDE];return j.replace(B,(x,U,H,k,P)=>{o("tilde",j,x,U,H,k,P);let A;return g(U)?A="":g(H)?A=`>=${U}.0.0 <${+U+1}.0.0-0`:g(k)?A=`>=${U}.${H}.0 <${U}.${+H+1}.0-0`:P?(o("replaceTilde pr",P),A=`>=${U}.${H}.${k}-${P} <${U}.${+H+1}.0-0`):A=`>=${U}.${H}.${k} <${U}.${+H+1}.0-0`,o("tilde return",A),A})},E=(j,M)=>j.trim().split(/\s+/).map(B=>b(B,M)).join(" "),b=(j,M)=>{o("caret",j,M);const B=M.loose?l[u.CARETLOOSE]:l[u.CARET],x=M.includePrerelease?"-0":"";return j.replace(B,(U,H,k,P,A)=>{o("caret",j,U,H,k,P,A);let I;return g(H)?I="":g(k)?I=`>=${H}.0.0${x} <${+H+1}.0.0-0`:g(P)?H==="0"?I=`>=${H}.${k}.0${x} <${H}.${+k+1}.0-0`:I=`>=${H}.${k}.0${x} <${+H+1}.0.0-0`:A?(o("replaceCaret pr",A),H==="0"?k==="0"?I=`>=${H}.${k}.${P}-${A} <${H}.${k}.${+P+1}-0`:I=`>=${H}.${k}.${P}-${A} <${H}.${+k+1}.0-0`:I=`>=${H}.${k}.${P}-${A} <${+H+1}.0.0-0`):(o("no pr"),H==="0"?k==="0"?I=`>=${H}.${k}.${P}${x} <${H}.${k}.${+P+1}-0`:I=`>=${H}.${k}.${P}${x} <${H}.${+k+1}.0-0`:I=`>=${H}.${k}.${P} <${+H+1}.0.0-0`),o("caret return",I),I})},O=(j,M)=>(o("replaceXRanges",j,M),j.split(/\s+/).map(B=>L(B,M)).join(" ")),L=(j,M)=>{j=j.trim();const B=M.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return j.replace(B,(x,U,H,k,P,A)=>{o("xRange",j,x,U,H,k,P,A);const I=g(H),w=I||g(k),R=w||g(P),C=R;return U==="="&&C&&(U=""),A=M.includePrerelease?"-0":"",I?U===">"||U==="<"?x="<0.0.0-0":x="*":U&&C?(w&&(k=0),P=0,U===">"?(U=">=",w?(H=+H+1,k=0,P=0):(k=+k+1,P=0)):U==="<="&&(U="<",w?H=+H+1:k=+k+1),U==="<"&&(A="-0"),x=`${U+H}.${k}.${P}${A}`):w?x=`>=${H}.0.0${A} <${+H+1}.0.0-0`:R&&(x=`>=${H}.${k}.0${A} <${H}.${+k+1}.0-0`),o("xRange return",x),x})},G=(j,M)=>(o("replaceStars",j,M),j.trim().replace(l[u.STAR],"")),q=(j,M)=>(o("replaceGTE0",j,M),j.trim().replace(l[M.includePrerelease?u.GTE0PRE:u.GTE0],"")),V=j=>(M,B,x,U,H,k,P,A,I,w,R,C)=>(g(x)?B="":g(U)?B=`>=${x}.0.0${j?"-0":""}`:g(H)?B=`>=${x}.${U}.0${j?"-0":""}`:k?B=`>=${B}`:B=`>=${B}${j?"-0":""}`,g(I)?A="":g(w)?A=`<${+I+1}.0.0-0`:g(R)?A=`<${I}.${+w+1}.0-0`:C?A=`<=${I}.${w}.${R}-${C}`:j?A=`<${I}.${w}.${+R+1}-0`:A=`<=${A}`,`${B} ${A}`.trim()),K=(j,M,B)=>{for(let x=0;x<j.length;x++)if(!j[x].test(M))return!1;if(M.prerelease.length&&!B.includePrerelease){for(let x=0;x<j.length;x++)if(o(j[x].semver),j[x].semver!==i.ANY&&j[x].semver.prerelease.length>0){const U=j[x].semver;if(U.major===M.major&&U.minor===M.minor&&U.patch===M.patch)return!0}return!1}return!0};return Pn}var In,Sa;function Or(){if(Sa)return In;Sa=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(s,f){if(f=r(f),s instanceof e){if(s.loose===!!f.loose)return s;s=s.value}s=s.trim().split(/\s+/).join(" "),o("comparator",s,f),this.options=f,this.loose=!!f.loose,this.parse(s),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(s){const f=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],h=s.match(f);if(!h)throw new TypeError(`Invalid comparator: ${s}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new c(h[2],this.options.loose):this.semver=t}toString(){return this.value}test(s){if(o("Comparator.test",s,this.options.loose),this.semver===t||s===t)return!0;if(typeof s=="string")try{s=new c(s,this.options)}catch{return!1}return i(s,this.operator,this.semver,this.options)}intersects(s,f){if(!(s instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(s.value,f).test(this.value):s.operator===""?s.value===""?!0:new l(this.value,f).test(s.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||s.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||s.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&s.operator.startsWith(">")||this.operator.startsWith("<")&&s.operator.startsWith("<")||this.semver.version===s.semver.version&&this.operator.includes("=")&&s.operator.includes("=")||i(this.semver,"<",s.semver,f)&&this.operator.startsWith(">")&&s.operator.startsWith("<")||i(this.semver,">",s.semver,f)&&this.operator.startsWith("<")&&s.operator.startsWith(">")))}}In=e;const r=es(),{safeRe:n,t:a}=ft(),i=go(),o=Ir(),c=ge(),l=Te();return In}var Nn,ba;function Tr(){if(ba)return Nn;ba=1;const t=Te();return Nn=(r,n,a)=>{try{n=new t(n,a)}catch{return!1}return n.test(r)},Nn}var On,Ra;function Bl(){if(Ra)return On;Ra=1;const t=Te();return On=(r,n)=>new t(r,n).set.map(a=>a.map(i=>i.value).join(" ").trim().split(" ")),On}var Tn,Pa;function Xl(){if(Pa)return Tn;Pa=1;const t=ge(),e=Te();return Tn=(n,a,i)=>{let o=null,c=null,l=null;try{l=new e(a,i)}catch{return null}return n.forEach(u=>{l.test(u)&&(!o||c.compare(u)===-1)&&(o=u,c=new t(o,i))}),o},Tn}var An,Ia;function Wl(){if(Ia)return An;Ia=1;const t=ge(),e=Te();return An=(n,a,i)=>{let o=null,c=null,l=null;try{l=new e(a,i)}catch{return null}return n.forEach(u=>{l.test(u)&&(!o||c.compare(u)===1)&&(o=u,c=new t(o,i))}),o},An}var jn,Na;function Jl(){if(Na)return jn;Na=1;const t=ge(),e=Te(),r=Nr();return jn=(a,i)=>{a=new e(a,i);let o=new t("0.0.0");if(a.test(o)||(o=new t("0.0.0-0"),a.test(o)))return o;o=null;for(let c=0;c<a.set.length;++c){const l=a.set[c];let u=null;l.forEach(s=>{const f=new t(s.semver.version);switch(s.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!u||r(f,u))&&(u=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),u&&(!o||r(o,u))&&(o=u)}return o&&a.test(o)?o:null},jn}var kn,Oa;function Yl(){if(Oa)return kn;Oa=1;const t=Te();return kn=(r,n)=>{try{return new t(r,n).range||"*"}catch{return null}},kn}var Cn,Ta;function is(){if(Ta)return Cn;Ta=1;const t=ge(),e=Or(),{ANY:r}=e,n=Te(),a=Tr(),i=Nr(),o=rs(),c=ss(),l=ns();return Cn=(s,f,h,m)=>{s=new t(s,m),f=new n(f,m);let _,$,p,v,d;switch(h){case">":_=i,$=c,p=o,v=">",d=">=";break;case"<":_=o,$=l,p=i,v="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(s,f,m))return!1;for(let g=0;g<f.set.length;++g){const S=f.set[g];let y=null,E=null;if(S.forEach(b=>{b.semver===r&&(b=new e(">=0.0.0")),y=y||b,E=E||b,_(b.semver,y.semver,m)?y=b:p(b.semver,E.semver,m)&&(E=b)}),y.operator===v||y.operator===d||(!E.operator||E.operator===v)&&$(s,E.semver))return!1;if(E.operator===d&&p(s,E.semver))return!1}return!0},Cn}var qn,Aa;function Zl(){if(Aa)return qn;Aa=1;const t=is();return qn=(r,n,a)=>t(r,n,">",a),qn}var Mn,ja;function Ql(){if(ja)return Mn;ja=1;const t=is();return Mn=(r,n,a)=>t(r,n,"<",a),Mn}var Dn,ka;function ed(){if(ka)return Dn;ka=1;const t=Te();return Dn=(r,n,a)=>(r=new t(r,a),n=new t(n,a),r.intersects(n,a)),Dn}var Ln,Ca;function td(){if(Ca)return Ln;Ca=1;const t=Tr(),e=Oe();return Ln=(r,n,a)=>{const i=[];let o=null,c=null;const l=r.sort((h,m)=>e(h,m,a));for(const h of l)t(h,n,a)?(c=h,o||(o=h)):(c&&i.push([o,c]),c=null,o=null);o&&i.push([o,null]);const u=[];for(const[h,m]of i)h===m?u.push(h):!m&&h===l[0]?u.push("*"):m?h===l[0]?u.push(`<=${m}`):u.push(`${h} - ${m}`):u.push(`>=${h}`);const s=u.join(" || "),f=typeof n.raw=="string"?n.raw:String(n);return s.length<f.length?s:n},Ln}var Fn,qa;function rd(){if(qa)return Fn;qa=1;const t=Te(),e=Or(),{ANY:r}=e,n=Tr(),a=Oe(),i=(f,h,m={})=>{if(f===h)return!0;f=new t(f,m),h=new t(h,m);let _=!1;e:for(const $ of f.set){for(const p of h.set){const v=l($,p,m);if(_=_||v!==null,v)continue e}if(_)return!1}return!0},o=[new e(">=0.0.0-0")],c=[new e(">=0.0.0")],l=(f,h,m)=>{if(f===h)return!0;if(f.length===1&&f[0].semver===r){if(h.length===1&&h[0].semver===r)return!0;m.includePrerelease?f=o:f=c}if(h.length===1&&h[0].semver===r){if(m.includePrerelease)return!0;h=c}const _=new Set;let $,p;for(const O of f)O.operator===">"||O.operator===">="?$=u($,O,m):O.operator==="<"||O.operator==="<="?p=s(p,O,m):_.add(O.semver);if(_.size>1)return null;let v;if($&&p){if(v=a($.semver,p.semver,m),v>0)return null;if(v===0&&($.operator!==">="||p.operator!=="<="))return null}for(const O of _){if($&&!n(O,String($),m)||p&&!n(O,String(p),m))return null;for(const L of h)if(!n(O,String(L),m))return!1;return!0}let d,g,S,y,E=p&&!m.includePrerelease&&p.semver.prerelease.length?p.semver:!1,b=$&&!m.includePrerelease&&$.semver.prerelease.length?$.semver:!1;E&&E.prerelease.length===1&&p.operator==="<"&&E.prerelease[0]===0&&(E=!1);for(const O of h){if(y=y||O.operator===">"||O.operator===">=",S=S||O.operator==="<"||O.operator==="<=",$){if(b&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===b.major&&O.semver.minor===b.minor&&O.semver.patch===b.patch&&(b=!1),O.operator===">"||O.operator===">="){if(d=u($,O,m),d===O&&d!==$)return!1}else if($.operator===">="&&!n($.semver,String(O),m))return!1}if(p){if(E&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===E.major&&O.semver.minor===E.minor&&O.semver.patch===E.patch&&(E=!1),O.operator==="<"||O.operator==="<="){if(g=s(p,O,m),g===O&&g!==p)return!1}else if(p.operator==="<="&&!n(p.semver,String(O),m))return!1}if(!O.operator&&(p||$)&&v!==0)return!1}return!($&&S&&!p&&v!==0||p&&y&&!$&&v!==0||b||E)},u=(f,h,m)=>{if(!f)return h;const _=a(f.semver,h.semver,m);return _>0?f:_<0||h.operator===">"&&f.operator===">="?h:f},s=(f,h,m)=>{if(!f)return h;const _=a(f.semver,h.semver,m);return _<0?f:_>0||h.operator==="<"&&f.operator==="<="?h:f};return Fn=i,Fn}var Vn,Ma;function nd(){if(Ma)return Vn;Ma=1;const t=ft(),e=Pr(),r=ge(),n=po(),a=st(),i=kl(),o=Cl(),c=ql(),l=Ml(),u=Dl(),s=Ll(),f=Fl(),h=Vl(),m=Oe(),_=Ul(),$=zl(),p=ts(),v=Gl(),d=Kl(),g=Nr(),S=rs(),y=mo(),E=yo(),b=ns(),O=ss(),L=go(),G=xl(),q=Or(),V=Te(),K=Tr(),j=Bl(),M=Xl(),B=Wl(),x=Jl(),U=Yl(),H=is(),k=Zl(),P=Ql(),A=ed(),I=td(),w=rd();return Vn={parse:a,valid:i,clean:o,inc:c,diff:l,major:u,minor:s,patch:f,prerelease:h,compare:m,rcompare:_,compareLoose:$,compareBuild:p,sort:v,rsort:d,gt:g,lt:S,eq:y,neq:E,gte:b,lte:O,cmp:L,coerce:G,Comparator:q,Range:V,satisfies:K,toComparators:j,maxSatisfying:M,minSatisfying:B,minVersion:x,validRange:U,outside:H,gtr:k,ltr:P,intersects:A,simplifyRange:I,subset:w,SemVer:r,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},Vn}var sd=nd();const tt=Ja(sd),id=Object.prototype.toString,ad="[object Uint8Array]",od="[object ArrayBuffer]";function vo(t,e,r){return t?t.constructor===e?!0:id.call(t)===r:!1}function _o(t){return vo(t,Uint8Array,ad)}function cd(t){return vo(t,ArrayBuffer,od)}function ud(t){return _o(t)||cd(t)}function ld(t){if(!_o(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function dd(t){if(!ud(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}function Un(t,e){if(t.length===0)return new Uint8Array(0);e??=t.reduce((a,i)=>a+i.length,0);const r=new Uint8Array(e);let n=0;for(const a of t)ld(a),r.set(a,n),n+=a.length;return r}const Da={utf8:new globalThis.TextDecoder("utf8")};function mr(t,e="utf8"){return dd(t),Da[e]??=new globalThis.TextDecoder(e),Da[e].decode(t)}function fd(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const hd=new globalThis.TextEncoder;function zn(t){return fd(t),hd.encode(t)}Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));const La="aes-256-cbc",$o=new Set(["aes-256-cbc","aes-256-gcm","aes-256-ctr"]),pd=t=>typeof t=="string"&&$o.has(t),Me=()=>Object.create(null),Fa=t=>t!==void 0,Gn=(t,e)=>{const r=new Set(["undefined","symbol","function"]),n=typeof e;if(r.has(n))throw new TypeError(`Setting a value of type \`${n}\` for key \`${t}\` is not allowed as it's not supported by JSON`)},Ue="__internal__",Kn=`${Ue}.migrations.version`;class md{path;events;#n;#s;#i;#e;#t={};#a=!1;#o;#c;#r;constructor(e={}){const r=this.#u(e);this.#e=r,this.#l(r),this.#f(r),this.#h(r),this.events=new EventTarget,this.#s=r.encryptionKey,this.#i=r.encryptionAlgorithm??La,this.path=this.#p(r),this.#m(r),r.watch&&this._watch()}get(e,r){if(this.#e.accessPropertiesByDotNotation)return this._get(e,r);const{store:n}=this;return e in n?n[e]:r}set(e,r){if(typeof e!="string"&&typeof e!="object")throw new TypeError(`Expected \`key\` to be of type \`string\` or \`object\`, got ${typeof e}`);if(typeof e!="object"&&r===void 0)throw new TypeError("Use `delete()` to clear values");if(this._containsReservedKey(e))throw new TypeError(`Please don't use the ${Ue} key, as it's used to manage this module internal operations.`);const{store:n}=this,a=(i,o)=>{if(Gn(i,o),this.#e.accessPropertiesByDotNotation)pt(n,i,o);else{if(i==="__proto__"||i==="constructor"||i==="prototype")return;n[i]=o}};if(typeof e=="object"){const i=e;for(const[o,c]of Object.entries(i))a(o,c)}else a(e,r);this.store=n}has(e){return this.#e.accessPropertiesByDotNotation?Mr(this.store,e):e in this.store}appendToArray(e,r){Gn(e,r);const n=this.#e.accessPropertiesByDotNotation?this._get(e,[]):e in this.store?this.store[e]:[];if(!Array.isArray(n))throw new TypeError(`The key \`${e}\` is already set to a non-array value`);this.set(e,[...n,r])}reset(...e){for(const r of e)Fa(this.#t[r])&&this.set(r,this.#t[r])}delete(e){const{store:r}=this;this.#e.accessPropertiesByDotNotation?To(r,e):delete r[e],this.store=r}clear(){const e=Me();for(const r of Object.keys(this.#t))Fa(this.#t[r])&&(Gn(r,this.#t[r]),this.#e.accessPropertiesByDotNotation?pt(e,r,this.#t[r]):e[r]=this.#t[r]);this.store=e}onDidChange(e,r){if(typeof e!="string")throw new TypeError(`Expected \`key\` to be of type \`string\`, got ${typeof e}`);if(typeof r!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof r}`);return this._handleValueChange(()=>this.get(e),r)}onDidAnyChange(e){if(typeof e!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof e}`);return this._handleStoreChange(e)}get size(){return Object.keys(this.store).filter(r=>!this._isReservedKeyPath(r)).length}get store(){try{const e=Q.readFileSync(this.path,this.#s?null:"utf8"),r=this._decryptData(e);return(a=>{const i=this._deserialize(a);return this.#a||this._validate(i),Object.assign(Me(),i)})(r)}catch(e){if(e?.code==="ENOENT")return this._ensureDirectory(),Me();if(this.#e.clearInvalidConfig){const r=e;if(r.name==="SyntaxError"||r.message?.startsWith("Config schema violation:")||r.message==="Failed to decrypt config data.")return Me()}throw e}}set store(e){if(this._ensureDirectory(),!Mr(e,Ue))try{const r=Q.readFileSync(this.path,this.#s?null:"utf8"),n=this._decryptData(r),a=this._deserialize(n);Mr(a,Ue)&&pt(e,Ue,ls(a,Ue))}catch{}this.#a||this._validate(e),this._write(e),this.events.dispatchEvent(new Event("change"))}*[Symbol.iterator](){for(const[e,r]of Object.entries(this.store))this._isReservedKeyPath(e)||(yield[e,r])}_closeWatcher(){this.#o&&(this.#o.close(),this.#o=void 0),this.#c&&(Q.unwatchFile(this.path),this.#c=!1),this.#r=void 0}_decryptData(e){const r=this.#s;if(!r)return typeof e=="string"?e:mr(e);const n=this.#i,a=n==="aes-256-gcm"?16:0,i=":".codePointAt(0),o=typeof e=="string"?e.codePointAt(16):e[16];if(!(i!==void 0&&o===i)){if(n==="aes-256-cbc")return typeof e=="string"?e:mr(e);throw new Error("Failed to decrypt config data.")}const l=m=>{if(a===0)return{ciphertext:m};const _=m.length-a;if(_<0)throw new Error("Invalid authentication tag length.");return{ciphertext:m.slice(0,_),authenticationTag:m.slice(_)}},u=e.slice(0,16),s=e.slice(17),f=typeof s=="string"?zn(s):s,h=m=>{const{ciphertext:_,authenticationTag:$}=l(f),p=at.pbkdf2Sync(r,m,1e4,32,"sha512"),v=at.createDecipheriv(n,p,u);return $&&v.setAuthTag($),mr(Un([v.update(_),v.final()]))};try{return h(u)}catch{try{return h(u.toString())}catch{}}if(n==="aes-256-cbc")return typeof e=="string"?e:mr(e);throw new Error("Failed to decrypt config data.")}_handleStoreChange(e){let r=this.store;const n=()=>{const a=r,i=this.store;ue.isDeepStrictEqual(i,a)||(r=i,e.call(this,i,a))};return this.events.addEventListener("change",n),()=>{this.events.removeEventListener("change",n)}}_handleValueChange(e,r){let n=e();const a=()=>{const i=n,o=e();ue.isDeepStrictEqual(o,i)||(n=o,r.call(this,o,i))};return this.events.addEventListener("change",a),()=>{this.events.removeEventListener("change",a)}}_deserialize=e=>JSON.parse(e);_serialize=e=>JSON.stringify(e,void 0,"	");_validate(e){if(!this.#n||this.#n(e)||!this.#n.errors)return;const n=this.#n.errors.map(({instancePath:a,message:i=""})=>`\`${a.slice(1)}\` ${i}`);throw new Error("Config schema violation: "+n.join("; "))}_ensureDirectory(){Q.mkdirSync(re.dirname(this.path),{recursive:!0})}_write(e){let r=this._serialize(e);const n=this.#s;if(n){const a=at.randomBytes(16),i=at.pbkdf2Sync(n,a,1e4,32,"sha512"),o=at.createCipheriv(this.#i,i,a),c=Un([o.update(zn(r)),o.final()]),l=[a,zn(":"),c];this.#i==="aes-256-gcm"&&l.push(o.getAuthTag()),r=Un(l)}if(oe.env.SNAP)Q.writeFileSync(this.path,r,{mode:this.#e.configFileMode});else try{Wa(this.path,r,{mode:this.#e.configFileMode})}catch(a){if(a?.code==="EXDEV"){Q.writeFileSync(this.path,r,{mode:this.#e.configFileMode});return}throw a}}_watch(){if(this._ensureDirectory(),Q.existsSync(this.path)||this._write(Me()),oe.platform==="win32"||oe.platform==="darwin"){this.#r??=xi(()=>{this.events.dispatchEvent(new Event("change"))},{wait:100});const e=re.dirname(this.path),r=re.basename(this.path);this.#o=Q.watch(e,{persistent:!1,encoding:"utf8"},(n,a)=>{a&&a!==r||typeof this.#r=="function"&&this.#r()})}else this.#r??=xi(()=>{this.events.dispatchEvent(new Event("change"))},{wait:1e3}),Q.watchFile(this.path,{persistent:!1},(e,r)=>{typeof this.#r=="function"&&this.#r()}),this.#c=!0}_migrate(e,r,n){let a=this._get(Kn,"0.0.0");const i=Object.keys(e).filter(c=>this._shouldPerformMigration(c,a,r));let o=structuredClone(this.store);for(const c of i)try{n&&n(this,{fromVersion:a,toVersion:c,finalVersion:r,versions:i});const l=e[c];l?.(this),this._set(Kn,c),a=c,o=structuredClone(this.store)}catch(l){this.store=o;const u=l instanceof Error?l.message:String(l);throw new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${u}`)}(this._isVersionInRangeFormat(a)||!tt.eq(a,r))&&this._set(Kn,r)}_containsReservedKey(e){return typeof e=="string"?this._isReservedKeyPath(e):!e||typeof e!="object"?!1:this._objectContainsReservedKey(e)}_objectContainsReservedKey(e){if(!e||typeof e!="object")return!1;for(const[r,n]of Object.entries(e))if(this._isReservedKeyPath(r)||this._objectContainsReservedKey(n))return!0;return!1}_isReservedKeyPath(e){return e===Ue||e.startsWith(`${Ue}.`)}_isVersionInRangeFormat(e){return tt.clean(e)===null}_shouldPerformMigration(e,r,n){return this._isVersionInRangeFormat(e)?r!=="0.0.0"&&tt.satisfies(r,e)?!1:tt.satisfies(n,e):!(tt.lte(e,r)||tt.gt(e,n))}_get(e,r){return ls(this.store,e,r)}_set(e,r){const{store:n}=this;pt(n,e,r),this.store=n}#u(e){const r={configName:"config",fileExtension:"json",projectSuffix:"nodejs",clearInvalidConfig:!1,accessPropertiesByDotNotation:!0,configFileMode:438,...e};if(r.encryptionAlgorithm??=La,!pd(r.encryptionAlgorithm))throw new TypeError(`The \`encryptionAlgorithm\` option must be one of: ${[...$o].join(", ")}`);if(!r.cwd){if(!r.projectName)throw new Error("Please specify the `projectName` option.");r.cwd=Co(r.projectName,{suffix:r.projectSuffix}).config}return typeof r.fileExtension=="string"&&(r.fileExtension=r.fileExtension.replace(/^\.+/,"")),r}#l(e){if(!(e.schema??e.ajvOptions??e.rootSchema))return;if(e.schema&&typeof e.schema!="object")throw new TypeError("The `schema` option must be an object.");const r=bl.default,n=new ll.Ajv2020({allErrors:!0,useDefaults:!0,...e.ajvOptions});r(n);const a={...e.rootSchema,type:"object",properties:e.schema};this.#n=n.compile(a),this.#d(e.schema)}#d(e){const r=Object.entries(e??{});for(const[n,a]of r){if(!a||typeof a!="object"||!Object.hasOwn(a,"default"))continue;const{default:i}=a;i!==void 0&&(this.#t[n]=i)}}#f(e){e.defaults&&Object.assign(this.#t,e.defaults)}#h(e){e.serialize&&(this._serialize=e.serialize),e.deserialize&&(this._deserialize=e.deserialize)}#p(e){const r=typeof e.fileExtension=="string"?e.fileExtension:void 0,n=r?`.${r}`:"";return re.resolve(e.cwd,`${e.configName??"config"}${n}`)}#m(e){if(e.migrations){this.#y(e),this._validate(this.store);return}const r=this.store,n=Object.assign(Me(),e.defaults??{},r);this._validate(n);try{us.deepEqual(r,n)}catch{this.store=n}}#y(e){const{migrations:r,projectVersion:n}=e;if(r){if(!n)throw new Error("Please specify the `projectVersion` option.");this.#a=!0;try{const a=this.store,i=Object.assign(Me(),e.defaults??{},a);try{us.deepEqual(a,i)}catch{this._write(i)}this._migrate(r,n,e.beforeEachMigration)}finally{this.#a=!1}}}}const{app:vr,ipcMain:Hn,shell:yd}=z;let Va=!1;const Ua=()=>{if(!Hn||!vr)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");const t={defaultCwd:vr.getPath("userData"),appVersion:vr.getVersion()};return Va||(Hn.on("electron-store-get-data",e=>{e.returnValue=t}),Va=!0),t};class Ar extends md{constructor(e){let r,n;if(oe.type==="renderer"){const a=z.ipcRenderer.sendSync("electron-store-get-data");if(!a)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");({defaultCwd:r,appVersion:n}=a)}else Hn&&vr&&({defaultCwd:r,appVersion:n}=Ua());e={name:"config",...e},e.projectVersion||=n,e.cwd?e.cwd=re.isAbsolute(e.cwd)?e.cwd:re.join(r,e.cwd):e.cwd=r,e.configName=e.name,delete e.name,super(e)}static initRenderer(){Ua()}async openInEditor(){const e=await yd.openPath(this.path);if(e)throw new Error(e)}}const ht=re.join(Xn.homedir(),".copilot","tokens-app");Q.mkdirSync(ht,{recursive:!0});const Y=new Ar({cwd:ht,defaults:{sessions:[],allTimeBests:{},commitBests:{linesAdded:0,linesRemoved:0},lifetimeTokens:0,longestStreak:0,currentStreak:0,lastSessionDate:"",fastestResponse:1/0,recentCwds:[],currentCwd:"",currentModel:"claude-sonnet-4",achievements:[],sessionEvents:[],levelProgress:{level:1,categoryProgress:{tokens:0,messages:0,toolCalls:0,files:0,lines:0}}}});class gd{recordSession(e){const r=Y.get("sessions");r.push({...e,timestamp:Date.now(),cwd:Y.get("currentCwd")||void 0}),Y.set("sessions",r);const n=Y.get("allTimeBests"),a=Object.keys(e);for(const c of a)(n[c]===void 0||e[c]>n[c])&&(n[c]=e[c]);Y.set("allTimeBests",n),Y.set("lifetimeTokens",Y.get("lifetimeTokens")+e.inputTokens+e.outputTokens);const i=new Date().toISOString().slice(0,10),o=Y.get("lastSessionDate");if(o!==i){const c=new Date(Date.now()-864e5).toISOString().slice(0,10);if(o===c){const l=Y.get("currentStreak")+1;Y.set("currentStreak",l),l>Y.get("longestStreak")&&Y.set("longestStreak",l)}else Y.set("currentStreak",1),Y.get("longestStreak")<1&&Y.set("longestStreak",1);Y.set("lastSessionDate",i)}}getAllTimeBests(){return Y.get("allTimeBests")}getTopSessions(e){return Y.get("sessions").sort((n,a)=>a.inputTokens+a.outputTokens-(n.inputTokens+n.outputTokens)).slice(0,e).map((n,a)=>({...n,rank:a+1}))}getLifetimeStats(){return{lifetimeTokens:Y.get("lifetimeTokens"),totalSessions:Y.get("sessions").length,longestStreak:Y.get("longestStreak"),currentStreak:Y.get("currentStreak"),fastestResponse:Y.get("fastestResponse")}}getCurrentSessionRank(e){return Y.get("sessions").filter(a=>a.inputTokens+a.outputTokens>e).length+1}getAllSessions(){return Y.get("sessions").slice().sort((e,r)=>r.timestamp-e.timestamp)}getCwd(){return Y.get("currentCwd")||""}setCwd(e){Y.set("currentCwd",e);const r=Y.get("recentCwds").filter(n=>n!==e);r.unshift(e),Y.set("recentCwds",r.slice(0,10))}getRecentCwds(){return Y.get("recentCwds")}recordReactionTime(e){const r=Y.get("fastestResponse"),n=e<r;return n&&Y.set("fastestResponse",e),{isNewBest:n,timeMs:e,previousBest:r}}getModel(){return Y.get("currentModel")}setModel(e){Y.set("currentModel",e)}recordCommitBests(e,r){const n=Y.get("commitBests");e>n.linesAdded&&(n.linesAdded=e),r>n.linesRemoved&&(n.linesRemoved=r),Y.set("commitBests",n)}getCommitBests(){return Y.get("commitBests")}getAchievements(){return Y.get("achievements")}addAchievement(e){const r=Y.get("achievements");r.some(n=>n.milestoneId===e.milestoneId)||(r.push(e),Y.set("achievements",r))}clearAchievements(){Y.set("achievements",[])}saveSessionEvents(e,r){const n=Y.get("sessionEvents");n.push({sessionTimestamp:e,events:r}),n.length>20&&n.splice(0,n.length-20),Y.set("sessionEvents",n)}getSessionEvents(){return Y.get("sessionEvents")}getSessionEventLog(e){return Y.get("sessionEvents").find(r=>r.sessionTimestamp===e)}getLevelProgress(){return Y.get("levelProgress")}setLevelProgress(e){Y.set("levelProgress",e)}}const yr=new Ar({name:"permissions",cwd:ht,defaults:{permissionRules:[]}});function Bn(t){return re.normalize(re.resolve(t)).replace(/\/+$/,"")}function gr(t,e){const r=Bn(t),n=Bn(e);return r===n||r.startsWith(n+"/")}function vd(t){const e=t.fileName??t.path??t.file??t.filePath??null;return e?String(e):null}class _d{_yoloMode=!1;get yoloMode(){return this._yoloMode}set yoloMode(e){this._yoloMode=e}evaluate(e,r){const n=String(e.kind??"");if(n==="url"||n==="mcp")return"allow";const a=vd(e);if(this._yoloMode&&r&&(n==="shell"||a&&gr(a,r))||n==="read"&&a&&r&&gr(a,r))return"allow";const i=this.getRules();for(const o of i)if(o.kind===n&&(n==="shell"&&r&&gr(r,o.pathPrefix)||a&&gr(a,o.pathPrefix)))return"allow";return"ask"}addRule(e){const r=this.getRules(),n={kind:e.kind,pathPrefix:Bn(e.pathPrefix)};r.some(i=>i.kind===n.kind&&i.pathPrefix===n.pathPrefix)||(r.push(n),yr.set("permissionRules",r))}getRules(){return yr.get("permissionRules")}removeRule(e){const r=this.getRules();r.splice(e,1),yr.set("permissionRules",r)}clearRules(){yr.set("permissionRules",[])}}const wo="Iv23ctpsQOCyDp2e7kOD",Ge=new Ar({name:"auth",cwd:ht,defaults:{oauthToken:null,oauthUser:null,activeSource:"cli"}});function $d(){return new Promise(t=>{Pe.execFile("gh",["api","user"],(e,r)=>{if(e){t(null);return}try{const n=JSON.parse(r);t({login:n.login,name:n.name??null,avatarUrl:n.avatar_url,id:n.id})}catch{t(null)}})})}function as(t,e){return new Promise((r,n)=>{const a=z.net.request({url:t,method:e.method??"GET"});for(const[o,c]of Object.entries(e.headers??{}))a.setHeader(o,c);let i="";a.on("response",o=>{o.on("data",c=>{i+=c.toString()}),o.on("end",()=>r({status:o.statusCode,body:i}))}),a.on("error",n),e.body&&a.write(e.body),a.end()})}async function wd(){const t=await as("https://github.com/login/device/code",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({client_id:wo,scope:"read:user"})});if(t.status!==200)throw new Error(`Device flow request failed: ${t.status}`);return JSON.parse(t.body)}async function Ed(t,e){const r=n=>new Promise(a=>setTimeout(a,n));for(;;){await r(e*1e3);const n=await as("https://github.com/login/oauth/access_token",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({client_id:wo,device_code:t,grant_type:"urn:ietf:params:oauth:grant-type:device_code"})}),a=JSON.parse(n.body);if(a.access_token)return a.access_token;if(a.error!=="authorization_pending"){if(a.error==="slow_down"){e=a.interval??e+5;continue}throw new Error(a.error_description??a.error??"OAuth polling failed")}}}async function Sd(t){const e=await as("https://api.github.com/user",{headers:{Authorization:`Bearer ${t}`,Accept:"application/json","User-Agent":"github-tokens-app"}});if(e.status!==200)throw new Error(`GitHub API error: ${e.status}`);const r=JSON.parse(e.body);return{login:r.login,name:r.name??null,avatarUrl:r.avatar_url,id:r.id}}function bd(){return Ge.get("oauthUser")}function Rd(t,e){Ge.set("oauthToken",t),Ge.set("oauthUser",e)}function Pd(){Ge.set("oauthToken",null),Ge.set("oauthUser",null),Ge.set("activeSource","cli")}function Id(){return Ge.get("activeSource")}function za(t){Ge.set("activeSource",t)}const ce=new Ar({name:"packs",cwd:ht,defaults:{milestonePacks:[],soundPacks:[],themePacks:[]}});function Nd(){return ce.get("milestonePacks")}function Od(t){const e=ce.get("milestonePacks"),r=e.findIndex(n=>n.id===t.id);r>=0?e[r]=t:e.push(t),ce.set("milestonePacks",e)}function Td(t){ce.set("milestonePacks",ce.get("milestonePacks").filter(e=>e.id!==t))}function Ad(t,e){const r=ce.get("milestonePacks"),n=r.find(a=>a.id===t);n&&(n.active=e,ce.set("milestonePacks",r))}function jd(){return ce.get("soundPacks")}function kd(t){const e=ce.get("soundPacks"),r=e.findIndex(n=>n.id===t.id);r>=0?e[r]=t:e.push(t),ce.set("soundPacks",e)}function Cd(t){ce.set("soundPacks",ce.get("soundPacks").filter(e=>e.id!==t))}function qd(t){const e=ce.get("soundPacks").map(r=>({...r,active:r.id===t}));ce.set("soundPacks",e)}function Md(){return ce.get("themePacks")}function Dd(t){const e=ce.get("themePacks"),r=e.findIndex(n=>n.id===t.id);r>=0?e[r]=t:e.push(t),ce.set("themePacks",e)}function Ld(t){ce.set("themePacks",ce.get("themePacks").filter(e=>e.id!==t))}function xn(t){const e=t.trim().split(`
`).filter(Boolean);let r=0,n=0;const a=[];for(const i of e){const o=i.split("	");if(o.length>=3){const c=parseInt(o[0],10),l=parseInt(o[1],10);isNaN(c)||(r+=c),isNaN(l)||(n+=l),a.push(o[2])}}return{filesChanged:a.length,linesAdded:r,linesRemoved:n,files:a}}function Fd(t){const e=Be.getInstance(),r=new gd,n=r.getCwd();n&&e.setWorkingDirectory(n);const a=r.getModel();a&&e.setModel(a);const i=new _d;let o=null;e.setPermissionHandler(async u=>{const s=r.getCwd();return i.evaluate(u,s)==="allow"?"allow":new Promise(h=>{o={resolve:h},t.webContents.send("copilot:permissionRequest",{...u,cwd:s})})}),z.ipcMain.handle("copilot:permissionResponse",(u,s)=>{o&&(o.resolve(s),o=null)}),z.ipcMain.handle("copilot:addPermissionRule",(u,s,f)=>{i.addRule({kind:s,pathPrefix:f})}),z.ipcMain.handle("copilot:getPermissionRules",()=>i.getRules()),z.ipcMain.handle("copilot:removePermissionRule",(u,s)=>{i.removeRule(s)}),z.ipcMain.handle("copilot:clearPermissionRules",()=>{i.clearRules()}),z.ipcMain.handle("copilot:setYoloMode",(u,s)=>{i.yoloMode=s}),z.ipcMain.handle("copilot:getYoloMode",()=>i.yoloMode),z.ipcMain.handle("copilot:sendMessage",async(u,s,f,h)=>{const m=h||"main";try{await e.sendMessage(s,_=>{t.webContents.send(`copilot:event:${m}`,_)},f,m)}catch(_){console.error("[IPC] copilot:sendMessage error:",_),t.webContents.send(`copilot:event:${m}`,{type:"session.idle"})}}),z.ipcMain.handle("copilot:abort",async(u,s)=>{const f=s||"main";await e.abort(f),t.webContents.send(`copilot:event:${f}`,{type:"session.idle"})}),z.ipcMain.handle("copilot:destroySession",async(u,s)=>{await e.destroySession(s)}),z.ipcMain.handle("stats:getTopSessions",(u,s)=>r.getTopSessions(s)),z.ipcMain.handle("stats:getAllTimeBests",()=>r.getAllTimeBests()),z.ipcMain.handle("stats:getAllSessions",()=>r.getAllSessions()),z.ipcMain.handle("stats:recordSession",(u,s)=>{r.recordSession(s)}),z.ipcMain.handle("stats:getLifetimeStats",()=>r.getLifetimeStats()),z.ipcMain.handle("stats:getCurrentSessionRank",(u,s)=>r.getCurrentSessionRank(s)),z.ipcMain.handle("stats:getAchievements",()=>r.getAchievements()),z.ipcMain.handle("stats:addAchievement",(u,s)=>{r.addAchievement(s)}),z.ipcMain.handle("stats:clearAchievements",()=>{r.clearAchievements()}),z.ipcMain.handle("stats:saveSessionEvents",(u,s,f)=>{r.saveSessionEvents(s,f)}),z.ipcMain.handle("stats:getSessionEvents",()=>r.getSessionEvents()),z.ipcMain.handle("stats:getSessionEventLog",(u,s)=>r.getSessionEventLog(s)),z.ipcMain.handle("stats:getLevelProgress",()=>r.getLevelProgress()),z.ipcMain.handle("stats:setLevelProgress",(u,s)=>{r.setLevelProgress(s)}),z.ipcMain.handle("stats:recordReactionTime",(u,s)=>r.recordReactionTime(s)),z.ipcMain.handle("stats:getCommitBests",()=>r.getCommitBests()),z.ipcMain.handle("git:commit",async(u,s,f)=>{const h=r.getCwd();return h?new Promise(m=>{Pe.execFile("git",["-C",h,"add","-A"],_=>{if(_){console.error("[git:commit] add failed:",_),m({success:!1});return}Pe.execFile("git",["-C",h,"commit","-m",s],($,p)=>{if($){console.error("[git:commit] commit failed:",$),m({success:!1});return}const v=p.match(/\[[\w/-]+ ([a-f0-9]+)\]/);Pe.execFile("git",["-C",h,"show","--numstat","--format=","HEAD"],(d,g)=>{if(!d&&g){const{linesAdded:S,linesRemoved:y}=xn(g);r.recordCommitBests(S,y)}m({success:!0,hash:v?.[1]})})})})}):{success:!1,hash:void 0}}),z.ipcMain.handle("git:diff",async()=>{const u=r.getCwd();return u?new Promise(s=>{Pe.execFile("git",["-C",u,"diff","HEAD"],{maxBuffer:1024*1024*5},(f,h)=>{if(f){Pe.execFile("git",["-C",u,"diff"],{maxBuffer:1024*1024*5},(m,_)=>{s(m?"":_)});return}s(h)})}):""}),z.ipcMain.handle("cwd:get",()=>r.getCwd()),z.ipcMain.handle("cwd:set",(u,s)=>{r.setCwd(s),e.setWorkingDirectory(s)}),z.ipcMain.handle("cwd:getRecent",()=>r.getRecentCwds()),z.ipcMain.handle("cwd:browse",async()=>{const u=await z.dialog.showOpenDialog(t,{properties:["openDirectory"],title:"Select Working Directory"});if(!u.canceled&&u.filePaths.length>0){const s=u.filePaths[0];return r.setCwd(s),e.setWorkingDirectory(s),s}return null}),z.ipcMain.handle("cwd:gitInfo",async(u,s)=>s?new Promise(f=>{Pe.execFile("git",["-C",s,"rev-parse","--abbrev-ref","HEAD"],(h,m)=>{f(h?{isRepo:!1}:{isRepo:!0,branch:m.trim()})})}):{isRepo:!1}),z.ipcMain.handle("cwd:gitStats",async(u,s)=>s?new Promise(f=>{Pe.execFile("git",["-C",s,"diff","--numstat","HEAD"],(h,m)=>{if(h){Pe.execFile("git",["-C",s,"diff","--numstat"],(_,$)=>{if(_){f({filesChanged:0,linesAdded:0,linesRemoved:0,files:[]});return}f(xn($))});return}f(xn(m))})}):{filesChanged:0,linesAdded:0,linesRemoved:0,files:[]});let c=0;z.ipcMain.handle("util:saveTempImage",async(u,s,f)=>{const h=z.app.getPath("temp"),m=`github-tokens-paste-${Date.now()}-${c++}.${f||"png"}`,_=re.join(h,m);return await bo.writeFile(_,s),_}),z.ipcMain.handle("util:openInVSCode",(u,s)=>{s&&Pe.execFile("code",[s],{env:process.env})}),z.ipcMain.handle("util:openCopilotShell",(u,s)=>{if(!s)return;const f=`tell application "Terminal" to do script "cd ${s.replace(/"/g,'\\"')} && copilot"`;Pe.execFile("osascript",["-e",f])}),z.ipcMain.handle("mcp:list",()=>{const u=Ka();return Object.entries(u).map(([s,f])=>({name:s,type:"type"in f&&f.type?f.type:"stdio",command:"command"in f?f.command:"url"in f?f.url:""}))}),z.ipcMain.handle("model:get",()=>r.getModel()),z.ipcMain.handle("model:set",(u,s)=>{r.setModel(s),e.setModel(s)}),z.ipcMain.handle("model:list",async()=>e.listModels()),z.ipcMain.handle("model:refresh",async()=>e.refreshModels()),z.ipcMain.handle("auth:getCliUser",async()=>$d()),z.ipcMain.handle("auth:getOAuthUser",()=>bd());let l=null;z.ipcMain.handle("auth:startOAuth",async()=>{const u=await wd();return l={deviceCode:u.device_code,interval:u.interval},z.shell.openExternal(u.verification_uri),{userCode:u.user_code,verificationUri:u.verification_uri}}),z.ipcMain.handle("auth:pollOAuth",async()=>{if(!l)throw new Error("No active device flow");const u=await Ed(l.deviceCode,l.interval);l=null;const s=await Sd(u);return Rd(u,s),za("oauth"),s}),z.ipcMain.handle("auth:setActiveSource",(u,s)=>{za(s)}),z.ipcMain.handle("auth:getActiveSource",()=>Id()),z.ipcMain.handle("auth:logoutOAuth",()=>{Pd()}),z.ipcMain.handle("packs:milestone:list",()=>Nd()),z.ipcMain.handle("packs:milestone:save",(u,s)=>Od(s)),z.ipcMain.handle("packs:milestone:delete",(u,s)=>Td(s)),z.ipcMain.handle("packs:milestone:setActive",(u,s,f)=>Ad(s,f)),z.ipcMain.handle("packs:sound:list",()=>jd()),z.ipcMain.handle("packs:sound:save",(u,s)=>kd(s)),z.ipcMain.handle("packs:sound:delete",(u,s)=>Cd(s)),z.ipcMain.handle("packs:sound:setActive",(u,s)=>qd(s)),z.ipcMain.handle("packs:theme:list",()=>Md()),z.ipcMain.handle("packs:theme:save",(u,s)=>Dd(s)),z.ipcMain.handle("packs:theme:delete",(u,s)=>Ld(s))}const Vd=z.app.requestSingleInstanceLock();Vd||z.app.quit();let Xe=null;function Eo(){Xe=new z.BrowserWindow({width:1200,height:800,backgroundColor:"#0d1117",titleBarStyle:"hiddenInset",frame:!0,webPreferences:{preload:re.join(__dirname,"preload.js"),contextIsolation:!0,nodeIntegration:!1}}),Fd(Xe),Xe.loadFile(re.join(__dirname,"../renderer/main_window/index.html"))}z.app.whenReady().then(Eo);z.app.on("second-instance",()=>{Xe&&(Xe.isMinimized()&&Xe.restore(),Xe.focus())});z.app.on("window-all-closed",()=>{Be.getInstance().stop().catch(console.error),process.platform!=="darwin"&&z.app.quit()});z.app.on("activate",()=>{z.BrowserWindow.getAllWindows().length===0&&Eo()});
